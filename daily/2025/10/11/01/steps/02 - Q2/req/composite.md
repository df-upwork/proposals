# 1. `B.md`
~~~~~~markdown
# 1. `᛭MDi`
## 1.1.
Каждый отдельный (произвольный, неопределённый) документ в формате Markdown, прикреплённый мной к этому запросу, буду обозначать `᛭Di`.
## 1.2.
Имя файла `᛭Di` всегда имеет расширение `.md`.
## 1.3.
Множество всех `᛭Di` буду обозначать `᛭Ds`.

# 2. `L.md`
### 2.1.
`L.md` ∈ `᛭Ds`.
## 2.2.
`L.md` описывает полуформальный язык: `᛭L`.
## 2.3.
Большинство `᛭Di` написаны на `᛭L`.
## 2.4.
Множество всех `᛭Di`, написанных на `᛭L`, буду обозначать `᛭DLs`.
Таким образом, `᛭DLs` ⊆ `᛭Ds`. 

# 3. `O.md`
## 3.1.
`O.md` ∈ `᛭DLs`
## 3.2.
`O.md` описывает некую **онтологию** (`᛭O`)  — модель предметной области, в которой тебе предстоит решать задачу.
«An **ontology** encompasses a representation, formal naming, and definitions of the categories, properties, and relations between the concepts, data, or entities»: https://en.wikipedia.org/wiki/Ontology_(information_science)

# 4. `T.md`
## 4.1.
`T.md` ∈ `᛭DLs`
## 4.2.
`T.md` описывает задачу (`᛭T`), которую ты должен решить.

# 5. Порядок твоих действий
Действуй пошагово:
## 5.1.
Сначала внимательно и полностью прочитай `L.md`.
В точности запомни его содержание.

## 5.2.
Затем внимательно и полностью прочитай `O.md`. 
В точности запомни его содержание.

## 5.3.
Затем внимательно и полностью прочитай `T.md`. 
Выполни `᛭T`.

~~~~~~

# 2. `L.md`
~~~~~~markdown
# 1. `≔`
## 1.1.
- `≔` — это бинарный оператор.
## 1.2.
`A ≔ B` means that `A` **denotes** `B`.
## 1.3.
Я использую `≔` для сокращения записи.
В выражении `A ≔ B` `B` обычно — это длинный текст, а `A` — это более короткое обозначение.  
## 1.4.
~~~code
A ≔
```
B
```
~~~
равнозначно `A ≔ B` и используется, когда `B` — многострочный текст.

# 2. `→`
~~~code
A → B
~~~
denotes a material conditional (https://en.wikipedia.org/wiki/Material_conditional)

# 3. `⊢`
~~~code
A ⊢ B
~~~
denotes a logical consequence (https://en.wikipedia.org/wiki/Logical_consequence)

# 4. `⊤`
## 4.1.
~~~code
⊤ B
~~~
means that `B` is true (is a fact).

## 4.2.
~~~code
⊤⟦Rs⟧ B
~~~
means:
```
(⊤ `B`) AND (`Rs` are the reasons why `B` is true)
```

## 4.3.
~~~code
A ≔⊤
```
B
```
~~~
means:
```code
(`A` ≔ `B`) AND (⊤ `B`).
```

## 4.4.
~~~code
A ≔⊤⟦Rs⟧
```
B
```
~~~
means:
```code
(`A` ≔ `B`) AND (⊤⟦Rs⟧ B).
```

# 5. `≔!`
## 5.1.
~~~code
A ≔! B
~~~
means:
```code
(`A` ≔⊤ `B`) AND (`B` is surprising).
```

## 5.2.
~~~code
A ≔!⟦Rs⟧ B
~~~
means:
```code
(`A` ≔⊤⟦Rs⟧ `B`) AND (`B` is surprising).
```

# 6. `?`
## 6.1.
~~~code
? B
~~~
means that `B` is a hypothesis.

## 6.2.
~~~code
?⟦Rs⟧ B
~~~
means:
```code
(? `B`) AND (`Rs` are the reasons for the hypothesis)
```

## 6.3.
~~~code
A ≔? B
~~~
means:
```code
(? `B`) AND (`A` ≔ `B`)
```

## 6.4.
~~~code
A ≔?⟦Rs⟧ B
~~~
means:
```code
(?⟦Rs⟧ `B`) AND (`A` ≔ `B`)
```

# 7.
## 7.1.
~~~code
A : S ≔ B
~~~
means:
```code
(`A` ≔ `B`) AND (`A` ∈ `S`).
```

## 7.2.
~~~code
A : S
~~~
means:
```code
`A` : `S` ≔ (an arbitrary element of `S`)
```

# 8. `⠿{…}`
## 8.1. `⠿{I₁, I₂, …, Iₙ}`
`⠿{I₁, I₂, …, Iₙ}` обозначает множество, заданное точным перечислением всех его элементов: {`I₁`, `I₂`, …, `Iₙ`}.

## 8.2. `⠿{I₁-Iₙ}` 
`⠿{I₁-Iₙ}` обозначает множество, заданное интервалом (диапазоном) его значений.
Это множество, в числе прочего, включает границы указанного интервала: `I₁` и `Iₙ`.

# 9. `⠿~`
## 9.1. `⠿~ (D)`
`⠿~ (D)` обозначает множество, заданное неформальным (словесным) описанием его элементов (`D`).

## 9.2.
~~~code
⠿~
```
D
```	
~~~
равнозначно `⠿~ (D)` и используется, когда `D` — многострочный текст.

## 9.3.
~~~code
S ≔ ⠿~ (D)
```yaml
- I₁
- I₂
- …
- Iₙ
```	
~~~
означает: (`S ≔ ⠿~ (D)`) AND (⠿{`I₁`, `I₂`, …, `Iₙ`} ⊆ `S`) .

# 10.
## 10.1.
`᛭DLi` : `᛭DLs`
## 10.2.
### 10.2.1.
`᛭Dc` — это обозначение `᛭DLi` самого себя.
Другими словами, если текст `᛭DLi` содержит упоминание `᛭Dс` — это значит, что `᛭Di` упоминает сам себя. 
### 10.2.2.
Например: если имя файла `᛭Di` — `sample.md`, и текст `sample.md` использует обозначение `᛭Dc`, это значит, что `᛭Dc` в данном случае обозначает документ `sample.md`.  

# 11. `§`
## 11.1.
~~~code
§P
~~~
означает ссылку на пункт `P` `᛭Dc`.
Например, §8.2.2 означает ссылку на пункт 8.2.2 `᛭Dc`.
## 11.2.
~~~code
`᛭DLi`::§P
~~~
означает ссылку на пункт `P` `᛭DLi`.
  
# 12. Local Definitions
## 12.1.
~~~code
A[§P] ≔ B
~~~
Означает:
- Для понятия `B` я **временно**, **только в рамках** §`P`, использую обозначение `A`.
- Вне §`P` это правило не применяется: в частности, если до §`P` обозначение `A` имело другой смысл, то после §`P` обозначение `A` снова будет иметь этот смысл.
- По сути, `A[§P] ≔ B` объявляет **локальную переменную** `A` с **областью действия** §`P`.
- В отличие от `A[§P] ≔ B`, `A ≔ B` объявляет **глобальную переменную** `A`.

## 12.2.
~~~code
A[§P₁, §P₂, …, §Pₙ] ≔ B
~~~
Означает, что обозначение `A` имеет значение `B` в контексте ⠿{§`P₁`, §`P₂`, …, §`Pₙ`}.
По сути, это правило аналогично §12.1, но область действия локальной переменной `A` ограничивается не одним пунктом, а множеством пунктов.

## 12.3.
~~~code
A[§P₁-§Pₙ] ≔ B
~~~
Означает, что обозначение `A` имеет значение `B` в контексте ⠿{§P₁-§Pₙ}.
По сути, это правило аналогично §12.1 и §12.2.

# 13. `≔†`
~~~code
A ≔† B
~~~
means:
```code
(`A` ≔ `B`) AND (`B` is a **problem** to me).
```

# 14. `▶`
```code
▶ A
```
означает, что в описываемой мной ситуации я использую `A`.

# 15. `ⰳ`
```code
Aⰳ(a, b, …) ≔ B
```
means:
- `A` — это функция с параметрами ⠿{`a`, `b`, …}.
- `B` — семантика `A`

# 16. `߷`
## 16.1.
```
߷⠿ ≔ ⠿~ (приложеные к этому запросу файлы)
```

## 16.2.
```code
߷ⰳ(ID, Name) ≔ Desc
```
means:
```code
- `ID` : `߷⠿` ≔ `Desc`
- `Name` — имя файла
```


~~~~~~

# 3. `O.md`
~~~~~~markdown
# 0.
Сегодня 2025-10-11.

# 1.
## 1.1.
`UW` ≔ (Upwork: https://en.wikipedia.org/wiki/Upwork)

## 1.2.
`ꆜ` ≔ (Некий конкретный потенциальный клиент на `UW`)

## 1.3.
`P⁎` ≔ (Некий конкретный потенциальный проект, опубликованный `ꆜ` на `UW`)

# 2. Информация о `P⁎`
## 2.1. URL
https://www.upwork.com/jobs/~021976761693152321024

## 2.2. Title
AWS Lightsail/Wordpress DevOps Enginee

## 2.3. Description
`PD` ≔ 
```text
We need an experienced DevOps / Systems Engineer to stabilize our AWS Lightsail WordPress production environment. 
The site has had intermittent downtime and performance issues, and we need someone who can quickly diagnose the root causes, implement durable fixes, and improve system reliability.

What you’ll do:
- Diagnose Apache, PHP, and MySQL issues (CPU, memory, OS-level).
- Recommend and apply configuration and security improvements.
- Implement monitoring, alerting, and log retention (CloudWatch, uptime probes).
- Document findings and provide a clear handoff plan.

Short-term engagement with possible extension for ongoing monitoring and telemetry setup.

# Deliverables
- A root cause analysis identifying the sources of recent server instability
- Configuration updates and documentation of all changes made
- Optimized server setup with monitoring and alerts in place
- Recommendations for ongoing maintenance and scaling
```

## 2.4. Tags
WordPress
DevOps
Apache HTTP Server
MySQL
Amazon Lightsail
Linux System Administration
System Monitoring
Amazon CloudWatch
NGINX
Datadog

## 2.5. Questions
### 2.5.1.
Have you diagnosed or stabilized a production WordPress instance running on AWS Lightsail or EC2 before? 
Briefly describe what you found and how you fixed it.

### 2.5.2.
What monitoring and alerting stack do you typically recommend for small production environments?

### 2.5.3.
What’s your approach to finding the root cause of recurring Apache/MySQL downtime?

# 5. Информация о `ꆜ`
## 5.1. Местоположение
United States

## 5.2. Характеристики компании
### 5.2.1. Сектор экономики
неизвестно

### 5.2.2. Количество сотрудников
неизвестно

## 5.3. Характеристики учётной записи на `UW`
### 5.3.1. Member since
Oct 11, 2025
### 5.3.2. Hire rate (%)
0
### 5.3.3. Количество опубликованных проектов (jobs posted)
1
### 5.3.4. Total spent (USD)
0
### 5.3.5. Количество оплаченных часов в почасовых проектах
STUB
### 5.3.6. Средняя почасовая ставка (USD)
0

# 6.
`P†` ≔†
```
Проблема, о которой `ꆜ` пишет в `PD`:
~~~
The site has had intermittent downtime and performance issues
~~~
```

# 7.
## 7.1.
`Q2⁎` ≔ (Вопрос `ꆜ` §2.5.2)

## 7.2.
`Q3⁎` ≔ (Вопрос `ꆜ` §2.5.3)

# 8
## 8.1.
`Cᛘ⠿` ≔ ⠿~ (Возможные причины `P†`)

## 8.2.
`Cᛘᵢ` : `Cᛘ⠿`

## 8.3.
? `Cᛘᵢ`

# 9.  Анализ `Cᛘ⠿` 

## 9.1. Cᛘ₁: Исчерпание квоты производительности ЦП (CPU Burst Capacity)

### Суть
Инстансы AWS Lightsail функционируют на основе модели взрывной производительности (Burstable Performance).
Эта модель предоставляет низкий базовый уровень производительности ЦП с возможностью временного его превышения за счет накопленных кредитов (CPU Burst Capacity).
Если нагрузка на ЦП превышает базовый уровень, кредиты расходуются.
Когда кредиты исчерпаны, производительность ЦП принудительно ограничивается базовым уровнем (например, 10-30% от полной мощности vCPU).
Это ограничение (throttling) приводит к резкому замедлению обработки запросов или полной недоступности сайта.

### Оценка
90

### Доводы за
Характер проблемы, описанный как «периодический» (intermittent), идеально соответствует циклу исчерпания кредитов под нагрузкой и их медленного восстановления в простое.
Это самая распространенная причина внезапного падения производительности на инстансах Lightsail и EC2 T-серии.
Документация AWS подтверждает, что исчерпание кредитов приводит к деградации производительности (Source 2.2).
Базового уровня производительности часто недостаточно для обслуживания производственного сайта WordPress под нагрузкой, особенно при выполнении фоновых задач или обработке пикового трафика.

### Доводы против
Исчерпание кредитов является симптомом высокого использования ЦП, а не его первопричиной, которая может заключаться в неэффективном коде или внешних атаках.
Если фактическое использование ЦП сайтом всегда ниже базового порога, эта гипотеза неверна.

## 9.2. Cᛘ₂: Нехватка оперативной памяти и активация OOM Killer

### Суть
Стек приложений (Apache, MySQL, PHP) потребляет оперативную память (RAM) для своей работы и обработки запросов.
Если совокупное потребление памяти превышает доступный объем физической RAM, операционная система начинает использовать дисковое пространство подкачки (Swap).
Интенсивное использование Swap (thrashing) резко снижает производительность из-за медленных операций дискового ввода-вывода.
Если физическая память и Swap исчерпаны, ядро Linux активирует механизм OOM (Out-Of-Memory) Killer.
OOM Killer принудительно завершает критические процессы (часто MySQL или Apache) для освобождения памяти, вызывая полный простой сайта (Source 1.3).

### Оценка
85

### Доводы за
Инстансы Lightsail, особенно на младших тарифах, имеют ограниченный объем RAM (например, 1GB или 2GB), которого часто недостаточно для стека LAMP под нагрузкой (Source 1.2, 1.3).
WordPress, особенно с большим количеством плагинов, может потреблять значительный объем памяти (Source 1.4).
Нехватка памяти является типичной причиной сбоев, таких как ошибка подключения к базе данных, когда процесс MySQL завершается (Source 1.1).
Клиент прямо указал на необходимость диагностики проблем с памятью на уровне ОС.

### Доводы против
Если бы памяти было критически недостаточно для базовой работы, проблемы могли бы быть постоянными, а не периодическими.
Периодический характер может указывать на то, что нехватка памяти возникает только во время пиков активности или из-за утечек памяти в приложениях.

## 9.3. Cᛘ₃: Неоптимальная конфигурация веб-сервера (Apache/PHP)

### Суть
Настройки веб-сервера Apache, управляющие количеством одновременных процессов, не соответствуют доступным ресурсам сервера.
Если параметр `MaxRequestWorkers` (или `MaxClients`) установлен слишком высоко, сервер может создать слишком много дочерних процессов под нагрузкой (Source 4.2).
Избыточное количество процессов приводит к чрезмерному потреблению оперативной памяти, усугубляя Cᛘ₂.
Если параметр установлен слишком низко, сервер не сможет обработать входящий трафик, что приведет к отказу в обслуживании.

### Оценка
80

### Доводы за
Стандартные конфигурации Apache (особенно с `mod_php`) часто потребляют слишком много памяти для небольших серверов и могут быстро привести к OOM ошибкам (Source 4.3).
Настройка баланса между параллелизмом и потреблением памяти критически важна на серверах с ограниченными ресурсами (Source 4.1).
Если сервер начинает использовать Swap из-за слишком высокого `MaxRequestWorkers`, это убивает производительность (Source 4.1).
Клиент прямо указал диагностику Apache и PHP как одну из задач.

### Доводы против
Эта проблема чаще является фактором, способствующим исчерпанию ресурсов (Cᛘ₂), чем самостоятельной первопричиной.
Стандартные образы в Lightsail (например, от Bitnami) обычно имеют предварительно настроенную конфигурацию, хотя она может быть не идеальной для конкретного сайта.

## 9.4. Cᛘ₄: Вредоносный трафик и боты (Brute-Force, XML-RPC, DDoS)

### Суть
Автоматизированные атаки и агрессивные боты создают чрезмерную нагрузку на сервер, потребляя ресурсы CPU и памяти и вызывая отказ в обслуживании.
Основные векторы атак на WordPress включают попытки подбора паролей к `wp-login.php` и атаки через интерфейс `xmlrpc.php`.

### Оценка
75

### Доводы за
WordPress является частой целью для автоматизированных атак.
Атаки на `xmlrpc.php` позволяют использовать функцию `system.multicall` для проверки сотен паролей в одном HTTP-запросе, что значительно увеличивает нагрузку и эффективность атаки (Source 5.2).
Атаки могут использовать функцию Pingback для проведения DDoS-атак, перегружая сервер запросами (Source 5.2, 5.3).
Периодический характер проблемы хорошо соответствует паттернам атак или активности ботов.
Даже не очень интенсивные атаки могут перегрузить небольшой инстанс Lightsail.

### Доводы против
Использование эффективных плагинов безопасности или внешнего WAF (например, Cloudflare) может блокировать большинство таких атак.
Проблема может быть вызвана легитимным трафиком, который сервер не в состоянии обработать.

## 9.5. Cᛘ₅: Отсутствие или неправильная настройка кэширования

### Суть
WordPress динамически генерирует страницы при каждом посещении, что требует выполнения PHP-кода и запросов к базе данных.
Отсутствие эффективных механизмов кэширования (кэширование страниц, объектов) приводит к тому, что сервер выполняет избыточную работу для обслуживания идентичного контента (Source 6.1).
Это значительно увеличивает потребление CPU и RAM на каждый запрос и снижает максимальную пропускную способность сайта.

### Оценка
70

### Доводы за
Правильное кэширование страниц значительно снижает нагрузку на бэкенд (PHP и MySQL) и уменьшает время загрузки (Source 6.1).
Кэширование снижает нагрузку на сервер, так как ему не нужно обрабатывать каждый запрос индивидуально (Source 6.2).
Высокая нагрузка из-за отсутствия кэширования может быстро привести к исчерпанию кредитов CPU (Cᛘ₁) или памяти (Cᛘ₂).

### Доводы против
Кэширование страниц не помогает, если узким местом является обработка некэшируемых запросов (например, панель администратора, оформление заказа в электронной коммерции).
Кэширование может маскировать основные проблемы неэффективности кода, не устраняя их.

## 9.6. Cᛘ₆: Неэффективность на уровне базы данных (MySQL)

### Суть
Неоптимальная конфигурация MySQL (например, слишком маленький размер буферного пула `innodb_buffer_pool_size`) приводит к частым операциям чтения с диска вместо оперативной памяти.
Плохо закодированные или ресурсоемкие плагины могут генерировать медленные SQL-запросы.
Медленные запросы потребляют ресурсы CPU, могут вызывать блокировки таблиц и приводить к накоплению очереди запросов на веб-сервере.

### Оценка
65

### Доводы за
Сложные плагины WordPress часто генерируют тяжелые SQL-запросы, которые могут потреблять много RAM (Source 1.4).
Конфигурация MySQL по умолчанию может не подходить для производственной нагрузки и требовать настройки для работы с ограниченной памятью.
Фоновые задачи (WP-Cron), выполняемые плагинами, могут создавать интенсивную периодическую нагрузку на базу данных.
Клиент прямо указал диагностику MySQL как одну из задач.

### Доводы против
Проблемы с базой данных чаще проявляются в виде медленной загрузки страниц, а не в виде полного простоя всего сервера.
Сбой MySQL часто является следствием общей нехватки памяти (Cᛘ₂), а не первопричиной.

## 9.7. Вердикт

Проблема (`P†`) с высокой вероятностью вызвана фундаментальной нехваткой ресурсов на инстансе AWS Lightsail для обработки возникающей нагрузки.

Наиболее вероятными механизмами отказа являются ограничения инфраструктуры AWS, специфичные для Lightsail.

Это проявляется через исчерпание квоты производительности ЦП (Cᛘ₁) и нехватку оперативной памяти (Cᛘ₂).

Периодические простои возникают, когда нагрузка (легитимный трафик, фоновые задачи или атаки) превышает возможности сервера.

Это приводит либо к дросселированию ЦП после исчерпания кредитов (Cᛘ₁), либо к активации OOM Killer из-за исчерпания памяти (Cᛘ₂).

Эти базовые ограничения усугубляются неоптимальной конфигурацией веб-сервера (Cᛘ₃), которая может позволять создавать слишком много процессов, ускоряя исчерпание памяти.

Внешние факторы (Cᛘ₄) и отсутствие оптимизации, такой как кэширование (Cᛘ₅) или настройка базы данных (Cᛘ₆), увеличивают базовую нагрузку и провоцируют достижение лимитов ресурсов.

Для определения точной причины необходимо начать с мониторинга метрик CPU Burst Capacity, использования RAM и Swap, а также анализа конфигурации Apache/MySQL и логов доступа.


 
~~~~~~

# 4. `T.md`
~~~~~~markdown
# 1.
## 1.1.
`M-Q2ᚖ⠿` ≔ ⠿~ (Способы решения `Q2⁎`)

## 1.2.
`M-Q2ᚖᵢ` : `M-Q2ᚖ⠿`

# 2. `᛭T`
Действуй пошагово
## 2.1.
Найди `M-Q2ᚖ⠿`.
## 2.2.
Проанализируй `M-Q2ᚖ⠿`.
Для этого для каждого  `M-Q2ᚖᵢ` выяви:
### 2.2.1.
Его недостатки
### 2.2.2. 
Его достоинства
## 2.3.
Дай оценку каждому `M-Q2ᚖᵢ` по шкале от 0 до 100.
## 2.4.
Выскажи свой вердикт.

# 3. Требования к источникам информации / Общие
## 3.1.
В своём анализе используй источники информации на английском языке:
- официальную документацию
- опыт реальных пользователей
- другие авторитетные источники информации.

# 4. Требования к источникам информации / При анализе юридических вопросов
## 4.1.
В своём анализе используй официальные юридические источники информации.

## 4.2.
В своём ответе сошлись на конкретные пункты конкретных нормативных актов, с конкретными цитатами из них.
Цитаты давай как в оригинальном варианте (как они записаны в нормативном акте), так и в своём переводе.

# 5. Требования к процессу анализа
## 5.1.
Не решай задачи, не относящиеся к `᛭T`.
## 5.2.
Обязательно используй свой режим «Deep Research».
Твой ответ без режима «Deep Research» — гарантированно неверный.
## 5.3.
Очень осторожно относись в своём анализе к мнению `ꆜ`: оно может быть ошибочно. 

# 6. Требования к ответу / Общее
## 6.1.
Уже известную мне информацию не пересказывай.

## 6.2.
Свой ответ дай на русском языке. 

# 7. Требования к ответу / Форматирование
## 7.1.
Каждый `M-Q2ᚖᵢ` оформляй посредством Markdown как раздел (`M-Q2ᚖᵢ-S`) 2-го уровня (`##`).
## 7.2.
Внутри `M-Q2ᚖᵢ-S` должны присутствовать следующие подразделы (`M-Q2ᚖᵢ-S2⠿`), оформленные посредством Markdown как разделы 3-го уровня (`###`):
7.2.1) Суть
7.2.2) Оценка (§2.3)
7.2.3) Достоинства (§2.2.2)
7.2.4) Недостатки (§2.2.1)
## 7.3.
### 7.3.1
Каждый абзац `M-Q2ᚖᵢ` должен содержать ровно одно предложение.
### 7.3.2
Между абзацами `M-Q2ᚖᵢ` не должно оставаться пустых строк.

~~~~~~
Ниже приведён пример пошаговой инструкции для настройки выгрузки файлов с заказами из NetSuite по SFTP в 3PL.

1) Убедиться, что в NetSuite включены необходимые функции.  
   В разделе «Setup» → «Company» → «Enable Features» на вкладке «SuiteCloud» необходимо активировать опцию «SuiteScript (Server SuiteScript)», а также при необходимости проверить, доступна ли интеграция с SFTP.

2) Создать Saved Search для отбора заказов, которые нужно выгружать.  
   В разделе «Lists» → «Search» → «Saved Searches» → «New» → «Saved Search» (например, тип «Transaction») настроить критерии поиска, чтобы выбирать только нужные заказы (по статусу, дате или другим параметрам).  
   Сохранить Saved Search и при необходимости указать нужные поля вывода (например, номера заказов, даты, суммы и т. д.).

3) Создать файл SuiteScript 2.0 для автоматизации выгрузки данных.  
   Например, `ExportOrdersTo3PL.js`. В этом файле использовать модуль `N/search` для выполнения Saved Search, формировать содержимое файла (CSV, XML или иной формат) и далее использовать модуль `N/sftp` для подключения к SFTP-серверу 3PL.

   Примерная структура кода (упрощённо):  
   1. Импортировать модули `N/search`, `N/record`, `N/sftp`, `N/file`, и при необходимости другие.  
   2. Выполнить Saved Search, получить нужные данные заказов.  
   3. Сформировать строку или массив строк для CSV/XML.  
   4. Создать объект файла через `N/file.create({...})`.  
   5. С помощью `N/sftp` установить соединение c SFTP (адрес, порт, логин, ключ или пароль).  
   6. Разместить файл на удалённом сервере 3PL.

4) Сохранить файл скрипта в File Cabinet.  
   В разделе «Customization» → «Scripts» → «Scripts» нажать «New Script» и загрузить файл `ExportOrdersTo3PL.js` в File Cabinet.  
   Заполнить поля Name, ID скрипта, выбрать тип скрипта (Map/Reduce Script или Scheduled Script) и сохранить запись.

5) Создать Script Deployment для данного скрипта.  
   В разделе «Customization» → «Scripts» → «Script Deployments» нажать «New Deployment».  
   Указать следующий набор параметров:  
   • Script (указать загруженный скрипт).  
   • Title (например, Export Orders To 3PL).  
   • ID развертывания (Deployment ID).  
   • Режим запуска (например, Scheduled для регулярного запуска).  
   • График запуска (Schedule).  
   • В случае Map/Reduce Script указать количество потоков (Concurrency) и т. д.

6) Настроить расписание выполнения (Schedule).  
   В форме Script Deployment на вкладке «Schedule» указать, как часто нужно выгружать файлы (например, раз в час, раз в сутки).  
   Это позволит NetSuite автоматически выполнять скрипт, который будет формировать файл с заказами и отправлять его по SFTP на сервер 3PL.

7) Указать реквизиты подключения к SFTP внутри скрипта.  
   В коде SuiteScript 2.0 (модуль `N/sftp`) указать:  
   • хост (Host Key),  
   • порт,  
   • логин и пароль (или ключи),  
   • удалённую директорию на SFTP,  
   чтобы выгружаемый файл попадал в нужную папку 3PL.

8) Реализовать журналирование (logging) и обработку ошибок.  
   В коде скрипта рекомендуется использовать функции логирования (Log) для записи информации о ходе выполнения, а также обрабатывать возможные ошибки (например, не удалось подключиться к SFTP, ошибка при создании файла и т. д.) с помощью конструкции try...catch.

9) Протестировать скрипт перед запуском в боевом режиме.  
   Выполнить единичный запуск (через «Save and Execute» или «Execute Now» в Script Deployment) и проверить, что файл с заказами успешно формируется и появляется в нужной папке на SFTP-сервере 3PL.

10) Документировать конфигурацию.  
   Сделать краткое описание используемой Saved Search, настроек Script Deployment, расписания (Schedule) и параметров SFTP-подключения, чтобы в дальнейшем при необходимости обновлять или изменять данную интеграцию.

Таким образом, NetSuite будет автоматически формировать файлы с заказами в соответствии с заданным расписанием и выгружать их на SFTP-сервер 3PL для дальнейшей обработки.
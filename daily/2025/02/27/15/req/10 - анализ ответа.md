## 1.
Клиент хочет выполнить следующий проект:
### 1.1. Title
Dynamics 365 Sales & Business Central Migration Assistance – Consulting & Implementation

### 1.2. Description
Project Overview:
We are migrating from Salesforce to Dynamics 365 Sales and Business Central. 
Our team is handling most of the migration in-house, but we need an experienced Dynamics 365 consultant to assist with specific technical aspects and provide best practices guidance.
---
Key Tasks & Requirements:
1. Lead Filtering & Data Migration Strategy
Help limit which leads are sent to Sales 365 based on account number format, ensuring correct division or customer group assignment.
Potentially create a custom field called “account type” for filtering.
Advise on best practices for migrating relevant leads while avoiding unnecessary data clutter.
2. Business Central Data Visibility in Sales 365
Ensure that inventory, product pricing, customer purchase history (YTD amount), and status indicators (past due, credit hold, etc.) are accessible in Sales 365.
Guide us on best practices for syncing this data efficiently.
3. Dealer & Customer Record Matching
We have both dealers and customers in Salesforce, which need to be properly mapped and synced between Business Central and Sales 365.
Provide consultation on the best approach to align records across both systems.
4. Custom Fields & Data Mapping
Assist with creating and mapping custom fields to match our current Salesforce setup.
5. Recreating Email Merge Templates
Help us recreate email templates in Sales 365 that we currently use in Salesforce.
Ensure smooth integration with Dynamics 365’s email and automation features.
Ideal Candidate:
- Experienced in Dynamics 365 Sales & Business Central, with hands-on knowledge of data migration and integrations.
- Strong understanding of lead management, customer segmentation, and data filtering in Dynamics 365.
- Ability to recommend best practices for setting up CRM and ERP synchronization.
- Familiarity with Salesforce data structures (preferred but not required).
- Experience with email templates and automation within Dynamics 365.
- Must be available for at least half of the US working day to ensure timely communication and collaboration.
- High English proficiency – Must be able to understand our needs clearly, even if we don’t explain them perfectly.
- Excellent communication skills – We value clear, concise communication and responsiveness.
- Prefers async communication – Most interactions will be through Slack or Upwork messaging, limiting unnecessary meetings and calls.
Project Scope & Engagement:
Part-time, flexible support as needed throughout the migration process.
Work closely with our internal team to guide, implement, and troubleshoot.
Some tasks will be hands-on work, while others will be consulting and advising.
If you have experience in Dynamics 365 migrations, CRM/ERP integrations, and data mapping, please apply.  
Please include:
- A brief summary of your relevant experience.
- Examples of similar projects you’ve worked on.
- Your availability and preferred hourly rate.

### 1.3. Местоположение клиента
United States
Chanhassen

### 1.4. Tags
Business Applications Consultation
Business Applications Development
Microsoft Dynamics 365
Microsoft Dynamics CRM
Microsoft Business Central
Salesforce

## 2. Мой ответ клиенту
Я хочу ответить клиенту так:
~~~
1) To filter leads on Salesforce export, I recommend a «Formula Field», e.g.: `IF(BEGINS(<account number> , "DLR-" ), "Dealer", "Customer")`.
При этом надо учесть, что в стандартной комплектации Salesforce поле `AccountNumber` принадлежит объекту `Account`, а не `Lead`: другими словами, он не хранится на этапе лидов и появляется уже после конвертации leads в accounts.
Если необходимо фильтровать именно на стадии Lead, следует сначала создать и заполнять кастомное поле на объекте Lead (например, `Custom_AccountNumber__c`: тогда формула будет проверять именно это поле), либо перенести фильтрацию на этап Account после конвертации.
2) У Business Central (`BC`) и Dynamics 365 Sales (`S`) есть встроенная синхронизация (через «Connection Setup» в `BC` и Dataverse-коннектор, а также через «Integration Table Mappings» в `BC`).
Встроенная синхронизация может быть точкой старта: часть стандартных полей уже синхронизируется автоматически (Products ↔ Items, Accounts ↔ Customers). 
Однако встроенная синхронизация не реализует требования пунктов 2 и 3 вашего описания проекта.
Поэтому для реализации этих требований I recommend Microsoft Power Automate.
3) As an example, the inventory synchronization from `BC` to `S` with Power Automate can be set up as follows:
3.1) In `BC`, inventory data are stored in the `Items` table.
3.2) The current stock quantity (`Inventory`) can be obtained from the `Item Ledger Entries` table or aggregated data in the `Item` table.
3.3) Open «Business Central» → «Search» → «Web Services» and set up OData V4 or API endpoints.
E.g., an OData endpoint might look like: `https://api.businesscentral.dynamics.com/v2.0/{tenant-id}/{environment}/ODataV4/Company('YourCompany')/Items`.
3.4) В стандартном `S` (без дополнительных модулей типа Field Service или Supply Chain) поля для хранения «количества на складе» (Quantity on Hand / Available Inventory) нет. 
Сущность `Product` в `S` по умолчанию не содержит inventory-полей, поскольку управление складом и остатками относится скорее к ERP-системам (`BC`, Supply Chain Management и т.п.). 
Поэтому нужно create a custom field:
- Go to `Settings` → `Customizations` → `Customize the System`.
- Choose the `Product` entity → `Fields` → `New`.
- Create a field named `Available Inventory`, with data type `Whole Number`.
- Save and publish changes (`Publish All Customizations`).

3.5) В Power Automate надо настроить подключения к обеим системам: Business Central и Dynamics 365 Sales:
3.5.1) Войти в Power Automate через портал `make.powerautomate.com`.  
3.5.2) Перейти в раздел `Connections` и создать подключение к Business Central:  
- Выбрать коннектор `Microsoft Dynamics 365 Business Central`.  
- Указать учетные данные и среду (environment) Business Central.  
3.5.3) Создать подключение к Dynamics 365 Sales:  
- Выбрать коннектор `Microsoft Dataverse` (ранее Common Data Service), так как Sales 365 использует Dataverse.  
- Авторизоваться с учетной записью Dynamics 365. 

3.6) Создать поток (flow) в Microsoft Power Automate для регулярной передачи данных об остатках:
3.6.1) Настроить триггер: «Automated cloud flow» или «Scheduled cloud flow».
3.6.2) Добавить действие `Get rows` из коннектора `Microsoft Dynamics 365 Business Central`:  
- Указать таблицу `Items`.  
- При необходимости добавить фильтр в поле `OData filter`, например, `inventory gt 0`, чтобы получать только товары с положительным остатком.  
3.6.3) Добавить действие `List records` из коннектора `Microsoft Dataverse`:  
- Указать сущность `Products` в Sales 365.  
- Использовать фильтр для сопоставления товаров, например, по полю `Product Number`.  
3.6.4) Добавить действие `Update a record` из коннектора `Microsoft Dataverse`:  
- Указать сущность `Products`.  
- Сопоставить запись из Sales 365 с данными из Business Central по полю `Product Number` (соответствует `Item No.`).  
- Обновить поле `Available Inventory` значением из поля `Inventory` таблицы `Items`.  
3.6.5) Для новых товаров (если запись не найдена в `List records`) добавить действие `Create a new record`:  
- Указать сущность `Products`.  
- Заполнить обязательные поля: `Name`, `Product Number`, `Default Unit Group`,  `Default Price List`, а также `Available Inventory`.
3.6.6) Если вы планируете использовать продукты в «Opportunities» и «Quotes» (воронка продаж), нужно создать запись «Price List Item» для связывания продукта с нужным прайс-листом. 
Без этого продукт нельзя будет корректно добавлять в сделку или коммерческое предложение. 
При этом нужно обеспечить актуальность цены при будущем изменении (например, если в `BC` обновили стоимость товара): это можно сделать через Power Automate.
   
3.7) Настроить соответствие между полями Business Central и Sales 365 в действиях потока.
3.7.1) В действии `Update a record` или `Create a new record` указать:  
- `Product Number` = `Item No.` из Business Central.  
- `Name` = `Description` из Business Central (или другое поле с названием товара).  
- `Available Inventory` = `Inventory` из Business Central.  
3.7.2) Убедиться, что формат данных совпадает (например, `Inventory` как целое число).

3.8) Добавить шаги для обработки ошибок и отслеживания выполнения потока.
3.8.1) Включить `History` в настройках потока для просмотра логов выполнения (`Flow details` → `Run history`).  
3.8.2) Добавить действие `Send an email (V2)` из коннектора `Office 365 Outlook` в случае ошибки:  
- Использовать `Condition` для проверки статуса предыдущего действия (`Succeeded` или `Failed`).  
- Если `Failed`, отправить уведомление администратору с описанием ошибки.  

3.9) Протестировать поток и развернуть его в рабочей среде:

3.9.1) Выполнить тестовый запуск потока в Power Automate: нажать `Test` → `Manually` и проверить обновление нескольких записей в Sales 365.  
3.9.2) Проверить в Sales 365 корректность данных в сущности `Products`: открыть раздел `Sales` → `Products` и убедиться, что поле `Available Inventory` заполнено актуальными значениями из Business Central.  
3.9.3) После успешного тестирования активировать поток: переключить статус в `On` в интерфейсе Power Automate.  

4)
4.1) В большинстве случаев «dealers» и «customers» в Business Central могут храниться в таблице `Customer`, но с разными значениями в поле «Customer Posting Group» или ином поле, помогающем отличать дилера от конечного покупателя.  
4.2) Если в Business Central необходимо использовать разные типы записей для «dealers» и «customers», возможно создание дополнительного пользовательского поля (например, `AccountType`) или применение стандартного поля (например, `Customer Disc. Group`) для различия категорий.  

5) 
5.1) В Sales 365 определить, следует ли использовать одну сущность «Account» для хранения и «dealers», и «customers», или же нужны отдельные сущности (если бизнес-процесс предусматривает раздельный учёт).  
5.2) Если планируется единая сущность «Account» с разным признаком (например, поле `Account Type`), создать или настроить это поле через «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  

6) Передачу dealers и customers из Salesforce в Business Central и Sales 365 можно сделать 2 способами:
6.1) Посредством Power Automate (аналогично пункту 3 выше)
6.2) Экспортом данных из Salesforce в формате CSV.
6.2.1) Sales 365 поддерживает импорт CSV.
6.2.2) Business Central поддерживает импорт Excel через «RapidStart Services».
Для этого экспортированный файл CSV надо перевести в формат Excel.  

7) Регулярную синхронизации dealers и customers между Business Central и Sales 365 рекомендую делать через Power Automate (аналогично пункту 3 выше).

8) Mapping полей в Sales 365 в соответствии с текущим набором полей в Salesforce делается так:
8.1) Открыть «Settings» → «Advanced Settings» (в верхнем меню) → «Customizations» → «Customize the System».  
8.2) В списке «Entities» выбрать цель (например, «Account», «Lead», «Opportunity»), где требуется создать поля, соответствующие Salesforce.  
8.3) Перейти в «Fields», нажать «New».  
8.4) Повторить параметры из Salesforce:  
- Тип поля (Text, Two Options, Option Set, Date, Currency и т. д.).  
- Название поля (Display Name) и логическое имя (Name).  
- При необходимости создать набор значений (Option Set), чтобы он совпадал с Picklist в Salesforce.  
8.5) Сохранить и опубликовать изменения (кнопка «Publish All Customizations»).

9) Перенос шаблонов писем из Salesforce в Sales 365 делается так:
9.1) Составить список всех merge fields, используемых в шаблонах Salesforce. 
9.2) Выполнить mapping этих merge fields в Sales 365 (пункт 8 выше). 
9.3) Настроить «Email Templates» в Sales 365 («Settings» → «Templates» → «Email Templates»).
Учтите, что в `S` есть два типа email-шаблонов:
- Organization (system) templates — глобальные, доступные всем пользователям.
- Personal templates — личные, привязанные к конкретному пользователю.   
Если в Salesforce у вас были общие (org-wide) и личные шаблоны, при переносе в `S` 
придётся решить, какие шаблоны делать системными (видны всем) и какие личными 
(видны только владельцу).
Соответственно, в Power Automate и при ручном использовании необходимо учитывать, к какому типу шаблонов вы обращаетесь.
9.4) В Sales 365 при создании или редактировании шаблона при нажатии на «Insert/Update» (или похожую команду) появляется возможность выбрать поля из сущностей (например, из сущности «Contact», «Account», «Lead»).  
Вставить поля, соответствующие прежним полям из Salesforce.
9.5) Если требуется автоматическая рассылка писем по триггеру (аналог «Workflow rules» и «Process Builder» в Salesforce), использовать инструменты Sales 365 и Power Automate:  
9.5.1) Открыть «Power Automate» (maker.powerautomate.com) → «Create» → «Automated cloud flow» (или «Scheduled cloud flow»).  
9.5.2) Добавить триггер (например, «When a record is created» в сущности «Lead»).  
9.5.3) В шаге отправки письма («Perform a bound action (SendEmail)»(или «Send Dynamics 365 Email» из коннектора Dataverse), выбрать созданный «Email Template» из Sales 365 и подставить нужные поля из Dataverse.
~~~

## 3. Твоя задача
Есть ли в моём ответе фактические ошибки?
Есть ли в моём ответе логические ошибки?
Упустил ли я в ответе нечто важное?


1) Caching plugins (WP Rocket, W3 Total Cache, LiteSpeed Cache, etc.) can cache the content of `header.php`.  
2) Using full page cache for logged-in users or on checkout pages can often cause your problem.
3) The website may be using a CDN (e.g. Cloudflare).
If configured incorrectly, the CDN may even cache dynamic parameters and return the old page that does not contain the current order status or the necessary scripts.
3.1) Some optimizations (JS compression, asynchronous loading) may be enabled in Cloudflare, which can break the order of script execution, causing `dataLayer.push` to be triggered late or not at all. 
4) Modern blockers (uBlock Origin, AdGuard, Brave Shields, etc.) do not always compare only the hostname.
They can analyze:
- The URL pattern (for example, `*/gtag/js` or `*/collect`).
- The structure of the request (Google Analytics Measurement Protocol).
- The destination domain (even if it is not `google-analytics.com`, but inside the packet, it is clear that data is being forwarded there).
AAs a result, some traffic will still be blocked — either at the browser filtering level or by an extension that looks at where the traffic is actually going. 
5) On iOS, Safari has built-in restrictions (ITP), Firefox has Enhanced Tracking Protection, and Brave has Shields, all of which can limit or completely disable third-party trackers. 
6) Safari ITP (Intelligent Tracking Prevention) reduces the lifetime of cookies: if a cookie is set by a third party (such as Google), Safari can quickly delete or reset it.
It can also block scripts, especially if they are detected as tracking scripts.  
7) Brave Shields blocks many advertising and analytics domains (including Google Analytics) by default.
Even if you use a subdomain proxy, Brave sometimes detects that data is being sent to GA. 
8) Firefox's Enhanced Tracking Protection blocks tracker scripts on its list.
If the user has strict mode enabled, blocking may occur.
9) The absence or truncation of cookies can lead to incorrect attribution, and sometimes GA4 can merge several transactions from one user into a single transaction (if the correct `client_id` / `user_id` is missing), or, on the contrary, fail to record the purchase if the GA4 tag is initialized incorrectly. 
10) Some orders can be placed using other scenarios that you may not have considered in your setup.
For example, the user may be using a third party payment gateway that redirects to a different page instead of the standard WooCommerce «thank you» page. 
11) Sometimes the tag fires (or tries to fire) before the required data has time to appear in the data layer.
For example, the code that pushes the purchase data is loaded asynchronously and runs with a slight delay, while the trigger has already fired.
12) In GA4 and GTM, the purchase event typically has the keyword `purchase`, but in reality, it may have a different name.
If the GTM trigger is set to respond specifically to `purchase`, but the push is sent with a different name, the GA4 tag will not fire.
13) Even if the trigger fires, there may be errors in the tag itself that cause data not to be sent or to be sent with incorrect parameters.
It is necessary to check the error reports in the Chrome console («F12» → «Console») during the purchase. 
14) If the purchase event appears in GA4 DebugView, but there is no transaction information (no prices, items, etc.), then it is possible that the push structure does not match the required format, and GA4 is not capturing the necessary data.
15) Some WooCommerce analytics plugins automatically add their own structure to the dataLayer (in the old Universal Analytics format or with custom keys).
This may conflict with your custom implementation or overwrite the correct data with their own structure. 
16) Some consent management solutions completely block the loading of gtag.js or Google Tag Manager until the user clicks «Accept».
17) In GA4, in addition to event parameters, the «Client ID» (or «User ID») is important for linking user actions and conversions.
If this identifier is reset during anonymization, GA4 may record the purchase event in a vacuum or not record it at all (depending on the settings).
Additionally, there may be attribution issues if GA4 sees the purchase as «Direct / none» because the identifier was reset. 
18) When using a subdomain, for example, `gtm.example.com` or `analytics.example.com`, it is not only necessary to configure the proxy but also to correctly replace the URLs in the code itself.   
19) When using the proxy, requests may be processed more slowly.
If the GA4 tag is fired at the moment of order confirmation («thank you» page), but the user quickly closes the tab or goes to another page, the request to the proxy server may not be completed.
---
I have completed 534 projects here on Upwork.
My GitHub profile: https://github.com/dmitrii-fediuk
My websites: https://df.tips?order=views, https://dmitry.ai?order=views, https://mage2.pro?order=views 
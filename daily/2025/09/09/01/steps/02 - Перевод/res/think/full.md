https://g.co/gemini/share/049ccddaa507

### 2.1. `Ss` (Возможные причины `P†`)

Ошибка "Invalid customform reference key [ID]" возникает, когда система пытается загрузить или сохранить транзакцию, используя указанный ID пользовательской формы, но эта форма недоступна или недействительна в текущем контексте.

Я выявил следующие возможные причины (`Ss`):

*   **S1**: **Деактивация или удаление формы.** Форма с Internal ID 62 была помечена как неактивная (Inactive) или удалена.
*   **S2**: **Ограничения доступа на уровне роли.** Роль пользователя, создающего PO, не имеет разрешения на доступ к форме 62 (настройка на вкладке Roles в определении формы).
*   **S3**: **Несоответствие типа транзакции.** Форма 62 существует, но не является формой типа "Purchase Order" (например, это форма "Sales Order").
*   **S4**: **Вмешательство скрипта (SuiteScript) или Workflow.** Автоматизация принудительно устанавливает значение поля `customform` равным 62.
*   **S5**: **Устаревшие предпочтения (Preferred Form).** Форма 62 установлена как предпочтительная для роли, пользователя или поставщика (Vendor record), но стала недействительной.
*   **S6**: **Несоответствие ID между средами.** Скрипт или конфигурация были перенесены из Sandbox в Production с жестко закодированным ID 62, который недействителен в Production.

### 2.2. и 2.3. Анализ и Оценка Правдоподобности

| Si | Оценка | Доводы за | Доводы против |
| :--- | :--- | :--- | :--- |
| **S1** | 80 | Это самая прямая интерпретация ошибки. Если запись неактивна, ссылка на неё недействительна. Объясняет "внезапное" появление проблемы, если деактивация произошла недавно. | Если форма не устанавливается принудительно (через S4/S5), NetSuite часто может автоматически использовать другую доступную форму вместо критической ошибки. |
| **S2** | 60 | Изменения в разрешениях ролей — частая административная задача. Если доступ был недавно ограничен, пользователи потеряют возможность использовать форму. | Ошибки разрешений иногда проявляются как "Permission Violation". Если ошибка возникает глобально, маловероятно, что проблема связана с одной конкретной ролью (если не изменена базовая роль). Скрипты, выполняющиеся как Admin, игнорируют эти ограничения. |
| **S3** | 50 | Возможно, если скрипт (S4) содержит ошибку и использует ID формы другого типа, или если произошла ошибка при миграции (S6). | Стандартные настройки предпочтений (S5) не позволяют выбрать форму неверного типа. Маловероятно, что тип существующей формы изменился внезапно. |
| **S4** | 90 | Соответствует подозрению клиента (`ꆜ`). Скрипты и Workflows часто используются для динамического выбора форм и приводят к "жестким" ошибкам, останавливающим транзакцию. Если автоматизация пытается установить форму, ставшую недействительной (по причинам S1, S2, S3), возникает именно эта ошибка. | Если скрипты гарантированно не менялись, S4 является лишь механизмом проявления проблемы конфигурации (например, S1). |
| **S5** | 75 | Если форма была предпочтительной, а затем деактивирована (S1) или ограничена (S2), система выдаст ошибку при попытке её загрузить по умолчанию для пользователя или поставщика. | Является механизмом проявления проблемы (как и S4), а не первопричиной недействительности самой формы. |
| **S6** | 65 | Хорошо объясняет "внезапное" появление ошибки, если оно совпало с недавним развертыванием (deployment). Жестко закодированные ID в скриптах (S4) — частая проблема при миграции. | Применимо только в том случае, если недавно проводилось развёртывание между средами (Sandbox/Production). |

### 2.4. Вердикт

Наиболее вероятный сценарий представляет собой комбинацию факторов, где один является триггером, а другой — первопричиной изменения конфигурации.

Ошибка указывает на то, что система настаивает на использовании формы с ID 62. Это происходит с высокой вероятностью (90/100) из-за вмешательства **скрипта или Workflow (S4)**, что подтверждается подозрением клиента, или из-за настроек **предпочтительной формы (S5)** (75/100).

Причина, по которой ID 62 *внезапно* стал недействительным, скорее всего, заключается в том, что соответствующая форма была недавно **деактивирована (S1)** (80/100) или её доступ был ограничен (S2).

Таким образом, наиболее вероятное объяснение: автоматизация (S4) или настройки по умолчанию (S5) пытаются использовать форму, которая более не является активной или доступной в текущем контексте (S1/S2).
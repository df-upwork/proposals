

# **Технический анализ и рекомендации по реализации широковещательных Push-уведомлений**

## **Введение: Постановка задачи широковещательных уведомлений (T)**

Целью настоящего отчета является предоставление исчерпывающего технического анализа и выработка окончательной рекомендации по реализации серверной функции широковещательных push-уведомлений. Текущая инфраструктура клиента (C) основана на стеке Node.js, TypeScript и Docker, с существующей интеграцией Firebase Cloud Messaging (FCM).

Ключевая дилемма, стоящая перед проектом, представляет собой классический архитектурный выбор между «создавать» (Build) и «покупать» (Buy). Это решение имеет долгосрочные последствия для инженерных затрат, операционных накладных расходов и скорости вывода новых функций на рынок.

* **Путь «Создавать» (Build):** Использование и расширение существующей инфраструктуры Firebase Cloud Messaging (FCM). Этот путь предлагает отсутствие прямых финансовых затрат, но влечет за собой значительные расходы на разработку и последующее обслуживание.  
* **Путь «Покупать» (Buy):** Миграция на специализированную управляемую платформу для взаимодействия с клиентами (Customer Engagement Platform). В соответствии с описанием проекта (PD), в качестве основного кандидата рассматривается OneSignal. Этот путь позволяет абстрагироваться от сложности и ускорить доставку функциональности ценой введения новой зависимости и потенциальных абонентских платежей.

Методология данного анализа заключается в детальном разборе трех конкретных технических стратегий:

1. Массовая рассылка через FCM Multicast Messaging.  
2. Массовая рассылка через FCM Topic Messaging.  
3. Массовая рассылка через сегменты OneSignal.

Каждая стратегия будет оценена по единому набору критериев: сложность реализации, масштабируемость и производительность, надежность и гарантии, набор функций и опыт разработчика (Developer Experience), накладные расходы на обслуживание и общая стоимость владения (Total Cost of Ownership, TCO).

## **Часть 1\. Анализ решений для широковещательной рассылки в экосистеме Firebase (путь «Создавать»)**

В данном разделе рассматриваются нативные возможности FCM, последовательно раскрывая инженерные сложности и операционные трудности, связанные с самостоятельным управлением решением для массовых рассылок.

### **1.1. Основополагающие концепции: Архитектура FCM для серверных операций**

Признается, что клиент C уже использует Firebase, что дает существенное преимущество. Предполагается, что необходимые предварительные условия — проект Firebase, интеграция клиентского SDK и метод сбора регистрационных токенов устройств — уже выполнены.1 Основное внимание уделяется исключительно серверной реализации с использованием пакета

firebase-admin для Node.js.1

Ключевые компоненты для серверной части:

* **Firebase Admin SDK:** Обязательный инструмент для аутентификации и отправки сообщений из доверенной серверной среды.1 Аутентификация осуществляется с помощью JSON-файла сервисного аккаунта, который должен храниться в безопасном месте.2  
* **Типы сообщений:** Необходимо различать сообщения типа Notification и Data. Notification сообщения обрабатываются SDK Firebase автоматически, когда приложение находится в фоновом режиме. Data сообщения, напротив, всегда доставляются в код клиентского приложения для обработки.1 Это различие влияет на логику, которую необходимо реализовать на стороне клиента. Максимальный размер полезной нагрузки для обоих типов сообщений составляет 4096 байт (4 КБ).6

### **1.2. Стратегия A: Широковещательная рассылка через Multicast Messaging**

Данная стратегия предполагает, что сервер извлекает списки регистрационных токенов устройств из базы данных и отправляет одну и ту же полезную нагрузку сообщения пакетами до 500 токенов за один API-вызов метода sendMulticast.5

#### **1.2.1. Требуемая серверная архитектура**

Реализация этого подхода требует создания значительной серверной инфраструктуры:

* **Хранение токенов:** Необходима надежная схема базы данных для хранения, обновления и инвалидации регистрационных токенов FCM для каждого устройства пользователя.3 Клиентское приложение должно передавать на сервер каждый новый или обновленный токен, который затем связывается с идентификатором пользователя. Система должна также обрабатывать случаи, когда токен становится недействительным.  
* **Логика «веерной» рассылки (Fan-Out):** Серверное приложение несет полную ответственность за процесс fan-out. Это включает в себя: запрос всей базы данных пользователей для получения их токенов, разделение огромного списка токенов на пакеты (чанки) по 500 штук и управление последовательным или параллельным выполнением запросов sendMulticast для каждого пакета.  
* **Обработка ошибок:** Ответ от sendMulticast содержит детальный статус успеха или неудачи для каждого токена в отправленном пакете.8 Это требует реализации сложной логики для обработки ошибок, повторных попыток для временных сбоев и, что критически важно, очистки базы данных от недействительных токенов (например, тех, для которых FCM возвращает ошибку  
  messaging/registration-token-not-registered).

#### **1.2.2. Анализ преимуществ**

* **Детальный контроль и обратная связь:** Этот метод обеспечивает детерминированный список получателей и статус доставки для каждого отдельного устройства. Это чрезвычайно ценно для важных транзакционных уведомлений, где подтверждение доставки является критичным.  
* **Прямая доставка:** Сообщения отправляются напрямую на устройства без промежуточного уровня подписки, что потенциально может обеспечить меньшую задержку по сравнению с темами, особенно для небольших и средних объемов рассылок.

#### **1.2.3. Анализ недостатков и ограничений масштабируемости**

* **Высокие инженерные затраты:** Вся логика fan-out, пакетирования, обработки ошибок и повторных попыток должна быть разработана и поддерживаться силами собственной инженерной команды. Это трудоемкая задача, требующая значительных временных затрат.  
* **Нагрузка на базу данных:** Широковещательная рассылка на большую аудиторию (например, миллионы пользователей) требует выполнения запроса ко всей таблице токенов, что может создать значительную, а иногда и пиковую, нагрузку на слой персистентности.  
* **Жесткое ограничение в 500 токенов:** Лимит в 500 токенов на один API-вызов 5 делает этот подход крайне неэффективным для крупномасштабных широковещательных рассылок. Отправка уведомления одному миллиону пользователей потребует совершения 2000 отдельных API-вызовов.

#### **1.2.4. Скрытая сложность: Управление скоростью запросов**

На первый взгляд, реализация может показаться простым циклом, отправляющим запросы. Однако производственная система сталкивается с более глубокой проблемой. В документации по масштабированию FCM прямо рекомендуется избегать «пиков трафика» и «наращивать трафик как можно более постепенно».10 Отправка 2000 API-запросов практически мгновенно является классическим примером такого пика, который может привести к временной блокировке или снижению пропускной способности со стороны FCM.

FCM использует систему квот «Token Bucket» (например, 600 000 запросов в минуту для HTTP v1 API) для управления нагрузкой.10 Хотя 2000 запросов находятся в пределах этой квоты, проблема заключается в

*скорости* их отправки. Следовательно, надежная реализация multicast-рассылки не может просто итерировать и отправлять запросы. Она требует внедрения сложной серверной системы очередей задач (например, с использованием Redis и BullMQ или аналогичных технологий) со встроенными механизмами ограничения скорости (rate-limiting). Эта система должна распределять 2000 вызовов на рекомендуемый промежуток времени (например, 60 секунд), чтобы избежать срабатывания серверного троттлинга FCM.10

Таким образом, стратегия multicast требует не только логики fan-out, но и сложной, отказоустойчивой системы управления асинхронными задачами. Это значительно увеличивает стоимость и сложность реализации, что не очевидно при поверхностном изучении документации API.

### **1.3. Стратегия B: Широковещательная рассылка через Topic Messaging**

Эта стратегия перекладывает сложный процесс fan-out на инфраструктуру Google.

* **На стороне клиента:** Клиентские приложения подписываются на общее, заранее известное имя темы (например, "all\_users" или "broadcasts").11 Эта подписка обычно выполняется один раз при первом запуске приложения.  
* **На стороне сервера:** Сервер отправляет одно единственное сообщение в FCM, указывая в качестве цели имя темы, а не список отдельных токенов.4 После этого FCM берет на себя ответственность за доставку этого сообщения всем устройствам, подписанным на данную тему.

#### **1.3.1. Анализ преимуществ**

* **Простота реализации:** Серверная логика становится тривиальной — один API-вызов для отправки сообщения миллионам пользователей. Это полностью соответствует требованию клиента реализовать функцию «прямо сейчас» (right now).  
* **Масштабируемость по умолчанию:** Инфраструктура FCM спроектирована для обработки fan-out по темам на миллионы и десятки миллионов подписчиков.12 Клиенту не нужно управлять списками токенов, реализовывать логику fan-out или беспокоиться о пакетной обработке.  
* **Экономическая эффективность:** Это наиболее эффективный способ использования FCM для массовых коммуникаций, так как он минимизирует количество API-запросов с сервера и, следовательно, нагрузку на собственную инфраструктуру.

#### **1.3.2. Анализ недостатков и ограничений масштабируемости**

* **Пропускная способность в ущерб задержке:** В документации прямо указано, что «рассылка по темам оптимизирована для пропускной способности, а не для задержки» (Topic messaging is optimized for throughput rather than latency).11 Это делает данный метод непригодным для срочных оповещений, где критична почти мгновенная доставка. Для таких случаев, как маркетинговые анонсы или общие новости, это может быть приемлемо.  
* **Отсутствие гарантий доставки:** Доставка сообщений осуществляется по принципу «best-effort» и не гарантируется.13 Не существует прямого механизма обратной связи для подтверждения того, что сообщение было доставлено на конкретное устройство в рамках темы. Аналитика по доставке отсутствует.  
* **Управление подписками:** Хотя сервер может управлять подписками программно 11, обычно это является обязанностью клиентской стороны. Это может привести к ситуациям, когда пользователь отписан, а сервер об этом не знает.  
* **Ограничения на скорость подписки:** Хотя тема может иметь неограниченное количество подписчиков, скорость *новых подписок* на уровне проекта ограничена (3000 QPS).11 Это не является проблемой для одной общей темы, такой как  
  "all\_users", но становится важным фактором, если архитектура предполагает использование множества тем.  
* **Безопасность:** Сообщения, отправляемые по темам, не должны содержать конфиденциальных данных, поскольку теоретически любой экземпляр клиентского приложения, зная имя темы, может на нее подписаться.15

#### **1.3.3. Тематические рассылки: «Достаточно хорошее», но потенциально рискованное решение**

Потребность клиента C в функции широковещательной рассылки является срочной. FCM Topics предлагает путь наименьшего сопротивления с точки зрения бэкенд-разработки; опытный разработчик может реализовать эту функциональность за несколько часов.

Однако в описании проекта (PD) не уточняется *характер* широковещательных рассылок. Являются ли они маркетинговыми объявлениями, для которых задержка в несколько минут приемлема, или это критические, чувствительные ко времени оповещения (например, о статусе заказа или экстренные новости)?

Документированный компромисс в виде потенциально высокой задержки 11 и отсутствия гарантий доставки 13 вносит значительный бизнес-риск. Если рассылки чувствительны ко времени, выбор Topics может привести к провалу функции (т.е. сообщения будут приходить слишком поздно, чтобы быть актуальными). Более того, явное упоминание клиентом возможности перехода на OneSignal говорит о том, что он ищет надежное решение профессионального уровня, а не просто самый быстрый способ.

Рекомендовать Topics как «лучшее» решение было бы недальновидно. Это самое *быстрое* нативное решение, но оно сопряжено со значительными операционными оговорками (задержка, надежность, отсутствие аналитики), которые могут не соответствовать неявным стандартам качества бизнеса. Это тактический короткий путь, а не стратегическое решение.

### **1.4. Прямое сравнение: Multicast против Topics для широковещательных рассылок**

Для наглядности, результаты анализа двух нативных стратегий FCM сведены в сравнительную таблицу.

**Таблица 1\. Сравнение стратегий широковещательной рассылки в FCM (Multicast vs. Topics)**

| Критерий | Multicast Messaging | Topic Messaging |
| :---- | :---- | :---- |
| **Сложность реализации (Backend)** | Высокая (требуется fan-out, пакетирование, ограничение скорости, обработка ошибок) | Низкая (один API-вызов) |
| **Сложность реализации (Client)** | Низкая (изменения не требуются) | Низкая (добавить вызов подписки на тему) |
| **Модель масштабирования** | Fan-out управляется сервером клиента | Fan-out управляется инфраструктурой FCM |
| **Производительность (Задержка)** | Потенциально ниже (прямая доставка) | Выше/Непредсказуемая (оптимизировано для пропускной способности) |
| **Надежность (Обратная связь)** | Высокая (статус доставки для каждого токена) | Низкая (best-effort, нет обратной связи) |
| **Накладные расходы на обслуживание** | Высокие (поддержка логики fan-out, очередей, базы токенов) | Низкие |
| **Идеальный сценарий использования** | Целевые, транзакционные сообщения для больших, но определенных групп | Нечувствительные ко времени массовые анонсы и новости |

## **Часть 2\. Анализ миграции на управляемый сервис Push-уведомлений (путь «Покупать»)**

В этом разделе оценивается стратегическая альтернатива — переход на специализированный сторонний сервис, с фокусом на OneSignal, как указано клиентом.

### **2.1. OneSignal как управляемый уровень абстракции**

Основное ценностное предложение OneSignal заключается в том, что это не просто провайдер push-уведомлений, а полнофункциональная «Платформа для взаимодействия с клиентами».16 Сервис абстрагирует сложности базовых платформ, таких как FCM для Android и APNS (Apple Push Notification Service) для iOS, предоставляя единый, многофункциональный API и панель управления.17

#### **2.1.1. Переход от модели, ориентированной на устройства, к модели, ориентированной на пользователей**

Это фундаментальное архитектурное отличие. FCM оперирует регистрационными токенами устройств. Современная архитектура OneSignal работает с единой моделью User (Пользователь), которая идентифицируется стабильным external\_id (например, внутренний ID пользователя в приложении клиента).19 Один пользователь может иметь несколько

Subscriptions (подписок): push на iOS, push на Android, email, SMS. Эта модель является более мощной и гибкой для современных приложений, где пользователи взаимодействуют с сервисом с нескольких устройств.

#### **2.1.2. Богатый набор готовых функций**

Помимо отправки push-уведомлений, OneSignal предоставляет из коробки набор инструментов, создание которых собственными силами потребовало бы огромных инженерных усилий:

* **Продвинутая сегментация:** Визуальный интерфейс без необходимости написания кода для создания динамических сегментов пользователей на основе атрибутов (например, страна, язык), поведения (например, последняя активность, количество покупок) и вовлеченности.16  
* **Автоматизация и Journeys:** Конструктор для создания автоматизированных цепочек сообщений (например, для онбординга новых пользователей, реактивации неактивных) без написания кода.16  
* **Аналитика и отчетность:** Детализированные дашборды и API для отслеживания доставки, открытий, кликов и событий конверсии.18  
* **Многоканальная оркестрация:** Возможность координировать кампании через push-уведомления, сообщения в приложении (in-app messages), email и SMS с единой платформы.16

### **2.2. Стратегия C: Широковещательная рассылка через сегменты OneSignal**

С точки зрения разработчика, процесс реализации широковещательной рассылки значительно упрощается.

* **Аутентификация:** Используется идентификатор приложения (App ID) и ключ REST API (REST API Key).23  
* **Node.js SDK:** OneSignal предоставляет официальную, типизированную клиентскую библиотеку для Node.js (@onesignal/node-onesignal), которая упрощает взаимодействие с API.24 Доступны примеры кода и готовые проекты для быстрого старта.26  
* **Отправка широковещательного уведомления:** Рассылка на всю аудиторию достигается путем создания уведомления и указания в качестве цели предопределенного сегмента, такого как "Subscribed Users" (Все подписанные пользователи).21 Это один API-вызов, который полностью скрывает всю сложность fan-out, пакетирования и ограничения скорости.  
* **Анализ примера кода:** Функция createNotification в Node.js SDK наглядно демонстрирует простоту.24 Полезная нагрузка включает  
  app\_id и contents (содержимое сообщения), и, что самое важное, может включать массив filters для динамической сегментации в реальном времени или указывать имя сегмента (included\_segments). Это и есть ядро механизма широковещательной рассылки.

#### **2.2.1. Анализ преимуществ**

* **Радикальное сокращение инженерных усилий:** Задача по созданию широковещательной рассылки сводится к одному API-вызову. Сложности масштабирования, ограничения скорости, обработки ошибок и учета особенностей разных платформ (iOS/Android) полностью берет на себя OneSignal.  
* **Превосходный опыт разработчика (Developer Experience):** Предоставляемые SDK, исчерпывающая документация и богатый функционал API разработаны для ускорения процесса разработки.18  
* **Мгновенный доступ к продвинутым функциям:** Клиент с первого дня получает доступ к A/B-тестированию, интеллектуальной доставке (оптимизация времени отправки для каждого пользователя), поддержке многоязычности и глубокой аналитике.18

#### **2.2.2. Анализ недостатков**

* **Зависимость от стороннего сервиса:** Приложение становится зависимым от сервиса OneSignal, его времени безотказной работы (uptime) и модели ценообразования.  
* **Потенциальные затраты:** Хотя существует щедрый бесплатный тариф, масштабирование за его пределы повлечет за собой расходы. Этот аспект будет подробно проанализирован в Части 3\.  
* **Потеря полного контроля:** Абстрагирование от FCM/APNS означает меньший контроль над «сырыми», специфичными для платформы полями полезной нагрузки, хотя OneSignal предоставляет широкие возможности для кастомизации.21  
* **Затраты на миграцию:** Основной «стоимостью» являются единовременные усилия, необходимые для миграции клиентских приложений на SDK OneSignal.

### **2.3. Путь миграции: Технические аспекты**

Миграция с прямой реализации FCM на OneSignal — это хорошо документированный процесс.17 Упоминание клиентом этой возможности в

PD делает данный раздел критически важным.

Ключевые шаги миграции:

1. **Конфигурация на стороне OneSignal:** Создать проект в OneSignal. В панели управления OneSignal загрузить JSON-файл сервисного аккаунта Firebase. Это позволит OneSignal отправлять уведомления через ваш проект Firebase, обеспечивая непрерывность работы для существующих установок Android-приложения.28  
2. **Замена SDK на стороне клиента:** Это самый значительный шаг. SDK firebase-messaging должен быть удален из кода клиентских приложений и заменен на SDK OneSignal. Этот процесс требует выпуска новой версии приложения в App Store и Google Play.  
3. **Импорт пользователей (опционально, но рекомендуется):** Чтобы не потерять возможность отправлять уведомления существующим пользователям до того, как они обновят приложение, их FCM-токены можно экспортировать из текущей базы данных и импортировать в OneSignal через API Create user.29 Это позволяет немедленно нацеливаться на всю базу пользователей.

#### **2.3.1. Стратегия поэтапной миграции как оптимальный путь**

Существует конфликт между срочной потребностью клиента в функции T и реальностью циклов выпуска мобильных приложений, которые не являются «мгновенными». Простое ожидание, пока все пользователи обновят приложение, может занять недели или месяцы.

Однако документация по миграции упоминает возможность поэтапного развертывания и параллельной работы нескольких провайдеров.29 Это позволяет разработать гибридный подход, который элегантно разрешает данный конфликт:

1. **Немедленно:** Команда бэкенда интегрирует Node.js SDK от OneSignal и готовит логику для отправки уведомлений через API OneSignal. Эта работа может быть выполнена параллельно с работой клиентской команды.  
2. **Следующий релиз приложения:** Команда мобильной разработки заменяет SDK Firebase Messaging на SDK OneSignal.  
3. **После релиза:** По мере того как пользователи обновляют свое приложение, они автоматически регистрируются в OneSignal. Бэкенд теперь может отправлять широковещательные уведомления через API OneSignal на сегмент "Subscribed Users". Этот сегмент будет расти по мере увеличения числа пользователей, установивших обновление.  
4. **Промежуточный период:** Для пользователей на старой версии приложения может продолжать работать существующая система уведомлений (если она используется для не-широковещательных сообщений). Можно даже использовать старую систему для отправки push-уведомления с призывом обновить приложение.

Этот поэтапный подход позволяет решить задачу T эффективно. Он балансирует между скоростью, управлением рисками и долгосрочной стратегической ценностью, позволяя новой функции начать работать для части аудитории сразу после релиза, без необходимости жесткого единовременного переключения.

## **Часть 3\. Комплексное сравнение и итоговая рекомендация**

Этот заключительный раздел синтезирует весь проведенный анализ, предоставляя прямое сравнение всех трех стратегий и завершаясь окончательной, основанной на фактах рекомендацией.

### **3.1. Анализ затрат и выгод и общая стоимость владения (TCO)**

Утверждение, что FCM является «бесплатным», вводит в заблуждение. Истинная общая стоимость владения (TCO) для пути «Создавать» должна учитывать не только прямые расходы, но и косвенные, в первую очередь — время инженеров.

* **Расчет «скрытых затрат» FCM:**  
  * **Разработка:** Оценка инженерного времени на создание логики fan-out для multicast, системы очередей с ограничением скорости, а также базовой панели аналитики для отслеживания результатов рассылок. Эта работа может занять от нескольких недель до месяцев для одного-двух инженеров.  
  * **Обслуживание:** Оценка постоянных затрат времени инженеров на исправление ошибок, адаптацию к изменениям в API FCM и поддержание операционной работоспособности самостоятельно созданной системы.  
* **Анализ ценообразования OneSignal:**  
  * OneSignal предлагает несколько тарифных планов. Для стартапа наиболее актуальными являются планы Free и Growth.31  
  * **Free Plan:** Полностью бесплатен, включает неограниченное количество мобильных push-подписчиков и до 10 000 веб\-push-подписчиков. Однако он имеет ограничения: до 6 сегментов, до 2 тегов данных на пользователя, история отчетности до 30 дней.  
  * **Growth Plan:** Начинается с $9 в месяц плюс плата за использование по каналам. Например, мобильные push-уведомления стоят $0.012 за активного пользователя в месяц. Этот план снимает многие ограничения бесплатного тарифа, предлагая больше сегментов, тегов и расширенную аналитику.

**Таблица 2\. Тарифные планы OneSignal и ключевые ограничения**

| План | Стоимость | Ключевые возможности | Ключевые ограничения |
| :---- | :---- | :---- | :---- |
| **Free** | $0/мес | Неограниченное кол-во мобильных подписчиков, API, базовые Journeys, A/B-тестирование | До 10,000 веб\-подписчиков, 6 сегментов, 2 тега данных, 1 активный Journey, отчетность за 30 дней |
| **Growth** | От $9/мес \+ usage | Расширенные Journeys, интеллектуальная доставка, подтвержденная доставка, расширенные интеграции | Мобильные push: $0.012/MAU. Веб-push: $0.004/подписчик. 10 сегментов, 10 тегов, 3 активных Journeys |
| **Professional** | Индивидуально | Расширенная аналитика, экспорт данных, приоритетная поддержка, 20 активных Journeys | Индивидуальное ценообразование по каналам |

**Вердикт по TCO:** Для большинства сценариев предсказуемая абонентская плата OneSignal, вероятно, будет ниже, чем полная стоимость владения (включая зарплаты инженеров) при создании и поддержке сопоставимой системы внутри компании. Особенно это актуально, если учесть альтернативные издержки — время, которое инженеры могли бы потратить на разработку основных функций продукта, а не на инфраструктуру уведомлений.

### **3.2. Сводная матрица сравнения решений**

Для обеспечения наглядного обзора, все три стратегии сравниваются в единой матрице по ключевым техническим и бизнес-критериям.

**Таблица 3\. Комплексная матрица сравнения решений**

| Критерий | FCM Multicast | FCM Topics | OneSignal Segments |
| :---- | :---- | :---- | :---- |
| **Затраты на реализацию (Backend)** | Высокие | Очень низкие | Очень низкие |
| **Затраты на реализацию (Client)** | Отсутствуют | Низкие | Средние (миграция SDK) |
| **Время вывода на рынок (Time to Market)** | Медленное | Очень быстрое | Среднее (зависит от релиза) |
| **Масштабируемость** | Высокая (требует сложной инженерии) | Очень высокая (управляется FCM) | Очень высокая (управляется OneSignal) |
| **Задержка (Latency)** | Низкая/Предсказуемая | Высокая/Непредсказуемая | Низкая/Предсказуемая |
| **Надежность (Обратная связь)** | Высокая (статус для каждого устройства) | Низкая (best-effort, нет обратной связи) | Высокая (функция Confirmed Delivery) |
| **Аналитика** | Отсутствует (требуется своя разработка) | Отсутствует | Богатая (из коробки) |
| **Продвинутые функции (A/B, расписание)** | Отсутствуют (требуется своя разработка) | Отсутствуют | Богатые (из коробки) |
| **Накладные расходы на обслуживание** | Высокие | Очень низкие | Очень низкие |
| **Прямая стоимость** | $0 | $0 | От $0 (тарифная сетка) |
| **Общая стоимость владения (TCO)** | Высокая (время инженеров) | Низкая (с функциональными компромиссами) | Низкая-Средняя (предсказуемые расходы) |

### **3.3. Экспертная рекомендация**

На основании всестороннего анализа, проведенного в данном отчете, выносится окончательная рекомендация: **для реализации функции широковещательных уведомлений (T) следует произвести миграцию на платформу OneSignal.**

#### **3.3.1. Обоснование**

1. **Стратегическое соответствие:** Клиент уже рассматривает OneSignal. Переход на эту платформу — это не просто техническое решение текущей задачи, а стратегическое обновление, закладывающее фундамент для будущих инициатив по вовлечению клиентов, которые выходят далеко за рамки простых широковещательных рассылок.16  
2. **Превосходная общая стоимость владения (TCO):** Хотя FCM является «бесплатным», TCO создания и поддержки надежной, масштабируемой и многофункциональной системы широковещательных рассылок собственными силами значительно выше, чем предсказуемые абонентские платежи OneSignal. Бесплатный тариф может даже оказаться достаточным для начальных потребностей клиента.31  
3. **Снижение рисков:** Путь «Создавать», особенно с использованием Topics, несет в себе неприемлемые риски, связанные с задержкой и надежностью доставки.11 Путь с использованием Multicast несет значительные проектные риски из\-за своей сложности. OneSignal снижает эти риски, предоставляя проверенное, надежное и масштабируемое решение.  
4. **Ускорение получения ценности (Time-to-Value):** Несмотря на то, что первоначальная миграция требует обновления приложения, долгосрочная скорость внедрения новых функций обмена сообщениями будет значительно выше с платформой и инструментами OneSignal по сравнению с созданием всего с нуля на базе FCM.

#### **3.3.2. Рекомендуемый план реализации**

Рекомендуется придерживаться **стратегии поэтапной миграции**, описанной в разделе 2.3. Этот подход напрямую решает потребность клиента в «немедленном» решении, учитывая при этом реалии цикла выпуска мобильных приложений. Он предлагает наилучший баланс скорости, управления рисками и долгосрочной стратегической ценности.

Данный путь не только эффективно решает задачу T, но и позиционирует приложение клиента для гораздо более сложного и персонализированного взаимодействия с пользователями в будущем.

#### **Works cited**

1. Firebase Cloud Messaging with NodeJS: Push Notifications Made Easy \- Mindbowser, accessed July 25, 2025, [https://www.mindbowser.com/firebase-nodejs-push-notifications-guide/](https://www.mindbowser.com/firebase-nodejs-push-notifications-guide/)  
2. Integrating Firebase Cloud Messaging and Setting Up a Node.js Backend for Push Notifications | by Prathyaksh | Medium, accessed July 25, 2025, [https://medium.com/@iamprathyaksh/integrating-firebase-cloud-messaging-and-setting-up-a-node-js-backend-for-push-notifications-93acf98f3eb9](https://medium.com/@iamprathyaksh/integrating-firebase-cloud-messaging-and-setting-up-a-node-js-backend-for-push-notifications-93acf98f3eb9)  
3. How to Send push notification in Mobile Using NodeJS with Firebase Service, accessed July 25, 2025, [https://dev.to/raynecoder/how-to-send-push-notification-in-mobile-using-nodejs-with-firebase-service--52o5](https://dev.to/raynecoder/how-to-send-push-notification-in-mobile-using-nodejs-with-firebase-service--52o5)  
4. Firebase Cloud Messaging, accessed July 25, 2025, [https://firebase.google.com/docs/cloud-messaging](https://firebase.google.com/docs/cloud-messaging)  
5. Send FCM Push Notification from Node.js using Firebase Cloud Messaging (FCM) HTTP V1–2025 | by Rhythm Khandelwal | Medium, accessed July 25, 2025, [https://medium.com/@rhythm6194/send-fcm-push-notification-in-node-js-using-firebase-cloud-messaging-fcm-http-v1-2024-448c0d921fff](https://medium.com/@rhythm6194/send-fcm-push-notification-in-node-js-using-firebase-cloud-messaging-fcm-http-v1-2024-448c0d921fff)  
6. About FCM messages | Firebase Cloud Messaging \- Google, accessed July 25, 2025, [https://firebase.google.com/docs/cloud-messaging/concept-options](https://firebase.google.com/docs/cloud-messaging/concept-options)  
7. The Ultimate Guide To Firebase Cloud Messaging (FCM) \- Novu, accessed July 25, 2025, [https://novu.co/blog/the-ultimate-guide-to-firebase-cloud-messaging-fcm/](https://novu.co/blog/the-ultimate-guide-to-firebase-cloud-messaging-fcm/)  
8. Build app server send requests | Firebase Cloud Messaging \- Google, accessed July 25, 2025, [https://firebase.google.com/docs/cloud-messaging/send-message](https://firebase.google.com/docs/cloud-messaging/send-message)  
9. How to send push notifications at scale \- CrossNibble, accessed July 25, 2025, [https://www.crossnibble.com/blog/digital-technology/sending-push-notifications-at-scale/](https://www.crossnibble.com/blog/digital-technology/sending-push-notifications-at-scale/)  
10. Best practices when sending FCM messages at scale | Firebase ..., accessed July 25, 2025, [https://firebase.google.com/docs/cloud-messaging/scale-fcm](https://firebase.google.com/docs/cloud-messaging/scale-fcm)  
11. Topic messaging on Android | Firebase Cloud Messaging \- Google, accessed July 25, 2025, [https://firebase.google.com/docs/cloud-messaging/android/topic-messaging](https://firebase.google.com/docs/cloud-messaging/android/topic-messaging)  
12. Does FCM have any limitations on the number of free in-app/push notifications? Can it handle 21M+ notifications/month for 7M users? : r/Firebase \- Reddit, accessed July 25, 2025, [https://www.reddit.com/r/Firebase/comments/1dbuivf/does\_fcm\_have\_any\_limitations\_on\_the\_number\_of/](https://www.reddit.com/r/Firebase/comments/1dbuivf/does_fcm_have_any_limitations_on_the_number_of/)  
13. Can FCM topic is suitable for larger set of user? \- Stack Overflow, accessed July 25, 2025, [https://stackoverflow.com/questions/60851881/can-fcm-topic-is-suitable-for-larger-set-of-user](https://stackoverflow.com/questions/60851881/can-fcm-topic-is-suitable-for-larger-set-of-user)  
14. Subscription limits for topics in FCM \- Google Groups, accessed July 25, 2025, [https://groups.google.com/g/firebase-talk/c/RZSl\_V\_jEFQ](https://groups.google.com/g/firebase-talk/c/RZSl_V_jEFQ)  
15. Cloud Messaging | React Native Firebase, accessed July 25, 2025, [https://rnfirebase.io/messaging/usage](https://rnfirebase.io/messaging/usage)  
16. OneSignal: Customer Engagement Platform for Email, Push, accessed July 25, 2025, [https://onesignal.com/](https://onesignal.com/)  
17. What You Should Know About the FCM Deprecation \- OneSignal, accessed July 25, 2025, [https://onesignal.com/blog/what-you-should-know-about-the-fcm-deprecation-announcement/](https://onesignal.com/blog/what-you-should-know-about-the-fcm-deprecation-announcement/)  
18. The Best Alternative to Pushwoosh \- OneSignal, accessed July 25, 2025, [https://onesignal.com/onesignal-vs-pushwoosh](https://onesignal.com/onesignal-vs-pushwoosh)  
19. User model & migration guide \- OneSignal Documentation, accessed July 25, 2025, [https://documentation.onesignal.com/docs/user-model-migration-guide](https://documentation.onesignal.com/docs/user-model-migration-guide)  
20. OneSignal Documentation \- OneSignal, accessed July 25, 2025, [https://documentation.onesignal.com/](https://documentation.onesignal.com/)  
21. Push overview \- OneSignal Documentation, accessed July 25, 2025, [https://documentation.onesignal.com/docs/push](https://documentation.onesignal.com/docs/push)  
22. OneSignal \- AWS Marketplace, accessed July 25, 2025, [https://aws.amazon.com/marketplace/pp/prodview-gww7cvpnjuhpe](https://aws.amazon.com/marketplace/pp/prodview-gww7cvpnjuhpe)  
23. OneSignal API Integration using Node.js \- GeeksforGeeks, accessed July 25, 2025, [https://www.geeksforgeeks.org/node-js/onesignal-api-integration-using-node-js/](https://www.geeksforgeeks.org/node-js/onesignal-api-integration-using-node-js/)  
24. OneSignal/onesignal-node-api: OneSignal Node Client \- GitHub, accessed July 25, 2025, [https://github.com/OneSignal/onesignal-node-api](https://github.com/OneSignal/onesignal-node-api)  
25. OneSignal Typescript/Node SDK is Now Available, accessed July 25, 2025, [https://onesignal.com/blog/onesignal-typescript-client-sdk-is-now-available/](https://onesignal.com/blog/onesignal-typescript-client-sdk-is-now-available/)  
26. OneSignalDevelopers/onesignal-node-sample: This is a sample app to demonstrate the usage of the NodeJS client library from OneSignal to send and view notifications. \- GitHub, accessed July 25, 2025, [https://github.com/OneSignalDevelopers/onesignal-node-sample](https://github.com/OneSignalDevelopers/onesignal-node-sample)  
27. Compare OneSignal vs. Pushwoosh in 2025 \- Slashdot, accessed July 25, 2025, [https://slashdot.org/software/comparison/OneSignal-vs-Pushwoosh/](https://slashdot.org/software/comparison/OneSignal-vs-Pushwoosh/)  
28. Android Firebase credentials \- OneSignal Documentation, accessed July 25, 2025, [https://documentation.onesignal.com/docs/android-firebase-credentials](https://documentation.onesignal.com/docs/android-firebase-credentials)  
29. Migrating to OneSignal \- OneSignal \- OneSignal Documentation, accessed July 25, 2025, [https://documentation.onesignal.com/docs/migrating-to-onesignal](https://documentation.onesignal.com/docs/migrating-to-onesignal)  
30. OneSignal update \- Ordering.co, accessed July 25, 2025, [https://support.ordering.co/hc/en-us/articles/20776944638605-OneSignal-update](https://support.ordering.co/hc/en-us/articles/20776944638605-OneSignal-update)  
31. Pricing \- OneSignal, accessed July 25, 2025, [https://onesignal.com/pricing](https://onesignal.com/pricing)
4) Ответ на ваш вопрос «Have you built a project that connects ChatGPT (OpenAI API) to a custom data source (e.g., a database, product catalog, or documents)? If yes, describe what the user could query and how the system responded».
Да, я разрабатывал подобные системы.
Ниже я опишу, как предлагаемая мной архитектура обработает пример вашего запроса: «What are the specs for item X?».
4.1) Этап 1: Векторизация запроса (Query Embedding).
4.1.1) Backend-сервис (RAG Runtime Service) получает запрос пользователя: «What are the specs for item X?».
4.1.2) Сервис использует OpenAI API (например, модель ``text-embedding-3-small``) для преобразования этого текста в плотный вектор (эмбеддинг).
4.2) Этап 2: Гибридный поиск (Hybrid Search Retrieval).
4.2.1) Сервис выполняет гибридный поиск в выделенном RAG-индексе Elasticsearch.
4.2.2) Этот поиск сочетает семантический поиск (ANN) по сгенерированному вектору и поиск по ключевым словам (BM25) для точного совпадения (например, если «item X» — это артикул SKU).
4.2.3) Результаты обоих методов объединяются с использованием алгоритма Reciprocal Rank Fusion (RRF), что обеспечивает высокую релевантность без ручной настройки весов.
4.3) Этап 3: Формирование контекста (Context Assembly).
4.3.1) Система извлекает Топ-N (например, 5) наиболее релевантных продуктов из результатов поиска.
4.3.2) Извлекаются детали этих продуктов: спецификации, цены и URL.
4.4) Этап 4: Конструирование промпта (Prompt Engineering).
4.4.1) Формируется промпт для ChatGPT, включающий извлеченный контекст и исходный запрос пользователя.
4.4.2) В системных инструкциях (System Message) модели предписывается отвечать, основываясь исключительно на предоставленном контексте (Grounding).
4.4.3) Также инструкции требуют обязательного включения в ответ цен и ссылок (URL), что гарантирует точность информации и минимизирует галлюцинации.
4.5) Этап 5: Генерация ответа (Generation).
4.5.1) Промпт отправляется в OpenAI Chat Completions API (например, ``gpt-4o``) с низким значением параметра ``temperature`` для обеспечения фактической точности.
4.5.2) ChatGPT генерирует исчерпывающий ответ, детально описывающий спецификации для «item X», включая актуальную цену и прямую ссылку на страницу продукта в вашем магазине.
4.6) Этап 6: Доставка ответа (Response Delivery).
4.6.1) Сгенерированный ответ передается пользователю в потоковом режиме (Streaming) токен за токеном для улучшения пользовательского опыта (UX).
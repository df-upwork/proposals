Ниже приведена пошаговая инструкция, как организовать регулярную передачу индикатора статуса "Credit Hold" из Business Central в Dynamics 365 Sales, чтобы эта информация была видна сотрудникам, работающим в CRM.

1) Подготовить исходные данные в Business Central

1.1) Убедиться, что в Business Central есть значение "Credit Hold" или аналогичное поле, указывающее на блокировку клиента по кредитным причинам. В стандартной конфигурации Business Central обычно используется поле "Blocked" в таблице "Customer".  
1.2) Если стандартного поля недостаточно, создать дополнительное поле (при необходимости через расширение AL) для хранения статуса "Credit Hold".  
1.3) Проверить, что в справочнике "Customer" для каждого клиента корректно заполнен статус блокировки (например, "Blocked = All" или специальное значение для "Credit Hold").

2) Создать или подготовить поле в Dynamics 365 Sales для статуса "Credit Hold"

2.1) Перейти в интерфейс администратора Dynamics 365 Sales.  
2.2) Открыть «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  
2.3) Найти сущность «Account» (или «Contact», если логика привязана к контактам) и создать поле для хранения статуса кредитной блокировки (например, "CreditHoldStatus").  
2.4) Установить тип поля, например "Two Options" (да/нет) или "Option Set" с несколькими статусами (в зависимости от бизнес-требований).  
2.5) Сохранить изменения и опубликовать их, чтобы поле стало доступно в системе.

3) Настроить соединения (Connection) в Power Automate

3.1) Убедиться, что есть действующие соединения для "Business Central" и "Dynamics 365 Sales" в Power Automate. При необходимости в «Data» → «Connections» добавить:  
• "Business Central" (это Premium Connector),  
• "Common Data Service (current environment)" или "Dataverse" (зависит от того, как настроен Dynamics 365 Sales).  
3.2) Проверить уровень доступа (Security Roles) учетной записи, чтобы при обращении к Business Central и Dynamics 365 Sales пользователю или приложению были доступны нужные операции чтения/записи.

4) Создать "Cloud Flow" в Power Automate для синхронизации

4.1) Перейти в портал создания потоков (Maker Portal) Power Automate.  
4.2) Нажать «Create» → выбрать «Automated cloud flow».  
4.3) В качестве «Trigger» подобрать вариант, который будет запускаться при изменении или создании записи в Business Central. Например, использовать "When an item is modified" (коннектор "Business Central") или работать через расписание с "Recurrence" и затем считывать изменения за период.  

Пример для события при изменении записи (если функциональность доступна):  
• Выбрать «Business Central», указать «Environment», «Company», «API» или «Table», где хранится статус "Credit Hold" (чаще всего "Customers").  
• Настроить фильтрацию, если нужно отслеживать только те записи, в которых статус блокировки менялся.

4.4) Добавить «Action» для извлечения необходимых полей (например, "Blocked" или новое поле "CreditHold").  
4.5) Сопоставить запись из Business Central с соответствующей записью «Account» в Dynamics 365 Sales. Чаще всего используют какое-то уникальное поле (например, «No.» из Business Central и «Account Number» в Dynamics 365 Sales).  

5) Обновлять статус в Dynamics 365 Sales

5.1) Добавить действие «Update a record» (или «Dataverse (Update a row)») для сущности «Account» в Dynamics 365 Sales.  
5.2) Указать уникальный идентификатор (GUID) записи «Account» или задать логику поиска записи «Account» по полю, сопоставленному с «No.» клиента из Business Central.  
5.3) В параметрах «Update a record» заполнить поле "CreditHoldStatus" (или созданное ранее поле) значением из Business Central (например, если "Blocked" = "All", то "CreditHoldStatus" = Да).  
5.4) Сохранить, затем опубликовать созданный поток ("Cloud Flow").

6) Проверить работу потока

6.1) Создать или изменить тестовую запись "Customer" в Business Central, проставить ей статус блокировки (например, "Blocked = All").  
6.2) Дождаться срабатывания потока (при автоматическом триггере или запустить вручную, если используется расписание).  
6.3) Перейти в Dynamics 365 Sales → «Accounts», открыть соответствующую запись и убедиться, что поле статуса кредитной блокировки (CreditHoldStatus) обновлено.  
6.4) Проверить журнал выполнения потока в Power Automate (раздел «My flows» → «Имя потока» → «Run History») на наличие ошибок.

7) Дополнительные настройки и рекомендации

7.1) При необходимости настроить «Business Rules» в Dynamics 365 Sales, чтобы при наличии статуса "Credit Hold" показывать соответствующее уведомление менеджерам или блокировать создание новых сделок (Opportunity).  
7.2) Использовать поля типа «Option Set» с понятными значениями (например, "No hold", "Credit hold") вместо булевых полей, если нужны несколько вариантов статуса.  
7.3) При большом объеме клиентов рассмотреть логику обновления по расписанию (например, раз в день) с дифференциальным отбором измененных записей, чтобы не загружать систему слишком частыми вызовами.  
7.4) Задокументировать сопоставление полей (mapping) и настройки Power Automate, чтобы в будущем было проще поддерживать или расширять интеграцию.

В результате настроенная интеграция в Power Automate позволит при каждом изменении статуса кредитной блокировки в Business Central автоматически обновлять поле "CreditHoldStatus" в Dynamics 365 Sales и обеспечивать видимость статуса "Credit Hold" сотрудникам, работающим в CRM.
# 1. `B.md`
~~~~~~markdown
# 1. `᛭MDi`
## 1.1.
Каждый отдельный (произвольный, неопределённый) документ в формате Markdown, прикреплённый мной к этому запросу, буду обозначать `᛭Di`.
## 1.2.
Имя файла `᛭Di` всегда имеет расширение `.md`.
## 1.3.
Множество всех `᛭Di` буду обозначать `᛭Ds`.

# 2. `L.md`
### 2.1.
`L.md` ∈ `᛭Ds`.
## 2.2.
`L.md` описывает полуформальный язык: `᛭L`.
## 2.3.
Большинство `᛭Di` написаны на `᛭L`.
## 2.4.
Множество всех `᛭Di`, написанных на `᛭L`, буду обозначать `᛭DLs`.
Таким образом, `᛭DLs` ⊆ `᛭Ds`. 

# 3. `O.md`
## 3.1.
`O.md` ∈ `᛭DLs`
## 3.2.
`O.md` описывает некую **онтологию** (`᛭O`)  — модель предметной области, в которой тебе предстоит решать задачу.
«An **ontology** encompasses a representation, formal naming, and definitions of the categories, properties, and relations between the concepts, data, or entities»: https://en.wikipedia.org/wiki/Ontology_(information_science)

# 4. `T.md`
## 4.1.
`T.md` ∈ `᛭DLs`
## 4.2.
`T.md` описывает задачу (`᛭T`), которую ты должен решить.

# 5. Порядок твоих действий
Действуй пошагово:
## 5.1.
Сначала внимательно и полностью прочитай `L.md`.
В точности запомни его содержание.

## 5.2.
Затем внимательно и полностью прочитай `O.md`. 
В точности запомни его содержание.

## 5.3.
Затем внимательно и полностью прочитай `T.md`. 
Выполни `᛭T`.

~~~~~~

# 2. `L.md`
~~~~~~markdown
# 1. `≔`
## 1.1.
- `≔` — это бинарный оператор.
## 1.2.
`A ≔ B` means that `A` **denotes** `B`.
## 1.3.
Я использую `≔` для сокращения записи.
В выражении `A ≔ B` `B` обычно — это длинный текст, а `A` — это более короткое обозначение.  
## 1.4.
~~~code
A ≔
```
B
```
~~~
равнозначно `A ≔ B` и используется, когда `B` — многострочный текст.

# 2. `→`
~~~code
A → B
~~~
denotes a material conditional (https://en.wikipedia.org/wiki/Material_conditional)

# 3. `⊢`
~~~code
A ⊢ B
~~~
denotes a logical consequence (https://en.wikipedia.org/wiki/Logical_consequence)

# 4. `⊤`
## 4.1.
~~~code
⊤ B
~~~
means that `B` is true (is a fact).

## 4.2.
~~~code
⊤⟦Rs⟧ B
~~~
means:
```
(⊤ `B`) AND (`Rs` are the reasons why `B` is true)
```

## 4.3.
~~~code
A ≔⊤
```
B
```
~~~
means:
```code
(`A` ≔ `B`) AND (⊤ `B`).
```

## 4.4.
~~~code
A ≔⊤⟦Rs⟧
```
B
```
~~~
means:
```code
(`A` ≔ `B`) AND (⊤⟦Rs⟧ B).
```

# 5. `≔!`
## 5.1.
~~~code
A ≔! B
~~~
means:
```code
(`A` ≔⊤ `B`) AND (`B` is surprising).
```

## 5.2.
~~~code
A ≔!⟦Rs⟧ B
~~~
means:
```code
(`A` ≔⊤⟦Rs⟧ `B`) AND (`B` is surprising).
```

# 6. `?`
## 6.1.
~~~code
? B
~~~
means that `B` is a hypothesis.

## 6.2.
~~~code
?⟦Rs⟧ B
~~~
means:
```code
(? `B`) AND (`Rs` are the reasons for the hypothesis)
```

## 6.3.
~~~code
A ≔? B
~~~
means:
```code
(? `B`) AND (`A` ≔ `B`)
```

## 6.4.
~~~code
A ≔?⟦Rs⟧ B
~~~
means:
```code
(?⟦Rs⟧ `B`) AND (`A` ≔ `B`)
```

# 7.
## 7.1.
~~~code
A : S ≔ B
~~~
means:
```code
(`A` ≔ `B`) AND (`A` ∈ `S`).
```

## 7.2.
~~~code
A : S
~~~
means:
```code
`A` : `S` ≔ (an arbitrary element of `S`)
```

# 8. `⠿{…}`
## 8.1. `⠿{I₁, I₂, …, Iₙ}`
`⠿{I₁, I₂, …, Iₙ}` обозначает множество, заданное точным перечислением всех его элементов: {`I₁`, `I₂`, …, `Iₙ`}.

## 8.2. `⠿{I₁-Iₙ}` 
`⠿{I₁-Iₙ}` обозначает множество, заданное интервалом (диапазоном) его значений.
Это множество, в числе прочего, включает границы указанного интервала: `I₁` и `Iₙ`.

# 9. `⠿~`
## 9.1. `⠿~ (D)`
`⠿~ (D)` обозначает множество, заданное неформальным (словесным) описанием его элементов (`D`).

## 9.2.
~~~code
⠿~
```
D
```	
~~~
равнозначно `⠿~ (D)` и используется, когда `D` — многострочный текст.

## 9.3.
~~~code
S ≔ ⠿~ (D)
```yaml
- I₁
- I₂
- …
- Iₙ
```	
~~~
означает: (`S ≔ ⠿~ (D)`) AND (⠿{`I₁`, `I₂`, …, `Iₙ`} ⊆ `S`) .

# 10.
## 10.1.
`᛭DLi` : `᛭DLs`
## 10.2.
### 10.2.1.
`᛭Dc` — это обозначение `᛭DLi` самого себя.
Другими словами, если текст `᛭DLi` содержит упоминание `᛭Dс` — это значит, что `᛭Di` упоминает сам себя. 
### 10.2.2.
Например: если имя файла `᛭Di` — `sample.md`, и текст `sample.md` использует обозначение `᛭Dc`, это значит, что `᛭Dc` в данном случае обозначает документ `sample.md`.  

# 11. `§`
## 11.1.
~~~code
§P
~~~
означает ссылку на пункт `P` `᛭Dc`.
Например, §8.2.2 означает ссылку на пункт 8.2.2 `᛭Dc`.
## 11.2.
~~~code
`᛭DLi`::§P
~~~
означает ссылку на пункт `P` `᛭DLi`.
  
# 12. Local Definitions
## 12.1.
~~~code
A[§P] ≔ B
~~~
Означает:
- Для понятия `B` я **временно**, **только в рамках** §`P`, использую обозначение `A`.
- Вне §`P` это правило не применяется: в частности, если до §`P` обозначение `A` имело другой смысл, то после §`P` обозначение `A` снова будет иметь этот смысл.
- По сути, `A[§P] ≔ B` объявляет **локальную переменную** `A` с **областью действия** §`P`.
- В отличие от `A[§P] ≔ B`, `A ≔ B` объявляет **глобальную переменную** `A`.

## 12.2.
~~~code
A[§P₁, §P₂, …, §Pₙ] ≔ B
~~~
Означает, что обозначение `A` имеет значение `B` в контексте ⠿{§`P₁`, §`P₂`, …, §`Pₙ`}.
По сути, это правило аналогично §12.1, но область действия локальной переменной `A` ограничивается не одним пунктом, а множеством пунктов.

## 12.3.
~~~code
A[§P₁-§Pₙ] ≔ B
~~~
Означает, что обозначение `A` имеет значение `B` в контексте ⠿{§P₁-§Pₙ}.
По сути, это правило аналогично §12.1 и §12.2.

# 13. `≔†`
~~~code
A ≔† B
~~~
means:
```code
(`A` ≔ `B`) AND (`B` is a **problem** to me).
```

# 14. `▶`
```code
▶ A
```
означает, что в описываемой мной ситуации я использую `A`.

# 15. `ⰳ`
```code
Aⰳ(a, b, …) ≔ B
```
means:
- `A` — это функция с параметрами ⠿{`a`, `b`, …}.
- `B` — семантика `A`

# 16. `߷`
## 16.1.
```
߷⠿ ≔ ⠿~ (приложеные к этому запросу файлы)
```

## 16.2.
```code
߷ⰳ(ID, Name) ≔ Desc
```
means:
```code
- `ID` : `߷⠿` ≔ `Desc`
- `Name` — имя файла
```


~~~~~~

# 3. `O.md`
~~~~~~markdown
# 0.
Сегодня 2025-10-11.

# 1.
## 1.1.
`UW` ≔ (Upwork: https://en.wikipedia.org/wiki/Upwork)

## 1.2.
`ꆜ` ≔ (Некий конкретный потенциальный клиент на `UW`)

## 1.3.
`P⁎` ≔ (Некий конкретный потенциальный проект, опубликованный `ꆜ` на `UW`)

# 2. Информация о `P⁎`
## 2.1. URL
https://www.upwork.com/jobs/~021976761693152321024

## 2.2. Title
AWS Lightsail/Wordpress DevOps Enginee

## 2.3. Description
`PD` ≔ 
```text
We need an experienced DevOps / Systems Engineer to stabilize our AWS Lightsail WordPress production environment. 
The site has had intermittent downtime and performance issues, and we need someone who can quickly diagnose the root causes, implement durable fixes, and improve system reliability.

What you’ll do:
- Diagnose Apache, PHP, and MySQL issues (CPU, memory, OS-level).
- Recommend and apply configuration and security improvements.
- Implement monitoring, alerting, and log retention (CloudWatch, uptime probes).
- Document findings and provide a clear handoff plan.

Short-term engagement with possible extension for ongoing monitoring and telemetry setup.

# Deliverables
- A root cause analysis identifying the sources of recent server instability
- Configuration updates and documentation of all changes made
- Optimized server setup with monitoring and alerts in place
- Recommendations for ongoing maintenance and scaling
```

## 2.4. Tags
WordPress
DevOps
Apache HTTP Server
MySQL
Amazon Lightsail
Linux System Administration
System Monitoring
Amazon CloudWatch
NGINX
Datadog

## 2.5. Questions
### 2.5.1.
Have you diagnosed or stabilized a production WordPress instance running on AWS Lightsail or EC2 before? 
Briefly describe what you found and how you fixed it.

### 2.5.2.
What monitoring and alerting stack do you typically recommend for small production environments?

### 2.5.3.
What’s your approach to finding the root cause of recurring Apache/MySQL downtime?

# 5. Информация о `ꆜ`
## 5.1. Местоположение
United States

## 5.2. Характеристики компании
### 5.2.1. Сектор экономики
неизвестно

### 5.2.2. Количество сотрудников
неизвестно

## 5.3. Характеристики учётной записи на `UW`
### 5.3.1. Member since
Oct 11, 2025
### 5.3.2. Hire rate (%)
0
### 5.3.3. Количество опубликованных проектов (jobs posted)
1
### 5.3.4. Total spent (USD)
0
### 5.3.5. Количество оплаченных часов в почасовых проектах
STUB
### 5.3.6. Средняя почасовая ставка (USD)
0

# 6.
`P†` ≔†
```
Проблема, о которой `ꆜ` пишет в `PD`:
~~~
The site has had intermittent downtime and performance issues
~~~
```

# 7.
## 7.1.
`Q2⁎` ≔ (Вопрос `ꆜ` §2.5.2)

## 7.2.
`Q3⁎` ≔ (Вопрос `ꆜ` §2.5.3)

# 8
## 8.1.
`Cᛘ⠿` ≔ ⠿~ (Возможные причины `P†`)

## 8.2.
`Cᛘᵢ` : `Cᛘ⠿`

## 8.3.
? `Cᛘᵢ`

# 9.  Анализ `Cᛘ⠿` 

## 9.1. Cᛘ₁: Исчерпание квоты производительности ЦП (CPU Burst Capacity)

### Суть
Инстансы AWS Lightsail функционируют на основе модели взрывной производительности (Burstable Performance).
Эта модель предоставляет низкий базовый уровень производительности ЦП с возможностью временного его превышения за счет накопленных кредитов (CPU Burst Capacity).
Если нагрузка на ЦП превышает базовый уровень, кредиты расходуются.
Когда кредиты исчерпаны, производительность ЦП принудительно ограничивается базовым уровнем (например, 10-30% от полной мощности vCPU).
Это ограничение (throttling) приводит к резкому замедлению обработки запросов или полной недоступности сайта.

### Оценка
90

### Доводы за
Характер проблемы, описанный как «периодический» (intermittent), идеально соответствует циклу исчерпания кредитов под нагрузкой и их медленного восстановления в простое.
Это самая распространенная причина внезапного падения производительности на инстансах Lightsail и EC2 T-серии.
Документация AWS подтверждает, что исчерпание кредитов приводит к деградации производительности (Source 2.2).
Базового уровня производительности часто недостаточно для обслуживания производственного сайта WordPress под нагрузкой, особенно при выполнении фоновых задач или обработке пикового трафика.

### Доводы против
Исчерпание кредитов является симптомом высокого использования ЦП, а не его первопричиной, которая может заключаться в неэффективном коде или внешних атаках.
Если фактическое использование ЦП сайтом всегда ниже базового порога, эта гипотеза неверна.

## 9.2. Cᛘ₂: Нехватка оперативной памяти и активация OOM Killer

### Суть
Стек приложений (Apache, MySQL, PHP) потребляет оперативную память (RAM) для своей работы и обработки запросов.
Если совокупное потребление памяти превышает доступный объем физической RAM, операционная система начинает использовать дисковое пространство подкачки (Swap).
Интенсивное использование Swap (thrashing) резко снижает производительность из-за медленных операций дискового ввода-вывода.
Если физическая память и Swap исчерпаны, ядро Linux активирует механизм OOM (Out-Of-Memory) Killer.
OOM Killer принудительно завершает критические процессы (часто MySQL или Apache) для освобождения памяти, вызывая полный простой сайта (Source 1.3).

### Оценка
85

### Доводы за
Инстансы Lightsail, особенно на младших тарифах, имеют ограниченный объем RAM (например, 1GB или 2GB), которого часто недостаточно для стека LAMP под нагрузкой (Source 1.2, 1.3).
WordPress, особенно с большим количеством плагинов, может потреблять значительный объем памяти (Source 1.4).
Нехватка памяти является типичной причиной сбоев, таких как ошибка подключения к базе данных, когда процесс MySQL завершается (Source 1.1).
Клиент прямо указал на необходимость диагностики проблем с памятью на уровне ОС.

### Доводы против
Если бы памяти было критически недостаточно для базовой работы, проблемы могли бы быть постоянными, а не периодическими.
Периодический характер может указывать на то, что нехватка памяти возникает только во время пиков активности или из-за утечек памяти в приложениях.

## 9.3. Cᛘ₃: Неоптимальная конфигурация веб-сервера (Apache/PHP)

### Суть
Настройки веб-сервера Apache, управляющие количеством одновременных процессов, не соответствуют доступным ресурсам сервера.
Если параметр `MaxRequestWorkers` (или `MaxClients`) установлен слишком высоко, сервер может создать слишком много дочерних процессов под нагрузкой (Source 4.2).
Избыточное количество процессов приводит к чрезмерному потреблению оперативной памяти, усугубляя Cᛘ₂.
Если параметр установлен слишком низко, сервер не сможет обработать входящий трафик, что приведет к отказу в обслуживании.

### Оценка
80

### Доводы за
Стандартные конфигурации Apache (особенно с `mod_php`) часто потребляют слишком много памяти для небольших серверов и могут быстро привести к OOM ошибкам (Source 4.3).
Настройка баланса между параллелизмом и потреблением памяти критически важна на серверах с ограниченными ресурсами (Source 4.1).
Если сервер начинает использовать Swap из-за слишком высокого `MaxRequestWorkers`, это убивает производительность (Source 4.1).
Клиент прямо указал диагностику Apache и PHP как одну из задач.

### Доводы против
Эта проблема чаще является фактором, способствующим исчерпанию ресурсов (Cᛘ₂), чем самостоятельной первопричиной.
Стандартные образы в Lightsail (например, от Bitnami) обычно имеют предварительно настроенную конфигурацию, хотя она может быть не идеальной для конкретного сайта.

## 9.4. Cᛘ₄: Вредоносный трафик и боты (Brute-Force, XML-RPC, DDoS)

### Суть
Автоматизированные атаки и агрессивные боты создают чрезмерную нагрузку на сервер, потребляя ресурсы CPU и памяти и вызывая отказ в обслуживании.
Основные векторы атак на WordPress включают попытки подбора паролей к `wp-login.php` и атаки через интерфейс `xmlrpc.php`.

### Оценка
75

### Доводы за
WordPress является частой целью для автоматизированных атак.
Атаки на `xmlrpc.php` позволяют использовать функцию `system.multicall` для проверки сотен паролей в одном HTTP-запросе, что значительно увеличивает нагрузку и эффективность атаки (Source 5.2).
Атаки могут использовать функцию Pingback для проведения DDoS-атак, перегружая сервер запросами (Source 5.2, 5.3).
Периодический характер проблемы хорошо соответствует паттернам атак или активности ботов.
Даже не очень интенсивные атаки могут перегрузить небольшой инстанс Lightsail.

### Доводы против
Использование эффективных плагинов безопасности или внешнего WAF (например, Cloudflare) может блокировать большинство таких атак.
Проблема может быть вызвана легитимным трафиком, который сервер не в состоянии обработать.

## 9.5. Cᛘ₅: Отсутствие или неправильная настройка кэширования

### Суть
WordPress динамически генерирует страницы при каждом посещении, что требует выполнения PHP-кода и запросов к базе данных.
Отсутствие эффективных механизмов кэширования (кэширование страниц, объектов) приводит к тому, что сервер выполняет избыточную работу для обслуживания идентичного контента (Source 6.1).
Это значительно увеличивает потребление CPU и RAM на каждый запрос и снижает максимальную пропускную способность сайта.

### Оценка
70

### Доводы за
Правильное кэширование страниц значительно снижает нагрузку на бэкенд (PHP и MySQL) и уменьшает время загрузки (Source 6.1).
Кэширование снижает нагрузку на сервер, так как ему не нужно обрабатывать каждый запрос индивидуально (Source 6.2).
Высокая нагрузка из-за отсутствия кэширования может быстро привести к исчерпанию кредитов CPU (Cᛘ₁) или памяти (Cᛘ₂).

### Доводы против
Кэширование страниц не помогает, если узким местом является обработка некэшируемых запросов (например, панель администратора, оформление заказа в электронной коммерции).
Кэширование может маскировать основные проблемы неэффективности кода, не устраняя их.

## 9.6. Cᛘ₆: Неэффективность на уровне базы данных (MySQL)

### Суть
Неоптимальная конфигурация MySQL (например, слишком маленький размер буферного пула `innodb_buffer_pool_size`) приводит к частым операциям чтения с диска вместо оперативной памяти.
Плохо закодированные или ресурсоемкие плагины могут генерировать медленные SQL-запросы.
Медленные запросы потребляют ресурсы CPU, могут вызывать блокировки таблиц и приводить к накоплению очереди запросов на веб-сервере.

### Оценка
65

### Доводы за
Сложные плагины WordPress часто генерируют тяжелые SQL-запросы, которые могут потреблять много RAM (Source 1.4).
Конфигурация MySQL по умолчанию может не подходить для производственной нагрузки и требовать настройки для работы с ограниченной памятью.
Фоновые задачи (WP-Cron), выполняемые плагинами, могут создавать интенсивную периодическую нагрузку на базу данных.
Клиент прямо указал диагностику MySQL как одну из задач.

### Доводы против
Проблемы с базой данных чаще проявляются в виде медленной загрузки страниц, а не в виде полного простоя всего сервера.
Сбой MySQL часто является следствием общей нехватки памяти (Cᛘ₂), а не первопричиной.

## 9.7. Вердикт

Проблема (`P†`) с высокой вероятностью вызвана фундаментальной нехваткой ресурсов на инстансе AWS Lightsail для обработки возникающей нагрузки.

Наиболее вероятными механизмами отказа являются ограничения инфраструктуры AWS, специфичные для Lightsail.

Это проявляется через исчерпание квоты производительности ЦП (Cᛘ₁) и нехватку оперативной памяти (Cᛘ₂).

Периодические простои возникают, когда нагрузка (легитимный трафик, фоновые задачи или атаки) превышает возможности сервера.

Это приводит либо к дросселированию ЦП после исчерпания кредитов (Cᛘ₁), либо к активации OOM Killer из-за исчерпания памяти (Cᛘ₂).

Эти базовые ограничения усугубляются неоптимальной конфигурацией веб-сервера (Cᛘ₃), которая может позволять создавать слишком много процессов, ускоряя исчерпание памяти.

Внешние факторы (Cᛘ₄) и отсутствие оптимизации, такой как кэширование (Cᛘ₅) или настройка базы данных (Cᛘ₆), увеличивают базовую нагрузку и провоцируют достижение лимитов ресурсов.

Для определения точной причины необходимо начать с мониторинга метрик CPU Burst Capacity, использования RAM и Swap, а также анализа конфигурации Apache/MySQL и логов доступа.


 
~~~~~~

# 4. `T.md`
~~~~~~markdown
# 1.
## 1.1. 
`L_SOURCE` ≔ (Русский язык)

## 1.2. 
`L_TARGET` ≔ (English)

# 2.
## 2.1.
`D` ≔ (мой ответ `ꆜ`)

## 2.2.
Содержание `D`:
~~~markdown
I. Наиболее вероятные причины вашей проблемы:
1) CPU Burst Capacity
1.1) Суть
Инстансы AWS Lightsail функционируют на основе модели Burstable Performance.
Эта модель предоставляет низкий базовый уровень производительности ЦП с возможностью временного его превышения за счет накопленных кредитов (CPU Burst Capacity).
Если нагрузка на ЦП превышает базовый уровень, кредиты расходуются.
Когда кредиты исчерпаны, производительность ЦП принудительно ограничивается базовым уровнем (например, 10-30% от полной мощности vCPU).
Это ограничение (throttling) приводит к резкому замедлению обработки запросов или полной недоступности сайта.
1.2) Обоснование
Характер проблемы, описанный как «intermittent», идеально соответствует циклу исчерпания кредитов под нагрузкой и их медленного восстановления в простое.
Это самая распространенная причина внезапного падения производительности на инстансах Lightsail и EC2 T-серии.
Базового уровня производительности часто недостаточно для обслуживания производственного сайта WordPress под нагрузкой, особенно при выполнении фоновых задач или обработке пикового трафика.
2) Нехватка оперативной памяти и активация OOM Killer
2.1) Суть
Стек приложений (Apache, MySQL, PHP) потребляет оперативную память (RAM) для своей работы и обработки запросов.
Если совокупное потребление памяти превышает доступный объем физической RAM, операционная система начинает использовать дисковое пространство подкачки (Swap).
Интенсивное использование Swap (thrashing) резко снижает производительность из-за медленных операций дискового ввода-вывода.
Если физическая память и Swap исчерпаны, ядро Linux активирует механизм OOM (Out-Of-Memory) Killer.
OOM Killer принудительно завершает критические процессы (часто MySQL или Apache) для освобождения памяти, вызывая полный простой сайта.
2.2) Обоснование
Инстансы Lightsail, особенно на младших тарифах, имеют ограниченный объем RAM (например, 1GB или 2GB), которого часто недостаточно для стека LAMP под нагрузкой .
WordPress, особенно с большим количеством плагинов, может потреблять значительный объем памяти.
Нехватка памяти является типичной причиной сбоев, таких как ошибка подключения к базе данных, когда процесс MySQL завершается.
3) Неоптимальная конфигурация веб-сервера (Apache/PHP)
3.1) Суть
Настройки веб-сервера Apache, управляющие количеством одновременных процессов, не соответствуют доступным ресурсам сервера.
Если параметр `MaxRequestWorkers` (или `MaxClients`) установлен слишком высоко, сервер может создать слишком много дочерних процессов под нагрузкой.
Избыточное количество процессов приводит к чрезмерному потреблению оперативной памяти, усугубляя проблему пункта 2.
Если параметр установлен слишком низко, сервер не сможет обработать входящий трафик, что приведет к отказу в обслуживании.
3.2) Обоснование
Стандартные конфигурации Apache (особенно с `mod_php`) часто потребляют слишком много памяти для небольших серверов и могут быстро привести к OOM ошибкам.
Настройка баланса между параллелизмом и потреблением памяти критически важна на серверах с ограниченными ресурсами.
Если сервер начинает использовать Swap из-за слишком высокого `MaxRequestWorkers`, это убивает производительность.
4) Вредоносный трафик и боты (Brute-Force, XML-RPC, DDoS)
4.1) Суть
Автоматизированные атаки и агрессивные боты создают чрезмерную нагрузку на сервер, потребляя ресурсы CPU и памяти и вызывая отказ в обслуживании.
Основные векторы атак на WordPress включают попытки подбора паролей к `wp-login.php` и атаки через интерфейс `xmlrpc.php`.
4.2) Обоснование
WordPress является частой целью для автоматизированных атак.
Атаки на `xmlrpc.php` позволяют использовать функцию `system.multicall` для проверки сотен паролей в одном HTTP-запросе, что значительно увеличивает нагрузку и эффективность атаки.
Атаки могут использовать функцию Pingback для проведения DDoS-атак, перегружая сервер запросами.
Периодический характер проблемы хорошо соответствует паттернам атак или активности ботов.
Даже не очень интенсивные атаки могут перегрузить небольшой инстанс Lightsail.

II. What monitoring and alerting stack do you typically recommend for small production environments?
1) Нативный стек AWS (Метрики Lightsail + Агент CloudWatch)
1.1) Суть
Этот подход использует исключительно сервисы Amazon Web Services.
Встроенные метрики Lightsail автоматически собирают данные уровня гипервизора (использование ЦП, сеть, CPU Burst Capacity).
Для сбора метрик уровня операционной системы (память, диск) и журналов приложений (Apache, MySQL) требуется установка агента CloudWatch Agent на инстанс.
Данные централизуются в Amazon CloudWatch для визуализации, оповещения (CloudWatch Alarms) и анализа журналов (Logs Insights).
1.2) Достоинства
Это единственное решение, способное отслеживать CPU Burst Capacity (I.1) — наиболее вероятную причину вашей проблемы.
2) Высокодетализированный диагностический мониторинг (Netdata)
2.1) Суть
Netdata — это инструмент с открытым исходным кодом для мониторинга производительности систем в реальном времени.
Он устанавливается как легковесный агент на инстанс Lightsail.
Агент автоматически обнаруживает службы (Apache, MySQL) и собирает тысячи метрик с посекундной гранулярностью.
Данные доступны через локальный веб-интерфейс или бесплатный сервис Netdata Cloud.
2.2) Достоинства
Решение обеспечивает посекундную гранулярность, что бесценно для диагностики периодических всплесков производительности, характерных для I.2 и I.3.
Агент чрезвычайно легковесен, потребляя минимум ресурсов ЦП и памяти, что критически важно для сервера с ограниченными ресурсами.
Установка очень проста и не требует настройки для стандартных стеков LAMP благодаря автообнаружению.
Решение предлагает отличную, предварительно настроенную визуализацию всех компонентов системы и производительности приложений.
2.3) Недостатки
Решение не может отслеживать метрики уровня гипервизора, такие как AWS CPU Burst Capacity.
Оно в первую очередь ориентировано на устранение неполадок в реальном времени, а не на долгосрочный анализ исторических тенденций или централизованное управление журналами.
Возможности оповещения менее гибки по сравнению с CloudWatch или SaaS-платформами.
Дашборд может быть перегружен из-за огромного количества представленных метрик.

III. «What’s your approach to finding the root cause of recurring Apache/MySQL downtime?» 
1) Advanced Resource Monitoring
1.1) Суть
Этот метод направлен на получение детальных метрик, недоступных в стандартном мониторинге Lightsail, в первую очередь использования оперативной памяти (RAM) и файла подкачки (Swap).
Для этого требуется установка агента мониторинга, например AWS CloudWatch Agent, или использование внешних систем.
1.2) Достоинства
Мониторинг использования RAM и Swap абсолютно необходим для диагностики условий, приводящих к активации OOM Killer (I.2).
Метод также позволяет выявить падение производительности из-за интенсивного использования Swap (thrashing).
Метод заполняет критические пробелы в базовых метриках Lightsail, предоставляя полную картину состояния ресурсов сервера.
Исторические данные позволяют анализировать использование ресурсов, предшествующее простою, и выявлять тренды, такие как утечки памяти.
1.3) Недостатки
Метод требует установки и настройки дополнительного программного обеспечения (агентов) на сервере.
Использование расширенных метрик CloudWatch или внешних сервисов может повлечь дополнительные расходы.
Агенты мониторинга потребляют некоторое количество ресурсов сервера.

2) System Log Analysis
2.1) Суть
Этот метод включает изучение журналов ядра Linux (`dmesg`, `/var/log/kern.log`) и системных журналов (`/var/log/syslog`, `journalctl`) для выявления критических событий на уровне операционной системы.
Основное внимание уделяется поиску сообщений от механизма OOM (Out-Of-Memory) Killer и ошибок запуска служб.
2.2) Достоинства
Метод предоставляет прямые доказательства активации OOM Killer (пункт I.2).
Анализ позволяет точно определить, какой процесс был завершен и когда это произошло.
Сбор системных журналов оказывает минимальное влияние на производительность сервера.
Временные метки в журналах помогают установить точную хронологию событий.
2.3) Недостатки
Системные журналы фиксируют механизм отказа (например, OOM), но не первопричину исчерпания памяти (например, всплеск трафика).
Критические сообщения могут быть потеряны из-за неправильной настройки ротации логов или переполнения буфера ядра.
Для анализа требуются доступ по SSH и навыки работы с командной строкой Linux.

3) Basic Infrastructure Metrics Monitoring
3.1) Суть
Этот метод использует встроенные инструменты мониторинга AWS Lightsail для анализа ключевых показателей производительности инстанса.
Основное внимание уделяется метрикам использования ЦП (CPU Utilization) и оставшейся квоте взрывной производительности ЦП (CPU Burst Capacity).
3.2) Достоинства
Этот метод критически важен для диагностики I.1, так как исчерпание CPU Burst Capacity приводит к дросселированию ЦП на инстансах Lightsail (Source 10.1).
Метрики предоставляют объективные данные для подтверждения гипотезы о снижении производительности из-за ограничений инфраструктуры AWS.
Инструменты встроены в платформу AWS и не требуют настройки на самом сервере.
Анализ исторических данных позволяет выявить паттерны использования ЦП и частоту исчерпания квоты.
3.3) Недостатки
Стандартные метрики Lightsail не включают мониторинг использования оперативной памяти (RAM) и дискового пространства, что критично для диагностики I.2.
Метрики показывают факт исчерпания ресурсов ЦП, но не указывают, какие именно процессы вызвали это исчерпание.
Низкая гранулярность стандартных метрик может скрывать короткие пики нагрузки.

4) Application Log Analysis
4.1) Суть
Этот метод заключается в детальном изучении журналов веб-сервера (Apache `access.log` и `error.log`), базы данных (MySQL `error.log` и `slow_query_log`) и PHP.
Цель состоит в том, чтобы понять характер трафика, выявить ошибки приложений и определить неэффективные операции базы данных.
4.2) Достоинства
Анализ `access.log` критически важен для выявления всплесков трафика, активности ботов или DDoS-атак (I.4).
Он позволяет идентифицировать атаки на уязвимые точки WordPress (`xmlrpc.php`, `wp-login.php`), создающие чрезмерную нагрузку.
Журналы медленных запросов MySQL напрямую указывают на неэффективные SQL-запросы, потребляющие избыточные ресурсы (I.6).
Журналы ошибок Apache и PHP фиксируют сбои выполнения скриптов, такие как достижение лимита памяти PHP или таймауты.
4.3) Недостатки
Объем журналов доступа может быть очень большим, что затрудняет ручной анализ без специализированных инструментов агрегации.
Журналы приложений не предоставляют прямой информации об использовании системных ресурсов (CPU, RAM) на уровне инфраструктуры.
По умолчанию журналирование медленных запросов MySQL может быть отключено и требует настройки.

5) Stack Configuration Audit
5.1) Суть
Этот метод включает аудит настроек Apache, MySQL и PHP на предмет их соответствия доступным ресурсам сервера (RAM и CPU).
В Apache анализируются параметры модуля MPM, такие как `MaxRequestWorkers` или `MaxClients` (I.3).
В MySQL проверяются параметры, влияющие на потребление памяти, в первую очередь размер буферного пула (`innodb_buffer_pool_size`).

5.2) Достоинства
Неоптимальная конфигурация часто является ключевым фактором нестабильности на серверах с ограниченными ресурсами.
Правильная настройка Apache MPM может предотвратить создание избыточного количества процессов, ведущее к исчерпанию памяти (I.2).
Оптимизация конфигурации MySQL позволяет достичь баланса между производительностью базы данных и общим потреблением памяти системой.
Корректировка конфигурации может повысить стабильность без необходимости масштабирования оборудования.

5.3) Недостатки
Оптимальные настройки сильно зависят от характера нагрузки, который часто неизвестен на начальном этапе диагностики.
Метод требует экспертных знаний в области администрирования Apache и тюнинга производительности MySQL.
Внесение изменений в конфигурацию без понимания первопричины проблемы может усугубить ситуацию.

6) Application and Database Profiling
6.1) Суть
Этот метод заключается в использовании специализированных инструментов для анализа производительности WordPress на уровне кода и запросов к базе данных.
Используются плагины (например, Query Monitor) или внешние сервисы APM (Application Performance Monitoring) для выявления медленного PHP-кода и тяжелых SQL-запросов (I.5. I.6).
6.2) Достоинства
Профилирование позволяет точно определить конкретный плагин, тему или фрагмент кода, ответственный за высокое потребление ресурсов.
Метод позволяет выявить фундаментальные причины неэффективности приложения.
Оптимизация кода и запросов обеспечивает долгосрочное решение проблемы производительности.
6.3) Недостатки
Инструменты профилирования добавляют значительную нагрузку на сервер, что может усугубить проблемы со стабильностью во время анализа.
Внешние APM-решения могут быть сложными в настройке и дорогостоящими.
Профилирование не выявляет проблем на уровне инфраструктуры (I.1) или внешних атак (I.4).
Результаты профилирования требуют опыта разработки на WordPress для интерпретации и исправления.
~~~

# 3.
## 3.1.
`D2` ≔ (начальная часть `D`, переведённая с `L_SOURCE` на `L_TARGET`)

## 3.2.
Содержание `D2`:
~~~markdown
I. Most likely causes of your problem:
1) CPU Burst Capacity
1.1) Essence
AWS Lightsail instances operate on the Burstable Performance model.
This model provides a low baseline of CPU performance with the ability to temporarily exceed it by consuming the accumulated CPU Burst Capacity.
If the CPU load exceeds the baseline level, these credits are consumed.
When the credits are depleted, the CPU performance is forcibly limited to the baseline level (e.g., 10-30% of a full vCPU's power).
This limitation (throttling) leads to a sharp slowdown in request processing or the complete unavailability of the website.
1.2) Rationale
The nature of the problem, described as «intermittent», perfectly matches the cycle of credit exhaustion under load and their slow recovery during idle time.
This is the most common reason for sudden performance degradation on Lightsail and EC2 T-series instances.
The baseline performance is often insufficient to serve a production WordPress website under load, especially when running background tasks or handling peak traffic.
2) RAM shortage and OOM Killer activation
2.1) Essence
The application stack (Apache, MySQL, PHP) consumes Random Access Memory (RAM) for its operation and to process requests.
If the total memory consumption exceeds the available amount of physical RAM, the operating system begins to use swap space.
Intensive swap usage (thrashing) drastically reduces performance due to slow disk input/output operations.
If physical memory and swap space are exhausted, the Linux kernel activates the Out-of-Memory (OOM) Killer mechanism.
The OOM Killer forcibly terminates critical processes (often MySQL or Apache) to free up memory, causing a complete website outage.
2.2) Rationale
Lightsail instances, especially on lower-tier plans, have a limited amount of RAM (e.g., 1GB or 2GB), which is often insufficient for a LAMP stack under load.
WordPress, especially with a large number of plugins, can consume a significant amount of memory.
A memory shortage is a typical cause of failures, such as a database connection error when the MySQL process is terminated.
3) Suboptimal web server configuration (Apache/PHP)
3.1) Essence
The Apache web server settings that control the number of concurrent processes do not match the available server resources.
If the `MaxRequestWorkers` (or `MaxClients`) parameter is set too high, the server can create too many child processes under load.
An excessive number of processes leads to excessive consumption of RAM, exacerbating the problem from point 2.
If the parameter is set too low, the server will not be able to handle the incoming traffic, which will lead to a denial of service.
3.2) Rationale
Standard Apache configurations (especially with mod_php) often consume too much memory for small servers and can quickly lead to OOM errors.
Tuning the balance between parallelism and memory consumption is critically important on resource-constrained servers.
If the server begins to use Swap due to a MaxRequestWorkers value that is too high, it severely degrades performance.
4) Malicious traffic and bots (Brute-Force, XML-RPC, DDoS)
4.1) Essence
Automated attacks and aggressive bots create excessive load on the server, consuming CPU and memory resources and causing a denial of service.
The main attack vectors on WordPress include brute-force password attacks on `wp-login.php` and attacks via the `xmlrpc.php` interface.
4.2) Rationale
WordPress is a frequent target for automated attacks.
Attacks on `xmlrpc.php` leverage the `system.multicall` function to check hundreds of passwords in a single HTTP request, which significantly increases the load and the effectiveness of the attack.
Attacks can utilize the Pingback feature to conduct DDoS attacks, overwhelming the server with requests.
The intermittent nature of the problem corresponds well with the patterns of attacks or bot activity.
Even low-intensity attacks can overload a small Lightsail instance.

II. What monitoring and alerting stack do you typically recommend for small production environments?
1) Native AWS Stack (Lightsail Metrics + CloudWatch Agent)
1.1) Essence
This approach uses exclusively Amazon Web Services.
Built-in Lightsail metrics automatically collect hypervisor-level data (CPU utilization, network, CPU Burst Capacity).
Collecting operating system-level metrics (memory, disk) and application logs (Apache, MySQL) requires the installation of the CloudWatch Agent on the instance.
Data is centralized in Amazon CloudWatch for visualization, alerting (CloudWatch Alarms), and log analysis (Logs Insights).
~~~

# 4.
## 4.1.
`F` ≔ (фрагмент `D`)

## 4.2.
Содержание `F`:
~~~markdown
6.3) Недостатки
Инструменты профилирования добавляют значительную нагрузку на сервер, что может усугубить проблемы со стабильностью во время анализа.
Внешние APM-решения могут быть сложными в настройке и дорогостоящими.
Профилирование не выявляет проблем на уровне инфраструктуры (I.1) или внешних атак (I.4).
Результаты профилирования требуют опыта разработки на WordPress для интерпретации и исправления.
~~~

# 5. `᛭T`
Переведи `F` на `L_TARGET`, с учётом:
- контекста `D`
- `D2`: уже переведённой части `D`
- `᛭O`

# 6. Правила перевода / Общие
## 6.1.
Переводи именно в той стилистике, как написано на `L_SOURCE`.
Не делай перевод более вежливым, чем оригинал.

## 6.2.
Те предложения, которые сейчас полностью на `L_TARGET` — оставь без изменения.

## 6.3.
### 6.3.1.
Не используй Markdown: только plain text.
### 6.3.2.
При этом можно и нужно использовать то форматирование, которое уже есть в оригинале: его не убирай.

## 6.4.
Форматируй перевод в точности как оригинал. 
В частности:
*) каждый абзац должен содержать ровно одно предложение
*) между абзацами не должно оставаться пустых строк.
*) кавычки используй те же, что и в оригинале: «» и ``.

## 6.5.
Не используй жаргон.
Вместо этого используй официальные термины.
### 6.5.1.
В частности, фразы в кавычках используй только в том случае, когда они являются точными цитатами.
Не используй фразы в кавычках для применения жаргонных фраз.
Например, следующий фрагмент текста недопустим, потому что там используется жаргонная фраза «пролетел»: 
```
Например, код, который пушит данные о покупке, подключён асинхронно и загружается с небольшой задержкой, а триггер уже «пролетел».
```

## 6.6.
При обсуждении программного обеспечения используй точные официальные термины на английском языке: именно в том виде, как они указаны в официальной англоязычной документации к этому программному обеспечению.

## 6.7.
### 6.7.1.
Не используй самовольно «you need» и другие подобные обращённые к `ꆜ` фразы, перекладывающие действия на него, если в исходном тексте явно не сказано подобное (типа «вы должны»).
Помни: я пишу `ꆜ`.
Делать в любом случае буду я, а не `ꆜ`.
Именно за то, что описываемую работу делать буду я, `ꆜ` мне будет платить.
Моя задача — показать мою компетенцию и предложить `ꆜ` решение его проблемы, а не переложить решение проблемы на `ꆜ`.

### 6.7.2. Пример
### 6.7.2.1. Пример `F`
```text
Установить и использовать готовый модуль для импорта структурированных данных в Magento.
```
### 6.7.2.2. Примеры допустимого перевода `F`
### 6.7.2.2.1.
```text
Install a ready-made module for importing structured data into Magento.
```
### 6.7.2.2.2.
```text
Installing a ready-made module for importing structured data into Magento.
```
### 6.7.2.3. Пример недопустимого перевода `F`
```text
You need to install a ready-made module for importing structured data into Magento.
```
### 6.7.2.
Не переводи фразы подобные §6.7.2.1, начиная их словом «To».
Пример недопустимого перевода §6.7.2.1:
```text
To install a ready-made module for importing structured data into Magento.
```

### 6.7.3. «It is necessary»
#### 6.7.3.1.
Иногда в контексте §6.7.1 уместно при переводе использовать конструкцию «it is necessary»: она нейтральна и не перекладывает работу на `ꆜ`.
#### 6.7.3.2. Пример `F`
```text
Лучшую из них я намеренно описываю последней (пункт 7): чтобы понять, что она — лучшая, надо сначала увидеть недостатки других.
```
### 6.7.2.3. Примеры допустимого перевода §6.7.3.2
```text
The best of them I intentionally describe last (point 7): to understand why it is the best, it is necessary to first see the disadvantages of the others.
```

## 6.8.
### 6.8.1.
Порой в исходном тексте термины на языке исходного текста дублируются (обычно, в круглых скобках) переводом этих терминов на язык перевода.
### 6.8.2.
Пример:
```text
Реализовать механизм сбора явной обратной связи (Explicit Feedback) в Chatbot Widget.
```
В примере для понятия «явной обратной связи» уже дан правильный перевод этого термина на английский язык: «Explicit Feedback».
### 6.8.3.
Когда ты видишь такие случаи как в §6.8.2, то не надо при переводе дублировать термин.
### 6.8.4.
Например, так переводить текст примера §6.8.2 неправильно:
```text
Implement the mechanism for collecting explicit feedback (Explicit Feedback) in the Chatbot Widget. 
```
В этом неправильном переводе термин «explicit feedback» дублируется.
### 6.8.5.
Правильный перевод в случаях типа §6.8.2 подразумевает убирание дубликата, например:
```text
Implement the mechanism for collecting explicit feedback in the Chatbot Widget. 
```
## 6.9. Правила перевода URL
### 6.9.1.
Если в `F` URL не оформлен посредством синтаксиса Markdown (`[текст URL](URL)`), то тебе запрещено добавлять этот синтаксис.
Вместо этого ты обязан включить URL в перевод в его исходном виде, без добавления `[]()`.
### 6.9.2. Пример
### 6.9.2.1. Пример `F`
```text
В Великобритании она введена в действие посредством «The National Insurance and Industrial Injuries (Turkey) Order, 1961» (S.I. 1961/584): https://www.legislation.gov.uk/uksi/1961/584  
``` 
### 6.9.2.2. Пример правильного перевода `F`
```text
In the United Kingdom, it was given effect by «The National Insurance and Industrial Injuries (Turkey) Order, 1961» (S.I. 1961/584): https://www.legislation.gov.uk/uksi/1961/584
``` 
### 6.9.2.3. Пример неправильного перевода `F`
```text
In the United Kingdom, it was given effect by «The National Insurance and Industrial Injuries (Turkey) Order, 1961» (S.I. 1961/584): [https://www.legislation.gov.uk/uksi/1961/584](https://www.legislation.gov.uk/uksi/1961/584)
``` 
Как видишь, в неправильном переводе URL захерачен в Markdown посредством `[]()`, хотя `F` так не сделано.

## 6.10.
При переводе важное значение имеет `D2`: уже переведённая часть `D`.
Используй её, в частности, чтобы единообразно переводить термины.
Чтобы не получилось так, что в `D2` используется один вариант перевода термина, а в твоём переводе `F` — другой вариант перевода того же самого термина.

## 6.11.
Все числительные должны писаться цифрами (а не прописью).

# 7. Правила перевода / На английский язык
## 7.1.
Не используй сокращения типа «don't». Все подобные фразы пиши полностью: «do not».

## 7.2.
Никогда не переводи понятие «сайт» / «веб-сайт» как «site». 
Вместо этого используй форму «website»: это является более профессиональным.

## 7.3.
### 7.3.1.
Никогда не переводи понятие «пункт нумерованного списка» как «item».
### 7.3.2.
Для пунктов нормативных актов вместо «item» используй тот термин, который принято использовать в данном юридическом контексте: «paragraph», «section» и т.п.
### 7.3.3.
Для всех остальных текстов переводи «item» как «point».

## 7.4.
Вместо «for example» в тексте на английском языке используй «e.g.».
При этом не забывай, что в начале предложения эта фраза должна начинатся с заглавной буквы: «E.g.»
~~~~~~
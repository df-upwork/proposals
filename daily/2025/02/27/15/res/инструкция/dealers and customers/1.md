Ниже приводится пошаговая инструкция на русском языке (с использованием точных официальных терминов на английском языке из документации), которая описывает, как корректно сопоставлять и синхронизировать записи типа «dealers» и «customers» из Salesforce с записями в Microsoft Dynamics 365 Business Central (далее — Business Central) и Microsoft Dynamics 365 Sales (далее — Sales 365). Инструкция учитывает, что в Salesforce уже существуют две категории записей — «dealers» и «customers» — и их требуется отразить соответствующим образом в Business Central и в Sales 365.

1) Определить модель хранения «dealers» и «customers» в Salesforce

1.1) Проверить, на каком уровне в Salesforce хранятся «dealers» и «customers».  
Возможно, это отдельные типы записей (Record Types) в объекте «Account» или другое пользовательское решение.  
1.2) Убедиться, что у каждой записи есть уникальный идентификатор (например, поле `Id` или внешний ключ), позволяющий найти соответствующую запись в интеграционных процессах.  

2) Настроить структуру данных в Business Central

2.1) В Business Central определить, как хранить «dealers» и «customers».  
В большинстве случаев «dealers» и «customers» могут храниться в таблице `Customer`, но с разными значениями в поле «Customer Posting Group» или ином поле, помогающем отличать дилера от конечного покупателя.  
2.2) Если в Business Central необходимо использовать разные типы записей для «dealers» и «customers», возможно создание дополнительного пользовательского поля (например, `AccountType`) или применение стандартного поля (например, `Customer Disc. Group`) для различия категорий.  
2.3) Убедиться, что данные о клиентах (название компании, контактное лицо, адрес, номер телефона и т. д.) согласуются по структуре с тем, что есть в Salesforce.

3) Настроить структуру данных в Sales 365

3.1) В Sales 365 определить, следует ли использовать одну сущность «Account» для хранения и «dealers», и «customers», или же нужны отдельные сущности (если бизнес-процесс предусматривает раздельный учёт).  
3.2) Если планируется единая сущность «Account» с разным признаком (например, поле `Account Type`), создать или настроить это поле через «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  
3.3) Опубликовать изменения, чтобы в Sales 365 появилось необходимое поле (например, `Account Type` = «Dealer» или «Customer»).

4) Определить соответствие (mapping) полей между Salesforce, Business Central и Sales 365

4.1) Подготовить таблицу сопоставления (mapping).  
Например, указать столбцы «Salesforce Field», «Business Central Field», «Sales 365 Field» и описать, какие значения должны передаваться.  
4.2) Внести в эту таблицу различные признаки:  
• «dealers» → в Business Central может быть «Customer Posting Group = DEALER», в Sales 365 — «Account Type = Dealer».  
• «customers» → в Business Central может быть «Customer Posting Group = RETAIL», в Sales 365 — «Account Type = Customer».  

5) Настроить передачу данных из Salesforce

5.1) Решить, какой механизм будет использоваться для передачи записей:  
• «Salesforce Data Loader» или «Workbench» для экспортно-импортных операций (формат CSV или Excel).  
• «Power Automate» (коннектор «Salesforce») для более гибкой и регулярной интеграции.  
5.2) При необходимости настроить фильтрацию по типу записи (например, «Account Type» = «Dealer» или «Customer») и сохранять эту информацию в специально отведённых полях.  

6) Настроить интеграцию с Business Central и Sales 365

6.1) Использовать Microsoft Power Automate с коннекторами «Business Central» и «Dataverse» (или «Dynamics 365») для регулярной синхронизации.  
6.2) Создать «Scheduled cloud flow» или «Instant cloud flow» (в зависимости от сценария) для считывания записей из Salesforce, а затем сопоставлять их с записями в Business Central и Sales 365.  
• Например, шаг 1: «Salesforce» → «List records» (выбрать объект «Account»).  
• Шаг 2: «Apply to each» для прохода по всем записям.  
• Шаг 3: «Business Central - List records» (таблица `Customer`) с фильтром по идентификатору или названию, чтобы найти соответствующую запись.  
• Шаг 4: «Dataverse (Update a row)» для сущности «Account» в Sales 365, чтобы установить нужный признак («Dealer» или «Customer»).  

7) Создать поля для идентификаторов в Business Central и Sales 365

7.1) Для синхронизации может потребоваться поле, где хранится `Salesforce Id` или внешний номер (например, `ExternalId`).  
7.2) В Business Central поле может называться `SF_Account_Id` (текст), а в Sales 365 — `SalesforceId`.  
7.3) Наполнить эти поля при первой миграции (например, через CSV-импорт) или в «Flow» Power Automate, чтобы в дальнейшем использовать их для точной идентификации.

8) Миграция (при необходимости) и проверка связей

8.1) Если требуется одноразовая миграция исторических записей, использовать CSV-экспорт из Salesforce. В этом файле будет признак «dealers» или «customers» (например, поле `Type` или `Record Type`).  
8.2) Загрузить этот CSV в Business Central через «RapidStart Services» или вручную через «Configuration Packages».  
8.3) Параллельно или после этого загрузить CSV в Sales 365 через «Data Import Wizard» или «Dataverse import», сопоставив поля, в том числе признак «Dealer/Customer».

9) Проверка корректности записи «dealers» и «customers»

9.1) После интеграции или миграции открыть несколько записей в Business Central:  
• Убедиться, что поля (например, `Customer Posting Group`) отражают нужное значение (DEALER или RETAIL).  
9.2) В Sales 365 проверить несколько записей «Account» и убедиться, что поле «Account Type» или другое используемое поле имеет значение «Dealer» или «Customer» в соответствии с исходными данными из Salesforce.  
9.3) Убедиться, что имена, контактная информация и другие сопоставленные поля корректно перенесены.

10) Поддержка и обслуживание интеграции

10.1) В случае использования Power Automate для регулярного обмена, настроить «Recurrence» (частоту обновлений) и отслеживать логи выполнения (в разделе «My flows» → «Run History»).  
10.2) При изменении логики в Salesforce (например, переименование «dealers» во что-то другое) или при появлении дополнительных типов записей, обновить маппинг и поля в Business Central и Sales 365.  
10.3) Документировать конечную схему: какие поля в Salesforce соответствуют каким полям в Business Central и Sales 365, как именно отличать «dealers» и «customers». Хранить эту документацию в доступном месте для будущей поддержки.

Результат такой настройки: «dealers» и «customers», изначально хранящиеся в Salesforce, будут регулярно сопоставлены и синхронизированы с записями в Business Central и Sales 365, при этом сохраняется различие между дилерами и конечными клиентами на уровне полей, групп или типов записей.
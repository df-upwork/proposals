https://g.co/gemini/share/196de1dfd0d4

1.  Перенумеровать существующий раздел 5 («Выполнить тестовый запуск (Test Run)») и все его подразделы (5.X). Раздел 5 должен стать разделом 6 (и, соответственно, 5.X должны стать 6.X).

2.  Добавить новый раздел 5 непосредственно перед новым разделом 6:

<!-- end list -->

```markdown
5) Обеспечение безопасности тестового запуска (Safety Check)
Цель: Предотвратить случайное повреждение, модификацию, удаление или дублирование производственных данных при запуске унаследованного конвейера.
Обоснование: Запуск конвейера без полного понимания его логики и конфигурации приемников данных (Sinks) несет критические риски для целостности данных.

5.1) Идентифицировать операции модификации данных и приемники (Sinks).
Проанализировать все действия (Activities) в конвейере, которые потенциально могут изменять данные во внешних системах:
5.1.1) `Copy activity` (изучить вкладку «Sink»).
5.1.2) `Data Flow` (изучить все Sinks внутри потока данных).
5.1.3) `Stored Procedure activity` и `Script activity` (могут выполнять DML/DDL операции: INSERT, UPDATE, DELETE, TRUNCATE).
5.1.4) `Delete activity`.
5.1.5) `Web`, `Webhook`, `Custom activities` (если они вызывают API для модификации данных).

5.2) Проанализировать целевые системы.
Для каждого действия из п. 5.1 определить, куда именно будут записываться или где будут удаляться данные. Изучить конфигурацию целевых Datasets и Linked Services. Определить, указывают ли они на производственные (Production) системы.

5.3) Применить стратегию безопасного запуска.
Если конвейер может повлиять на производственные данные, необходимо применить одну или несколько мер безопасности. Методы приведены в порядке предпочтения.

5.3.1) Стратегия 1: Перенаправление записи в безопасное место (Наиболее надежный метод).
5.3.1.1) Через параметры: Если конфигурация приемника (путь, имя таблицы, строка подключения) параметризована (см. п. 3.5), убедиться, что при запуске (п. 6.2) будут использованы значения, указывающие на тестовую среду (например, папка "test", схема "dev").
5.3.1.2) Через временное изменение конфигурации: Если параметры не используются, временно изменить настройки Datasets или Linked Services, чтобы они указывали на тестовую среду. **Важно:** Не сохранять и не публиковать (Publish) эти изменения.

5.3.2) Стратегия 2: Использование механизмов изоляции и контроля.
5.3.2.1) Для Data Flows: Временно заменить целевой Sink на «Cache Sink». Это позволит просмотреть результаты (Data Preview) без физической записи в хранилище. (Требует активной сессии Data Flow Debug).
5.3.2.2) Для Activities на холсте: Использовать точки останова (Breakpoints). Установить точку останова (кликнуть на красный кружок в правом верхнем углу activity) на действии, выполняющем запись. При запуске в режиме «Debug» конвейер приостановится *перед* его выполнением, позволяя проверить входные данные (Input) и принять решение о продолжении.
5.3.2.3) Деактивация действий: Если анализ записи данных не является целью теста, временно деактивировать (кнопка «Deactivate» на верхней панели) действия, выполняющие модификацию.

5.3.3) Стратегия 3: Минимизация воздействия (Использовать с осторожностью).
5.3.3.1) Ограничение объема данных: Открыть «Debug Settings» и установить «Row limit» на малое значение (например, 10-100).
**Предупреждение:** Row limit ограничивает чтение из источника, но не обеспечивает полной безопасности, если конвейер выполняет операции, не зависящие от объема данных (например, TRUNCATE TABLE или удаление файлов).

5.4) Условие отмены запуска (Go/No-Go Decision).
Если ни один из методов п. 5.3 не может гарантировать безопасность производственных данных, НЕ выполнять запуск (раздел 6). В этом случае требуется клонирование (Clone) и модификация конвейера для тестирования в изолированной среде.
```

3.  Изменить текст пункта 6.1 (бывший 5.1):
    Было:

<!-- end list -->

```markdown
5.1) Находясь на вкладке «Author» в редакторе целевого конвейера, начать выполнение в режиме отладки, нажав кнопку «Debug» на верхней панели инструментов.
```

Стало:

```markdown
6.1) Только убедившись, что меры безопасности из раздела 5 соблюдены и принято положительное решение о запуске (п. 5.4), начать выполнение. Находясь на вкладке «Author» в редакторе целевого конвейера, нажать кнопку «Debug» на верхней панели инструментов.
```

4.  Изменить текст пункта 6.2 (бывший 5.2):
    Было:

<!-- end list -->

```markdown
5.2) В открывшейся панели (обычно называется «Pipeline Debug» или «Pipeline run parameters») ввести значения для параметров, определённые на пункте 4.3 выше.
```

Стало:

```markdown
6.2) В открывшейся панели (обычно называется «Pipeline Debug» или «Pipeline run parameters») ввести значения для параметров. Использовать значения, определённые на пункте 4.3, скорректированные с учетом мер безопасности из пункта 5.3.1.1 (если применялось перенаправление через параметры).
```

5.  Изменить текст пункта 6.5 (бывший 5.5) и добавить подпункты:
    Было:

<!-- end list -->

```markdown
5.5) Наблюдать за ходом выполнения на вкладке «Output» под холстом конвейера. 
Проверить входные (Input) и выходные (Output) данные для каждого Activity после его завершения, чтобы убедиться, что параметры были интерпретированы корректно.
```

Стало:

```markdown
6.5) Наблюдать за ходом выполнения на вкладке «Output» под холстом конвейера.
6.5.1) Если используются точки останова (п. 5.3.2.2), внимательно проверить входные данные (Input) для приостановленного activity перед продолжением выполнения.
6.5.2) После завершения выполнения, в первую очередь проверить входные данные (Input) для действий, модифицирующих данные (идентифицированных в п. 5.1). Убедиться, что они указывают на корректную (тестовую) среду.
6.5.3) Проверить входные (Input) и выходные (Output) данные для остальных Activity, чтобы убедиться, что параметры были интерпретированы корректно.
```
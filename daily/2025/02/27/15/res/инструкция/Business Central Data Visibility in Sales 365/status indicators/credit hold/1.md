Ниже представлена пошаговая инструкция, как сделать статус «credit hold» из Microsoft Dynamics 365 Business Central доступным в Microsoft Dynamics 365 Sales с помощью регулярной синхронизации через Power Automate. Все названия элементов интерфейса и объектов указаны на английском языке в соответствии с официальной документацией, а описательная часть дана на русском языке.

1) Подготовка в Microsoft Dynamics 365 Business Central

1.1) Проверить, в какой таблице Business Central хранится статус «credit hold».  
Обычно в Business Central статус кредитной блокировки хранится в таблице клиентов, например в поле `Blocked` (или аналогичном поле, указывающем, что клиент находится под кредитным лимитом или блокировкой).  
Если используется пользовательское поле, убедиться, что оно доступно через стандартный «Business Central» connector в Power Automate.

1.2) Убедиться, что поле «credit hold» (например, `Blocked`) доступно для чтения.  
При необходимости включить доступ к нужному полю в настройках Business Central (например, в «Web Services» или «API Pages»).

2) Подготовка в Microsoft Dynamics 365 Sales

2.1) Создать дополнительное поле в сущности «Account» (или «Contact» — в зависимости от того, как ведутся клиенты в Sales) для хранения статуса «credit hold».  
Перейти в «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  
Открыть сущность «Account» и добавить новое поле (например, `CreditHoldStatus`).  
Тип поля — «Two Options», «Option Set» или «Text» в зависимости от логики отображения.

2.2) Сохранить и опубликовать изменения в решении (Solution).  
После сохранения полей и форм (Forms) опубликовать настройки, чтобы новое поле было доступно в интерфейсе Sales и через API.

3) Создание потока в Power Automate для переноса данных

3.1) Определить частоту передачи данных.  
Если статус «credit hold» необходим в режиме близком к реальному времени, подойдёт тип «Instant cloud flow» или «Automated cloud flow» с триггером «When an item is modified» (Business Central).  
Если достаточно обновлять статус раз в день (или несколько раз в день), можно настроить «Scheduled cloud flow».

3.2) Создать новый поток (Flow) в Power Automate.  
В разделе «Create» выбрать нужный тип потока (например, «Scheduled cloud flow»).

3.3) Добавить шаг (Trigger) из «Business Central».  
В списке коннекторов выбрать «Business Central».  
Если используется «Scheduled cloud flow», первый шаг будет «Recurrence», а затем «List records» (Business Central) для получения списка клиентов.  
Если используется «When an item is modified» (Business Central), при изменении записи о клиенте в BC поток будет запускаться автоматически.

3.4) Настроить получение полей из таблицы клиентов.  
В действии «List records» или «When an item is modified» (Business Central) указать наименование окружения (Environment) и конкретную таблицу (Table), например `Customers`.  
Убедиться, что среди выбираемых полей есть `Blocked` или иное поле, отражающее «credit hold».

4) Обновление статуса в Microsoft Dynamics 365 Sales

4.1) Добавить действие «Dataverse» для сущности «Accounts» в Dynamics 365 Sales.  
В Power Automate после шага получения данных из Business Central добавить действие «Add a new row», «Update a row» или «Upsert a row» (в зависимости от логики).  
Название действия может отличаться: «Add a new row (Preview)» или «Update a row (V3)».

4.2) Настроить сопоставление (Mapping) полей.  
Задать поле, в котором хранится идентификатор клиента или связанный ключ (например, `AccountNumber` или другое уникальное поле, совпадающее в Business Central и Sales).  
В поле `CreditHoldStatus` (созданное в п. 2.1) передавать значение `Blocked` из Business Central. Если требуется преобразование (например, строка «Blocked» в булеву логику), использовать условия или формулы в Power Automate.

4.3) Уточнить стратегию обновления.  
Если клиент уже существует в Dynamics 365 Sales, обновить его запись.  
Если клиента нет, возможно понадобится предварительно создать запись — тогда логика в Power Automate должна проверять существование клиента (действие «List rows», поиск по полю `AccountNumber`) и либо обновлять, либо создавать новый «Account».

5) Тестирование

5.1) Запустить поток вручную или дождаться расписания (если поток «Scheduled») и проверить результаты.  
Открыть нескольких клиентов в Microsoft Dynamics 365 Sales, убедиться, что поле `CreditHoldStatus` заполнилось правильным значением.

5.2) При необходимости настроить поля интерфейса.  
В «Account» форме добавить созданное поле `CreditHoldStatus`. Проверить, что при изменении «Blocked» в Business Central поле в Sales обновляется.

5.3) Проверить журналы (Runs) в Power Automate.  
Убедиться, что нет ошибок в потоке, и данные передаются без сбоев.

6) Документирование и сопровождение

6.1) Задокументировать все настройки и маппинг полей.  
Составить схему: какое поле из Business Central (например, `Blocked`) соответствует какому полю в Dynamics 365 Sales (например, `CreditHoldStatus`), и при каких условиях записи создаются или обновляются.

6.2) Настроить мониторинг.  
При необходимости включить уведомления о сбоях в Power Automate, чтобы оперативно узнавать, если поток не смог обновить статусы.

6.3) При расширении логики (например, добавлении «past due», YTD-суммы покупок и других индикаторов статуса клиента) дополнять тот же поток или создавать отдельные потоки в Power Automate.

Результат: статус «credit hold» из Business Central регулярно синхронизируется и отображается в Microsoft Dynamics 365 Sales, что обеспечивает единую картину кредитного статуса клиента для команды продаж.
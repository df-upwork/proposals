Ниже приведён пример на SuiteScript 2.x, демонстрирующий, как можно:

1. Подключиться к SFTP,  
2. Скачать файлы (например, CSV),  
3. Создать соответствующие объекты файлов (N/file.create) в NetSuite File Cabinet,  
4. Сохранить их в нужную папку.

### Пример кода (Scheduled Script)

```javascript
/**
 * @NApiVersion 2.x
 * @NScriptType ScheduledScript
 */
define(['N/sftp', 'N/file', 'N/log', 'N/runtime'],
function(sftp, file, log, runtime) {

    function execute(context) {
        try {
            // 1) Создаём подключение к SFTP
            // Обратите внимание, что для аутентификации может потребоваться privateKey + passphrase,
            // passwordGuid или комбинация методов. Ниже просто пример со схемой user/password.

            var connection = sftp.createConnection({
                url: 'your-sftp.server.com',     // хост или URL вашего SFTP
                port: 22,                       // при необходимости указывайте, если нестандартный
                username: 'your_sftp_username', // имя пользователя
                passwordGuid: '*******',        // если используется сохранённый passwordGuid,
                                               // либо используйте password: 'plainTextPass'
                directory: '/path/to/inbound'   // папка на SFTP, откуда скачиваем файлы
                // privateKey: 'ScriptID-of-your-key-file', // вариант, если нужно подключение по ключу
                // passphrase: '********',                  // если ключ защищён паролем
            });

            // 2) Смотрим список файлов в директории
            var fileList = connection.list({
                path: '/path/to/inbound'
            });

            // 3) Указываем ID целевой папки (NetSuite File Cabinet folder)
            // Получить ID папки можно в UI (Documents > File Cabinet),
            // щёлкнув по нужной папке и посмотрев URL (например, folder=1234).
            var targetFolderId = 1234;

            // 4) Перебираем список и обрабатываем нужные файлы
            fileList.forEach(function (remoteFile) {
                // Проверим, что нас интересуют, например, только CSV-файлы.
                // Можно настроить нужные фильтры (по имени, расширению и т.д.).
                if (!remoteFile.name.endsWith('.csv')) {
                    log.debug({
                        title: 'Пропускаем файл',
                        details: 'Файл не является CSV: ' + remoteFile.name
                    });
                    return;
                }

                log.audit({
                    title: 'Обнаружен файл',
                    details: 'Имя на SFTP: ' + remoteFile.name
                });

                // 5) Скачиваем файл как строку (если это текстовый формат).
                // Если файл бинарный (PDF, изображения и т.п.), нужно обрабатывать `encoding: file.Encoding.BASE_64` и т. д.
                var fileContents = connection.download({
                    path: '/path/to/inbound/' + remoteFile.name
                });

                // fileContents теперь содержит текст файла (CSV, XML, JSON и т.д.).
                // Можно сразу парсить, либо сначала сохранить в File Cabinet, а потом читать.

                // 6) Создаём файл внутри NetSuite
                // Параметры fileType зависят от формата вашего файла:
                // PLAINTEXT, CSV, XMLDOC, JSON, и т.д.
                // (см. enum file.Type в документации NetSuite)
                var nsFile = file.create({
                    name: remoteFile.name,        // Как будет называться файл в File Cabinet
                    fileType: file.Type.PLAINTEXT, 
                    contents: fileContents,
                    folder: targetFolderId        // ID папки в File Cabinet
                });

                // 7) Сохраняем файл и получаем его внутренний ID
                var newFileId = nsFile.save();
                log.audit({
                    title: 'Файл сохранён',
                    details: 'File ID: ' + newFileId
                });

                // === На этом этапе файл уже лежит в NetSuite File Cabinet ===

                // 8) (Необязательно) Парсим contents и обновляем заказы
                // пример простого CSV-разбора (если структура строк предсказуема)
                /*
                var lines = fileContents.split('\n');
                lines.forEach(function(line) {
                    var columns = line.split(',');
                    // columns[0] - например, номер заказа
                    // columns[1] - статус
                    // ...
                    //  -> найти нужный Sales Order, обновить поля
                });
                */

                // 9) (Необязательно) Удаляем или переименовываем файл на SFTP после успешной загрузки,
                // чтобы не обрабатывать его повторно. Например:
                connection.remove({
                    path: '/path/to/inbound/' + remoteFile.name
                });

                // Или можно переместить в другую директорию:
                /*
                connection.move({
                    source: '/path/to/inbound/' + remoteFile.name,
                    destination: '/path/to/archive/' + remoteFile.name
                });
                */
            });
        } catch (e) {
            log.error({
                title: 'Ошибка SFTP-загрузки',
                details: e
            });
        }
    }

    return {
        execute: execute
    };
});
```

### Основные моменты, на которые стоит обратить внимание

1. **Параметры аутентификации:**  
   - В примере выше показана схема с `username/passwordGuid`. Вы можете использовать `privateKey + passphrase` или другие способы аутентификации.  
   - Все эти данные настраиваются в NetSuite (Setup > Company > NetSuite Account Center или Secure Credentials), чтобы не хранить их в коде открыто.

2. **Тип файла (fileType):**  
   - Если файлы текстовые (CSV, XML, JSON), можно использовать `file.Type.PLAINTEXT` или `file.Type.CSV`, `file.Type.XMLDOC` и т.д.  
   - Для бинарных файлов (PDF, изображения) может потребоваться `file.Type.PDF`, `file.Type.PNG`, `file.Type.JPG` и т.п.  
   - В случае бинарных файлов также может понадобиться указать encoding (например, `file.Encoding.BASE_64`).

3. **Folder (папка) в File Cabinet:**  
   - Убедитесь, что у вас есть права (permissions) на запись в нужную папку.  
   - ID папки можно найти, зайдя в **Documents > File Cabinet** и кликнув на нужную директорию. В URL будет параметр `folder=XXXX`.

4. **Обработка содержимого:**  
   - Если вам нужно сразу же «на лету» обновлять заказы, можно парсить `fileContents` прямо в скрипте (см. пример с CSV).  
   - Если формат сложнее (XML), используйте `XML.parse(...)` (через `N/xml`) или собственные парсеры.  
   - Для JSON есть `JSON.parse(fileContents)`.

5. **Удаление или перемещение обработанных файлов на SFTP:**  
   - Чтобы не обрабатывать файлы повторно, удобнее их либо удалять (`connection.remove()`), либо перемещать в другую папку (`connection.move()`).

6. **Тестирование и расписание:**  
   - После того как вы написали скрипт, загрузили его в **File Cabinet** и создали запись **Script** (Customization > Scripting > Scripts), перейдите в **Script Deployments**, создайте **Script Deployment** и задайте расписание (Schedule) для запуска.  
   - Рекомендуется сначала протестировать разовый запуск (через **Save & Execute** или **Execute Now**), чтобы убедиться, что подключение к SFTP и сохранение файлов действительно работают.

7. **Логирование:**  
   - Используйте `log.debug`, `log.audit`, `log.error` для отладки и мониторинга работы скрипта.  
   - В случае ошибок обращайте внимание на журнал (Logs) развернутого скрипта (Script Deployment).

---

Таким образом, **ключевой метод** — это использование `N/sftp` для **скачивания** и `N/file.create` для **создания** (а затем `save()`) файла в NetSuite File Cabinet. После этого вы можете либо сохранить исходный файл для архива, либо сразу же «на лету» парсить его и обновлять данные (заказы, транзакции, кастомные записи) в NetSuite.
1) For convenient filtering of leads during their export from Salesforce, I recommend creating a «Formula Field», for example: `IF(BEGINS(AccountNumber , "DLR-" ), "Dealer", "Customer")`.
This will make it unnecessary to fill in the custom field manually.
2) I recommend setting up regular transfer of inventory, product pricing, customer purchase history (YTD amount), and status indicators (past due, credit hold, etc.) from Business Central to Dynamics 365 Sales through Microsoft Power Automate.
In this case it is necessary to ensure that the Microsoft Power Automate licensing plan allows the use of premium connectors (Business Central connector and Microsoft Dataverse connector).
If necessary, obtain an additional license.
3) Here is an example of how to set up the transfer of inventory from Business Central to Dynamics 365 Sales through Power Automate:
3.1) In Business Central, inventory data is stored in the `Items` table, which contains information about products, including their identifiers (`Item No.`), names, and other attributes.
3.2) Access to the current stock quantity (`Inventory`) is provided through the `Item Ledger Entries` table or aggregated data in the `Item` table.
3.3) It is necessary to use the Business Central API to access these data.
To do this, open «Business Central» → «Search» (the magnifying glass icon) → «Web Services» and set up OData V4 or API endpoints.
For example, an OData endpoint might look like: `https://api.businesscentral.dynamics.com/v2.0/{tenant-id}/{environment}/ODataV4/Company('YourCompany')/Items`.
3.4) In Dynamics 365 Sales, inventory data can be logically associated with the `Product` entity, which is used for product management in sales.
It is necessary to check if a standard field for storing the quantity in stock is present.
If such a field does not exist, create a custom field:
- Go to `Settings` → `Customizations` → `Customize the System`.
- Choose the `Product` entity → `Fields` → `New`.
- Create a field named `Available Inventory`, with data type `Whole Number`.
- Save and publish changes (`Publish All Customizations`).
3.5) In Power Automate, it is necessary to set up connections to both systems: Business Central and Dynamics 365 Sales:
3.5.1) Sign in to Power Automate through the `make.powerautomate.com` portal.
3.5.2) Go to the `Connections` section and create a connection to Business Central:
- Select the `Microsoft Dynamics 365 Business Central` connector.
- Specify the credentials and environment (environment) of Business Central.
3.5.3) Create a connection to Dynamics 365 Sales:
- Select the `Microsoft Dataverse` connector (formerly Common Data Service), because Sales 365 uses Dataverse.
- Sign in with a Dynamics 365 account.
3.6) Create a flow in Microsoft Power Automate for the regular transfer of stock balances:
3.6.1) In Power Automate select `Create` → `Automated cloud flow` → `Scheduled cloud flow`.
3.6.2) Configure the `Recurrence` trigger: set the interval, for example, `Interval` = 1, `Frequency` = `Day` (daily update).
3.6.3) Add the `Get rows` action from the `Microsoft Dynamics 365 Business Central` connector:
- Specify the `Items` table.
- If necessary, add a filter in the `OData filter` field, for example `inventory gt 0`, to retrieve only products with a positive stock.
3.6.4) Add the `List records` action from the `Microsoft Dataverse` connector:
- Specify the `Products` entity in Sales 365.
- Use a filter to match products, for example by the `Product Number` field.
3.6.5) Add the `Update a record` action from the `Microsoft Dataverse` connector:
- Specify the `Products` entity.
- Match the record in Sales 365 with the data from Business Central by the `Product Number` field (corresponds to `Item No.`).
- Update the `Available Inventory` field with the value from the `Inventory` field of the `Items` table.
3.6.6) For new products (if a record is not found in `List records`) add the `Create a new record` action:
- Specify the `Products` entity.
- Fill in required fields such as `Name` and `Product Number`, as well as `Available Inventory`.
3.7) Configure the correspondence between Business Central and Sales 365 fields in the flow actions.
3.7.1) In the `Update a record` or `Create a new record` action specify:
- `Product Number` = `Item No.` from Business Central.
- `Name` = `Description` from Business Central (or another field with the product name).
- `Available Inventory` = `Inventory` from Business Central.
3.7.2) Verify that the data format is consistent (for instance, `Inventory` as an integer).
3.8) Add steps to handle errors and track flow execution.
3.8.1) Enable `History` in the flow settings to view execution logs (`Flow details` → `Run history`).
3.8.2) Add a `Send an email (V2)` action from the `Office 365 Outlook` connector in case of error:
- Use a `Condition` to check the status of the previous action (`Succeeded` or `Failed`).
- If `Failed`, send an email to the administrator with an error description.
3.9) Test the flow and deploy it in the production environment:
3.9.1) Perform a test run of the flow in Power Automate: click `Test` → `Manually` and check the update of several records in Sales 365.
3.9.2) Check in Sales 365 that the data in the `Products` entity is correct: open the `Sales` → `Products` section and verify that the `Available Inventory` field is filled with current values from Business Central.
3.9.3) After successful testing, turn on the flow: switch it to `On` in the Power Automate interface.
4) In most cases «dealers» and «customers» in Business Central can be stored in the `Customer` table, but with different values in the «Customer Posting Group» field or another field that helps distinguish a dealer from a final customer.
4.1) If it is necessary in Business Central to use different types of records for «dealers» and «customers», it is possible to create an additional custom field (for example, `AccountType`) or use the standard field (for example, `Customer Disc. Group`) to differentiate categories.
5) In Sales 365 decide whether it is enough to use one «Account» entity to store both «dealers» and «customers», or separate entities are needed (if the business process provides for separate management).
5.1) If it is planned to have a single «Account» entity with a different indicator (for example, the `Account Type` field), create or set up this field through «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».
6) The transfer of dealers and customers from Salesforce to Business Central and Sales 365 can be done in two ways:
6.1) Through Power Automate (similar to point 3 above).
6.2) By exporting data from Salesforce in CSV format.
6.2.1) Sales 365 supports CSV import.
6.2.2) Business Central supports Excel import through «RapidStart Services».
To do this the exported CSV file must be converted to Excel format.
7) I recommend setting up regular synchronization of dealers and customers between Business Central and Sales 365 through Power Automate (similar to point 3 above).
8) Field mapping in Sales 365 according to the current set of fields in Salesforce is done as follows:
8.1) Open «Settings» → «Advanced Settings» (in the top menu) → «Customizations» → «Customize the System».
8.2) In the «Entities» list select the target (for example, «Account», «Lead», «Opportunity»), where it is required to create fields that match Salesforce.
8.3) Go to «Fields», click «New».
8.4) Repeat the parameters from Salesforce:
- Field type (Text, Two Options, Option Set, Date, Currency, etc.).
- Field name (Display Name) and logical name (Name).
- If necessary, create a set of values (Option Set) to match the Picklist in Salesforce.
8.5) Save and publish changes (the «Publish All Customizations» button).
9) The transfer of email templates from Salesforce to Sales 365 is carried out as follows:
9.1) Compile a list of all merge fields used in Salesforce templates.
9.2) Perform the mapping of these merge fields in Sales 365 (point 8 above).
9.3) Set up «Email Templates» in Sales 365 («Settings» → «Templates» → «Email Templates»).
9.4) In Sales 365 when creating or editing a template, clicking on «Insert/Update» (or a similar command) provides the option to select fields from entities (for example, from the «Contact», «Account», «Lead» entity).
Insert fields corresponding to the previous fields from Salesforce.
9.5) If automatic sending of emails by a trigger (similar to «Workflow rules» and «Process Builder» in Salesforce) is needed, use the Sales 365 and Power Automate tools:
9.5.1) Open «Power Automate» (maker.powerautomate.com) → «Create» → «Automated cloud flow» (or «Scheduled cloud flow»).
9.5.2) Add a trigger (for example, «When a record is created» in the «Lead» entity).
9.5.3) In the step for sending an email (the «Send an email (V2)» or «Send dynamics email» action), select the created «Email Template» from Sales 365 and substitute the necessary fields from Dataverse.
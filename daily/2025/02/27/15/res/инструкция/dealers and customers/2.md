Ниже представлена пошаговая инструкция на русском языке (с точными официальными названиями продуктов и элементов интерфейса на английском языке), описывающая процесс, при котором в Salesforce имеются две категории клиентов — «dealers» и «customers» — и требуется корректно сопоставить (map) и синхронизировать эти записи с Microsoft Dynamics 365 Sales и Business Central. Инструкция учитывает все предыдущие пункты (1–40) и рекомендует использовать Microsoft Power Automate для регулярной передачи данных.

1) Проанализировать структуру «dealers» и «customers» в Salesforce  
1.1) Определить, как в Salesforce хранятся «dealers» и «customers»:  
• Проверить, отличается ли их формат идентификатора (например, `Account Number`), наличие специального поля (например, `Type`) или используется ли «Record Type».  
1.2) Убедиться, что каждая запись в Salesforce имеет уникальное поле, которое позволит сопоставлять (map) «dealers» и «customers» с записями в Business Central и Microsoft Dynamics 365 Sales. Примеры полей: `AccountNumber`, `ExternalID`, `DealerCode` и т. д.  
1.3) Если в Salesforce отсутствует явное разделение (поле) для «dealers» и «customers», добавить или настроить такое поле (например, `Account Type`), чтобы при фильтрации понимать, к какому типу относится каждая запись.

2) Подготовить структуры в Business Central  
2.1) Убедиться, что в Business Central также есть механизмы (например, «Customer Posting Groups» или поля в таблице `Customer`) для различения дилеров и конечных клиентов.  
2.2) При необходимости создать пользовательские поля (через «RapidStart Services», если нужно массовое добавление) или расширение для таблицы `Customer`, чтобы хранить признак (например, `Dealer = true/false`).  
2.3) Проверить, каким образом Business Central идентифицирует клиента (поле `No.`, `Name` и т. д.) и будет ли сопоставление с Salesforce на уровне «dealers» или «customers».

3) Настроить в Microsoft Dynamics 365 Sales поля для «dealers» и «customers»  
3.1) В Microsoft Dynamics 365 Sales открыть «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  
3.2) В сущности «Account» (или «Contact», если логика подразумевает работу с контактами) добавить поле (например, `Account Type`) с нужными значениями (Option Set) или Boolean (две опции) для различения «Dealer» / «Customer».  
3.3) Сохранить и опубликовать изменения, чтобы поле стало доступно при обновлении записей через Microsoft Power Automate.

4) Настроить Microsoft Power Automate для передачи данных из Salesforce в Business Central и Microsoft Dynamics 365 Sales  
4.1) Создать поток (flow) в Microsoft Power Automate, выбрав вариант «Scheduled cloud flow» (или «Automated cloud flow», если требуется срабатывать при обновлениях в Salesforce). Установить желаемое расписание (например, ежедневно).  
4.2) Добавить действие, используя коннектор для Salesforce (при необходимости может потребоваться лицензия на premium connector), чтобы «List records» из Salesforce. Применить фильтр (Filter Query) или по отдельности получать «dealers» и «customers», если они различаются по полю `Account Type` или «Record Type».  
4.3) В цикле «Apply to each» (или аналогичном шаге) проанализировать записи, передавать необходимые поля (например, `AccountNumber`, `Account Type`, `Name` и т. д.) в Business Central и Microsoft Dynamics 365 Sales.

5) Сопоставить «dealers» и «customers» в Business Central  
5.1) Для записи из Salesforce определить, к какому типу она относится (поле `Account Type` = «Dealer» или «Customer»).  
5.2) В действии коннектора «Business Central» (например, «Update a record» или «List records», затем «Update a record») сопоставить:  
• Идентификатор клиента из Salesforce c полем `No.` в Business Central,  
• Поле `Account Type = Dealer` с пользовательским полем (например, `IsDealer`) в таблице `Customer`.  
5.3) При отсутствии записи клиента в Business Central возможно создать новую запись, настраивая логику «Create a record». При наличии — обновить поля (например, `IsDealer = true`).

6) Сопоставить «dealers» и «customers» в Microsoft Dynamics 365 Sales  
6.1) Использовать коннектор «Microsoft Dataverse» (или «Dynamics 365»), чтобы «List rows» в сущности «Account» и найти соответствующую запись по ключу (к примеру, `AccountNumber`).  
6.2) Если запись существует, обновить поле `Account Type` (или пользовательское поле) значением «Dealer» или «Customer». Если нет записи, создать новую.  
6.3) Сохранить сопоставление, чтобы при следующих запусках данные о «dealers» и «customers» обновлялись регулярно.

7) Проверить корректность данных и логику обновления  
7.1) Запустить поток (flow) в Microsoft Power Automate вручную (Test) или дождаться запланированного времени.  
7.2) Открыть несколько тестовых записей «dealers» и «customers» в Salesforce, убедиться, что они корректно перенеслись в Business Central (с правильным признаком в таблице `Customer`) и в Microsoft Dynamics 365 Sales (поле `Account Type`).  
7.3) При необходимости добавить в Microsoft Dynamics 365 Sales представления (Views), фильтрующие «dealers» и «customers» (например, «Accounts: Dealers»), через «Settings» → «Advanced Settings» → «Customizations» → «Customize the System» → «Views».

8) Дополнительные аспекты и рекомендации  
8.1) Для разных процессов ведения «dealers» и «customers» в Business Central может потребоваться разное поведение (например, разные «Customer Posting Groups» или иные учетные настройки). В этом случае стоит расширить логику «Update a record» в Power Automate, чтобы при «Dealer» устанавливалась соответствующая группа.  
8.2) Если в Salesforce «dealers» и «customers» представляют разные объекты (Record Types), возможно настраивать два отдельных потока, один для «dealers» и один для «customers», чтобы упростить логику.  
8.3) В Business Central, при необходимости, разделить «dealers» и «customers» разными номерами (No. Series) или другими полями, учитывая, что при создании записи может потребоваться серия номеров.  
8.4) Регулярно проверять журналы (Run History) в Microsoft Power Automate на предмет ошибок и обновлять сопоставление (mapping), если в Salesforce меняется структура данных.

Таким образом, «dealers» и «customers» из Salesforce будут корректно сопоставлены и синхронизированы с Business Central и Microsoft Dynamics 365 Sales, позволяя отделу продаж и финансовым службам видеть правильное деление записей и работать с актуальными данными во всех системах.
https://gemini.google.com/share/71992b1c59aa


## **1. Введение и контекст проекта**

Внедрение системы Sales Ledger («Книга продаж») в рамках проекта P⁎, объединяющего элементы SaaS (Software as a Service), аренды аппаратного обеспечения и потенциально медицинских услуг, представляет собой задачу, выходящую далеко за рамки стандартной инженерной разработки. В современной цифровой экономике, особенно на стыке финансовых технологий (FinTech) и медицинских технологий (MedTech), создание реестра продаж перестает быть просто вопросом записи транзакций в базу данных. Это становится фундаментальным упражнением в корпоративном управлении, управлении рисками и соблюдении сложнейшего переплетения нормативных требований.

Настоящий отчет представляет собой исчерпывающее исследование шести критических аспектов (A¦⠿), выявленных в ходе предварительного анализа требований к проекту P⁎. Мы рассматриваем Sales Ledger не как изолированный IT-компонент, а как центральную нервную систему коммерческой деятельности предприятия, которая должна функционировать в условиях жесткого регулирования со стороны FDA (Food and Drug Administration), экспортного контроля США (EAR), налогового законодательства после прецедента *Wayfair*, а также стандартов кибербезопасности для федеральных подрядчиков (NIST 800-171).

Особое внимание в данном исследовании уделяется скрытым угрозам второго и третьего порядка. Например, техническое решение о блокировке доступа пользователя за неуплату может быть интерпретировано регулятором как несанкционированная модификация медицинского устройства, влекущая за собой угрозу безопасности пациента. Аналогичным образом, выбор архитектурного паттерна для базы данных (ACID против Saga) может иметь прямые последствия для аудируемости финансовой отчетности и способности компании пройти проверку «Большой четверки».

Цель данного документа — предоставить руководству проекта P⁎ глубоко обоснованные рекомендации, подкрепленные анализом нормативных актов и технических стандартов, для принятия взвешенных решений по каждому из выявленных аспектов. Каждый раздел содержит детальный разбор аргументов «за» и «против» приоритезации конкретного аспекта, количественную оценку его важности по шкале 0–100 и итоговый вердикт.

---

## **2. Аспект 1: Модели согласованности данных в распределенных реестрах (ACID против Saga)**

Выбор модели согласованности данных является, пожалуй, самым фундаментальным архитектурным решением для проекта P⁎. В эпоху микросервисной архитектуры, к которой тяготеют современные облачные платформы, разработчики часто сталкиваются с дилеммой: выбрать строгую согласованность, гарантируемую транзакциями ACID (Atomicity, Consistency, Isolation, Durability), или отдать предпочтение высокой доступности и масштабируемости, предлагаемым паттерном Saga и моделью окончательной согласованности (Eventual Consistency). Для финансового реестра, каковим является Sales Ledger, этот выбор носит экзистенциальный характер.

### **2.1. Теоретический и технический контекст**

В классической монолитной архитектуре финансовые транзакции обрабатываются в рамках единой реляционной базы данных. Когда пользователь оплачивает подписку, списание средств с его баланса и зачисление на счет выручки компании происходят в рамках одной атомарной транзакции. Если в любой момент происходит сбой (отключение питания, ошибка сети), база данных откатывает все изменения, гарантируя, что деньги не «исчезнут» и не появятся из ниоткуда.1

Однако проект P⁎ предполагает распределенную среду, где Sales Ledger должен взаимодействовать с внешними платежными шлюзами (например, Stripe), системами управления запасами (для аппаратного обеспечения) и налоговыми движками. В такой среде реализация распределенных ACID-транзакций (например, через протокол двухфазной фиксации 2PC) становится технически сложной и может негативно влиять на производительность системы, блокируя ресурсы на время ожидания ответа от всех участников.3

Альтернативой является паттерн Saga. Saga разбивает глобальную транзакцию на последовательность локальных транзакций, каждая из которых обновляет данные в отдельном сервисе и публикует событие для запуска следующего шага. Если на каком-то этапе происходит сбой, Saga запускает серию «компенсирующих транзакций», чтобы отменить изменения, сделанные предыдущими шагами.5

### **2.2. Аргументы ЗА высокую важность (Приоритет строгой согласованности ACID)**

Предотвращение финансовых аномалий и «Грязных чтений»:  
Главный аргумент в пользу ACID заключается в предотвращении состояний, недопустимых в бухгалтерском учете. Паттерн Saga страдает от отсутствия изоляции (буква «I» в акрониме ACID). Это означает, что промежуточные изменения, сделанные одной транзакцией, могут быть видны другим транзакциям до того, как вся Saga будет завершена.5  
Рассмотрим сценарий: пользователь пополняет счет. В модели Saga средства могут появиться на балансе пользователя (локальная транзакция 1), но еще не быть отражены в Главной книге (локальная транзакция 2). Если в этот микро-промежуток времени пользователь инициирует вывод средств или покупку, система может разрешить операцию, основываясь на «неподтвержденных» средствах. Это открывает вектор атаки «двойной траты» (double-spend) или приводит к «грязному чтению» (dirty read), когда отчетность показывает средства, которые впоследствии могут быть компенсированы (отменены) из-за сбоя на последующих шагах.8 Для Sales Ledger, который должен служить «единым источником правды», такие аномалии неприемлемы.  
Аудируемость и регуляторная целостность:  
Финансовые аудиторы требуют возможности четко реконструировать состояние системы на любой момент времени. ACID-транзакции обеспечивают строгую сериализацию событий. В системе, построенной на Saga, существует понятие «мягкого состояния» (soft state), когда система согласована только в конечном итоге.3 Если аудит (или автоматическая сверка) произойдет в момент, когда Saga находится в процессе выполнения, дебет не сойдется с кредитом. Сложность отладки распределенной Saga, где состояние размазано по логам множества микросервисов, экспоненциально повышает риски необнаруженных ошибок и усложняет доказательство корректности учета регуляторам.6  
Сложность реализации компенсирующих транзакций:  
Разработка логики компенсации («отмены») зачастую сложнее, чем разработка прямой бизнес-логики. Например, если транзакция «Активация подписки» прошла успешно, а следующее за ней «Списание средств» не удалось, система должна запустить компенсацию — «Деактивацию подписки». Но что, если пользователь уже успел воспользоваться услугой в этот промежуток времени? Или что, если компенсирующая транзакция тоже завершится сбоем?.6 В ACID-системах откат (rollback) выполняется движком базы данных автоматически и гарантированно, освобождая разработчика от написания сложного и подверженного ошибкам кода компенсации.2

### **2.3. Аргументы ПРОТИВ высокой важности (Допустимость Eventual Consistency)**

Масштабируемость и доступность (CAP-теорема):  
ACID-транзакции, особенно распределенные, являются блокирующими. Они удерживают блокировки (locks) на строках базы данных до завершения всей цепочки операций. В высоконагруженном Sales Ledger, обрабатывающем тысячи транзакций в секунду, жесткое следование ACID может создать «бутылочное горлышко», снижая пропускную способность и увеличивая время отклика.3 Паттерн Saga позволяет системе оставаться доступной (Availability в теореме CAP), даже если отдельные компоненты работают медленно или временно недоступны.  
Слабая связность сервисов:  
Использование распределенных транзакций или общей базы данных создает жесткую связность (tight coupling) между сервисами, превращая архитектуру в «распределенный монолит». Saga позволяет Sales Ledger развиваться независимо от сервиса исполнения заказов или налогового сервиса.6 Если приоритетом проекта P⁎ является скорость разработки и внедрения новых функций (Time-to-Market), Saga предлагает большую гибкость.

### **2.4. Количественная оценка**

Ниже приведена таблица оценки важности данного аспекта для проекта P⁎.

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Риск нарушения финансовой целостности** | 40% | 10 | 4.0 |
| **Аудируемость и соответствие стандартам (SOX/GAAP)** | 30% | 9 | 2.7 |
| **Сложность реализации и отладки** | 20% | 8 | 1.6 |
| **Требования к масштабируемости (High Load)** | 10% | 5 | 0.5 |
| **Итоговый балл важности** |  |  | **88** |

### **2.5. Вердикт и Рекомендации**

**Вердикт: КРИТИЧЕСКИ ВАЖНО (CRITICAL)**

Рекомендация: Проект P⁎ должен использовать гибридный подход, но с жестким приоритетом ACID для ядра реестра.  
Недопустимо строить Главную книгу (Core Ledger) на принципах окончательной согласованности. Финансовые записи (T-счета системы двойной записи) должны обновляться в рамках строгих транзакционных границ одной базы данных.1 Это «ядро» должно быть источником правды.  
Однако взаимодействие этого ядра с внешними системами (отправка email-чека, обновление CRM, команда на отгрузку оборудования) должно реализовываться через паттерн Saga.6 Реестр фиксирует финансовый факт (ACID-транзакция), а затем асинхронно публикует событие (например, PaymentReceived), которое инициирует последующие действия. В случае сбоя внешних систем ядро остается в согласованном состоянии, а Saga управляет повторными попытками (retries) для внешних действий, не блокируя финансовые активы.13

---

## **3. Аспект 2: Регуляторное воздействие FDA на функции блокировки («Lock-out»)**

Внедрение Sales Ledger подразумевает управление биллингом, выставлением счетов и, как следствие, возможность приостановки предоставления услуг в случае неуплаты. Если продукт, доступ к которому контролирует Ledger, является медицинским устройством или программным обеспечением как медицинским устройством (SaMD), механизм «блокировки» (lock-out) переходит из разряда коммерческих функций в разряд факторов риска для безопасности пациентов.

### **3.1. Регуляторный ландшафт**

FDA регулирует так называемые «многофункциональные устройства» (Multiple Function Device Products), которые могут включать как функции медицинского устройства (например, диагностические алгоритмы), так и функции, не являющиеся таковыми (например, биллинг, административная поддержка).14 Хотя Закон о лечении 21 века (21st Century Cures Act) исключил чисто административное ПО из определения медицинского устройства 16, FDA сохраняет за собой полномочия оценивать влияние этих «неустройственных» функций на безопасность и эффективность медицинской функции.14

### **3.2. Аргументы ЗА высокую важность (Риск принудительных мер)**

Прецедент LaserVision:  
История знает примеры жестких действий FDA против производителей, использующих программные блокировки для контроля оплаты. В деле LaserVision производитель был оштрафован на крупную сумму за использование программной функции «lock-out», которая блокировала работу лазерного оборудования после определенного количества процедур (контролируемых ключ-картами). FDA расценило это как несанкционированную модификацию, влияющую на возможность использования устройства врачом и, следовательно, на безопасность пациента.18 Этот прецедент демонстрирует, что изменение доступности устройства на основе коммерческих условий (статуса оплаты) может рассматриваться как вмешательство в его профиль безопасности.  
Отказ в обслуживании (DoS) как угроза безопасности:  
Если Sales Ledger автоматически отзывает доступ к SaaS-платформе для удаленного мониторинга пациентов из-за просроченной кредитной карты, и эта платформа используется для принятия критических клинических решений, функция биллинга напрямую влияет на безопасность пациента. Руководства FDA по кибербезопасности и доступности устройств подчеркивают, что несанкционированный или непреднамеренный отказ в обслуживании (Denial of Service) является риском безопасности.19 Если административное ПО вызывает сбой медицинской функции во время критической процедуры, оно подпадает под регуляторный надзор.16  
Архитектурная связность и функциональная изоляция:  
Согласно руководствам FDA, проектная документация должна четко определять связи между медицинским ПО и «внешним ПО» (таким как Sales Ledger).21 Если Sales Ledger имеет техническую возможность «писать» в операционную базу данных устройства команду на отключение, это создает сильную связность. FDA рекомендует вести файлы управления рисками, учитывающие влияние «других функций» на устройство.22 Биллинговая система, способная переопределить клиническую доступность, представляет собой интерфейс высокого риска.

### **3.3. Аргументы ПРОТИВ высокой важности (Административные исключения)**

Исключения 21st Century Cures Act:  
Закон о лечении 21 века внес поправки в Закон о FD&C, исключив программные функции, предназначенные для «административной поддержки медицинского учреждения», из определения устройства.23 Sales Ledger по своей сути является административным инструментом. Если ПО ограничивается обработкой платежей и технически не «вмешивается» в работу клинического алгоритма (например, блокирует будущий вход в систему, но не прерывает текущий анализ), оно подпадает под законное исключение.25  
Разделение ответственности:  
Если архитектура спроектирована таким образом, что функция медицинского устройства юридически и технически отделена от функции биллинга, риск минимизируется. Например, если медицинское приложение запрашивает разрешение на запуск у «Сервера прав» (Entitlement Server), и этот сервер отказывает в доступе на основании данных из Ledger, FDA, как правило, не регулирует сам Сервер прав, при условии, что он не изменяет медицинский вывод приложения.26

### **3.4. Количественная оценка**

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Влияние на безопасность пациента (Доступность)** | 50% | 9 | 4.5 |
| **Регуляторный прецедент (Риск штрафов)** | 30% | 7 | 2.1 |
| **Риск архитектурной связности** | 20% | 8 | 1.6 |
| **Итоговый балл важности** |  |  | **82** |

### **3.5. Вердикт и Рекомендации**

**Вердикт: ВЫСОКАЯ ВАЖНОСТЬ (HIGH)**

Рекомендация: Проект P⁎ должен рассматривать механизм блокировки («Lock-out») как функцию, критичную для безопасности (Safety-Critical).  
Несмотря на то, что биллинг является административной функцией, принудительное исполнение условий биллинга через блокировку ПО воздействует на медицинское устройство. Проект обязан внедрить протокол «Мягкой деградации» (Graceful Degradation) или «Экстренного доступа».

1. **Архитектурная развязка:** Sales Ledger никогда не должен напрямую отправлять команду SHUTDOWN на медицинское устройство. Вместо этого он должен обновлять статус прав пользователя в промежуточном слое.  
2. **Приоритет безопасности (Safety Override):** Устройство должно сохранять минимально необходимую функциональность для безопасности пациента, даже если статус биллинга — «просрочен». Например, необходимо разрешить завершение текущих сессий мониторинга или выгрузку исторических данных пациента перед блокировкой.20  
3. **Документирование рисков:** В файле управления рисками (Risk Management File) необходимо явно оценить опасность «Потери доступности из-за приостановки биллинга» и задокументировать меры по снижению риска, в соответствии с руководством FDA по многофункциональным устройствам.16

---

## **4. Аспект 3: Соответствие требованиям платежных процессоров и сертификация телемедицины**

Интеграция с платежными процессорами (такими как Stripe) является неотъемлемой частью Sales Ledger. Для проекта P⁎, включающего элементы телемедицины или медицинских услуг, эта интеграция является не просто технической задачей (получение API-ключей), а сложным юридическим процессом. Платежные процессоры классифицируют телемедицину как «Бизнес с ограничениями» (Restricted Business), что влечет за собой жесткие требования к проверке.

### **4.1. Императив LegitScript и правила карточных сетей**

Крупные карточные сети (Visa, Mastercard) и процессоры (Stripe, Square, PayPal) установили строгие правила для транзакций в сфере здравоохранения, совершаемых без присутствия карты (Card-Not-Present).

Обязательная сертификация:  
Stripe явно включает «Телемедицину и телемедицинские услуги», а также «Интернет-аптеки» в список бизнесов с ограничениями.27 Хотя в FAQ Stripe может быть указано, что телемедицинским компаниям технически не требуется сертификация LegitScript для начала работы 28, это утверждение вводит в заблуждение при рассмотрении более широкого контекста. Visa и Mastercard требуют, чтобы все провайдеры телемедицины, обрабатывающие транзакции без присутствия карты, были сертифицированы и контролировались признанной организацией, такой как LegitScript.29 Поскольку Stripe обязан соблюдать правила карточных сетей, они в конечном итоге обеспечивают соблюдение этого требования, что часто приводит к внезапной блокировке счетов, если сертификат не предоставляется по запросу.31  
Широта ограничений:  
Определение «телемедицины» у платежных систем крайне широкое. Оно охватывает синхронную и асинхронную коммуникацию, включающую диагностику или лечение.28 Если проект P⁎ способствует любой форме удаленной диагностики или выписки рецептов (даже если это просто SaaS-платформа, соединяющая врачей и пациентов), он попадает под этот контроль. Чисто образовательные или «велнес» услуги могут быть освобождены, но грань очень тонка.28

### **4.2. Аргументы ЗА высокую важность (Риск непрерывности бизнеса)**

Экзистенциальная угроза закрытия счета:  
Существует множество задокументированных случаев, когда счета компаний, особенно в сфере ветеринарии и телемедицины, были фактически закрыты за одну ночь из-за неправильной классификации или отсутствия сертификации.32 Для проекта, ядром которого является Sales Ledger (сбор выручки), невозможность обработки платежей — это катастрофический сбой. «Внезапный удар под дых» в виде замороженного торгового счета делает всю техническую реализацию реестра бесполезной.31  
Привратники рекламного рынка:  
Помимо обработки платежей, сертификация LegitScript является обязательным условием для размещения рекламы на основных платформах, таких как Google, Facebook и TikTok.31 Если стратегия роста проекта P⁎ опирается на цифровой маркетинг, эта сертификация обязательна независимо от снисходительности платежного процессора.  
Различие между аптекой и консультацией:  
Если Sales Ledger обрабатывает платежи за рецептурные препараты (а не только за консультации), контроль усиливается многократно. Продажа «рецептурных товаров» часто полностью запрещена на стандартных аккаунтах Stripe без явного предварительного одобрения и наличия «фармацевтического отказа» (pharmaceutical waiver).27 Система должна уметь различать «плату за услугу» (консультация) и «плату за товар» (лекарство/устройство), чтобы применять правильные коды категории продавца (MCC) и логику соответствия.28

### **4.3. Аргументы ПРОТИВ высокой важности (Нишевые исключения)**

Исключение для SaaS-платформ:  
Если проект P⁎ является чисто SaaS-инструментом, который используется врачами, но сама платформа не «продает» медицинскую услугу пациенту (то есть врач выставляет счет пациенту напрямую, а платформа взимает с врача плату за подписку), можно попытаться избежать классификации «телемедицинского продавца». В этой модели продавцом (Merchant of Record) является SaaS-компания, продающая ПО, а не врач, продающий медицину.35 Однако Stripe все равно включает «SaaS-платформы для интернет-аптек» в список ограниченных категорий.27

### **4.4. Количественная оценка**

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Риск остановки платежей** | 50% | 10 | 5.0 |
| **Требования карточных сетей (Visa/MC)** | 30% | 9 | 2.7 |
| **Зависимость от рекламных каналов** | 20% | 8 | 1.6 |
| **Итоговый балл важности** |  |  | **93** |

### **4.5. Вердикт и Рекомендации**

**Вердикт: КРИТИЧЕСКИ ВАЖНО (CRITICAL)**

**Рекомендация:** Проект P⁎ должен исходить из того, что **сертификация LegitScript является обязательной**, и проектировать процесс онбординга с учетом этого требования.

1. **Предварительная сертификация:** Запрещено запускать обработку реальных платежей (Live Mode) без инициирования заявки в LegitScript. Сроки рассмотрения могут быть значительными.  
2. **Управление кодами категорий продавца (MCC):** Sales Ledger должен уметь сегментировать выручку. Если платформа взимает плату и за ПО (SaaS), и за медицинские услуги/товары, эти потоки, возможно, придется разделить на разные торговые счета (Merchant Accounts), чтобы не «заражать» низкорисковую выручку от SaaS высокорисковыми вопросами соответствия телемедицины.27  
3. **Модель «Только консультации»:** При возможности следует структурировать бизнес-модель так, чтобы избегать прямой обработки платежей за «рецепты». Обрабатывайте платежи только за «консультации», переложив биллинг лекарств на аптеки-партнеры вне платформы, чтобы снизить риск.33

---

## **5. Аспект 4: Сложность налогообложения продаж и пакетированных транзакций**

Функция Sales Ledger подразумевает расчет и сбор налогов. После решения Верховного суда США по делу *South Dakota v. Wayfair* (2018) концепция «физического присутствия» была заменена на «экономическое присутствие» (economic nexus). Это означает, что проект P⁎ с высокой вероятностью будет иметь налоговые обязательства практически в каждом штате США, где у него есть клиенты.38 Ситуация усугубляется «пакетированным» характером предложения (SaaS + Аппаратное обеспечение).

### **5.1. Ошибка налогообложения на основе ZIP-кодов**

Распространенной ошибкой при реализации Sales Ledger является использование 5-значных почтовых индексов (ZIP codes) для определения налоговой ставки.  
Неточность: ZIP-коды — это маршруты доставки почты, а не юридические границы. Один ZIP-код может охватывать множество налоговых юрисдикций (город, округ, специальный район) с разными ставками.40 Яркий пример — Гринвуд-Виллидж, штат Колорадо, где в пределах одного ZIP-кода действуют четыре разные ставки налога с продаж.40  
Регуляторный риск: Использование ZIP-кодов часто приводит к избыточному сбору налогов (риск коллективных исков от клиентов) или недостаточному сбору (риск штрафов при аудите).40 Штат Вашингтон, например, прямо предупреждает, что 5-значные ZIP-коды не соответствуют точно налоговым ставкам.42

### **5.2. Пакетированные транзакции: Тест «Истинного объекта» (True Object Test)**

Проект P⁎ вероятно предполагает продажу подписки, включающей доступ к ПО (SaaS) и, возможно, аренду оборудования (медицинского устройства). Штаты имеют разные правила налогообложения таких «пакетов» (Bundled Transactions).  
Проблема: Если необлагаемая налогом услуга (например, SaaS в определенном штате) продается в пакете с облагаемым товаром (например, оборудованием) по единой цене, вся транзакция часто признается облагаемой налогом.43  
Правила определения источника (Sourcing Rules):

* **SaaS:** Обычно облагается налогом по месту нахождения клиента (место использования/получения выгоды).45  
* **Оборудование:** Облагается по адресу доставки.  
* **Услуги:** Облагаются по месту оказания или получения.

В пакетированной сделке применяется тест «Истинного объекта» (True Object Test), определяющий основную цель покупки. Если стоимость оборудования является «незначительной» (incidental, часто менее 10% от общей цены), весь пакет может следовать налоговому режиму услуги.45 И наоборот, некоторые штаты (как Колорадо) могут облагать налогом всю цену пакета, если в него включено *любое* облагаемое материальное имущество.43 Штат Кентукки применяет порог в 50%: если облагаемая часть превышает этот уровень, налог взимается со всего пакета.47

### **5.3. Аргументы ЗА высокую важность (Риск аудита и ответственности)**

Фрагментация налогообложения SaaS:  
Налогообложение SaaS в США представляет собой «лоскутное одеяло». SaaS облагается налогом примерно в 20 штатах (например, Техас, Массачусетс, Нью-Йорк), освобожден в других (Калифорния, Флорида) и может облагаться локальными налогами в штатах с правом самоуправления (Home Rule), таких как Колорадо.48 Без сложного движка определения источника Sales Ledger будет рассчитывать налоги с ошибками огромного масштаба.  
Принудительное исполнение после Wayfair:  
Штаты агрессивно следят за соблюдением правил экономического присутствия. Аудиты в режиме «как обычно» теперь нацелены на удаленных продавцов.38 В некоторых юрисдикциях ответственность за неуплату налогов может быть возложена лично на должностных лиц компании.  
Ловушки пакетирования:  
Неспособность разделить оборудование и ПО в инвойсе может превратить поток доходов от SaaS (часто не облагаемый налогом) в полностью облагаемое событие.48

### **5.4. Аргументы ПРОТИВ высокой важности (Аутсорсинг)**

Интеграция с Avalara/TaxJar:  
Можно аргументировать, что внутренний Sales Ledger не должен реализовывать эту логику самостоятельно. Интегрируясь со специализированным налоговым движком (Avalara, Vertex, TaxJar), проект перекладывает сложность регуляторного соответствия на провайдера.40 Внутренняя задача сводится к «интеграции», а не «расчету». Однако данные, передаваемые в эти движки (сопоставление SKU, декомпозиция пакетов), все равно должны управляться на стороне Sales Ledger.51

### **5.5. Количественная оценка**

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Финансовая ответственность (Недополучение налогов)** | 40% | 9 | 3.6 |
| **Сложность правил пакетирования** | 30% | 9 | 2.7 |
| **Охват присутствия (50 штатов)** | 30% | 8 | 2.4 |
| **Итоговый балл важности** |  |  | **87** |

### **5.6. Вердикт и Рекомендации**

**Вердикт: ВЫСОКАЯ ВАЖНОСТЬ (HIGH)**

**Рекомендация:** Проект P⁎ должен внедрить **определение источника на основе геолокации** и **построчное разделение в инвойсах**.

1. **Отказ от ZIP-кодов:** Реестр должен хранить и обрабатывать полные почтовые адреса (предпочтительно с координатами широты/долготы) для точного определения налоговых юрисдикций.50  
2. **Распакетирование инвойсов:** Архитектура Sales Ledger должна поддерживать «виртуальное пакетирование», когда клиент видит одну цену, но генерация инвойса на бэкенде разделяет SKU на «Аренду оборудования» и «Подписку SaaS» с отдельными стоимостями. Это позволит налоговому движку применять корректные исключения к каждому компоненту.45  
3. **Учет правил самоуправления (Home Rule):** Специально для Колорадо и подобных штатов система должна уметь обрабатывать налоговые декларации на местном уровне, а не только на уровне штата.43

---

## **6. Аспект 5: Безопасность данных в цепочке поставок и экспортный контроль (NIST/CUI/EAR)**

Проект P⁎ подразумевает работу с государственными контрактами (контекст O.md и упоминания «федеральной контрактной информации»), а также потенциально чувствительными техническими данными. Это помещает проект в сферу действия DFARS (Дополнение к Федеральному регламенту закупок для обороны) и EAR (Регламент экспортного контроля).

### **6.1. Controlled Unclassified Information (CUI) против Federal Contract Information (FCI)**

Понимание разницы между FCI и CUI критично для определения уровня требуемой защиты.

* **FCI (Федеральная контрактная информация):** Информация, предоставленная правительством или созданная для него по контракту (например, данные о платежах, условия контракта). Требует базовых мер защиты согласно FAR 52.204-21.54  
* **CUI (Контролируемая несекретная информация):** Информация, требующая защиты или контроля распространения в соответствии с законом (например, технические чертежи, финансовые данные, персональные данные PII). CUI требует соблюдения стандарта **NIST SP 800-171** (110 контролей безопасности).56

Ловушка «Подразумеваемого экспорта» (Deemed Export):  
Согласно правилам EAR, передача исходного кода или технических данных «иностранному лицу» на территории Соединенных Штатов считается экспортом в родную страну этого лица.58 Это критически важно для проекта P⁎, если он использует фрилансеров-разработчиков. Если разработчик является иностранным гражданином (даже находясь в США) и получает доступ к исходному коду шифрования (Категория 5 Часть 2 списка EAR) или другой контролируемой технологии, может потребоваться лицензия до того, как он напишет хоть строчку кода.60

### **6.2. Аргументы ЗА высокую важность (Юридическая и уголовная ответственность)**

Инициатива Минюста США по борьбе с кибермошенничеством:  
Министерство юстиции активно использует Закон о ложных исках (False Claims Act) для преследования подрядчиков, искажающих сведения о своей кибербезопасности. Дела Aerojet Rocketdyne и Guidehouse демонстрируют, что несоблюдение NIST 800-171 — или отсутствие контроля за субподрядчиками — может привести к многомиллионным штрафам.62  
Риски работы с фрилансерами:  
Фрилансеры часто не имеют защищенной инфраструктуры, требуемой для работы с CUI (например, журналы аудита, FIPS-валидированное шифрование). Использование фрилансера, который загружает CUI в личный репозиторий GitHub или использует несоответствующий требованиям ноутбук, представляет собой нарушение контракта и потенциально нарушение правил подразумеваемого экспорта.64  
Каскадирование требований (Flow-Down):  
Требования по защите CUI передаются по цепочке субподрядчикам. Если проект P⁎ является субподрядчиком для генерального подрядчика (Prime), он несет равную ответственность. Если P⁎ нанимает фрилансеров, он обязан навязать им эти контроли.62

### **6.3. Аргументы ПРОТИВ высокой важности (Ограничение объема)**

Различие FCI и CUI:  
Если Sales Ledger обрабатывает только суммы платежей и номера контрактов (FCI), но не технические схемы или сложные PII (CUI), бремя соответствия ниже (FAR 52.204-21 против NIST 800-171).67  
Исключение для COTS:  
Коммерчески доступные готовые изделия (COTS) часто освобождаются от некоторых требований по каскадированию CUI. Если Sales Ledger является стандартным коробочным продуктом, соблюдение требований может быть упрощено. Однако любая модификация под нужды правительства лишает продукт этого статуса.

### **6.4. Количественная оценка**

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Юридическая ответственность (False Claims Act)** | 40% | 10 | 4.0 |
| **Риск экспортного контроля (Deemed Export)** | 30% | 8 | 2.4 |
| **Операционные накладные расходы (NIST Controls)** | 30% | 7 | 2.1 |
| **Итоговый балл важности** |  |  | **85** |

### **6.5. Вердикт и Рекомендации**

**Вердикт: ВЫСОКАЯ ВАЖНОСТЬ (HIGH)**

**Рекомендация:** Проект P⁎ должен внедрить политику **«Только для лиц США» (US Persons Only) для разработки ядра** и создать **Изолированный анклав данных для CUI**.

1. **Сегрегация среды:** Создайте специальный «GovCloud» или защищенный анклав для обработки данных государственных контрактов. Не смешивайте эти данные с коммерческой средой SaaS.56  
2. **Запрет на иностранных фрилансеров в ядре:** Из-за рисков подразумеваемого экспорта (EAR) и требований аудита NIST 800-171 не используйте иностранных фрилансеров для работы над компонентами, связанными с шифрованием или CUI. Используйте только граждан США или держателей Грин-карт для кодовой базы ядра реестра.59  
3. **Автоматизированный аудит:** Внедрите автоматизированное ведение журналов аудита (Требование 3.12.4) внутри самого реестра, чтобы отслеживать, кто именно, когда и к какой финансовой записи получал доступ. Это не просто функция, это федеральное требование.68

---

## **7. Аспект 6: Принципы реализации реестра двойной записи**

Если дебаты «Saga против ACID» касаются того, *как* сохранять данные, то аспект «Двойной записи» касается того, *что* именно сохранять. Sales Ledger должен строго придерживаться фундаментального бухгалтерского уравнения ($Активы = Обязательства + Капитал$).1

### **7.1. Аргументы ЗА высокую важность (Целостность данных)**

Неизменность и коррекция ошибок:  
В системе с одинарной записью (например, простая таблица или колонка balance в таблице пользователей) ошибки трудно отследить. В системе двойной записи деньги никогда не создаются и не уничтожаются; они просто перемещаются. Если сумма дебетов и кредитов не равна нулю, значит, произошла ошибка. Это свойство самовалидации имеет решающее значение для отладки сложных финансовых потоков.11  
Аудиторский след:  
Каждая транзакция — это строка в реестре. Вы никогда не «обновляете» баланс; вы вставляете новую транзакцию, которая корректирует баланс. Это обеспечивает бесконечную историю отмен и идеальную аудируемость.11

### **7.2. Аргументы ПРОТИВ высокой важности (Накладные расходы на производительность)**

Объем хранилища:  
Системы двойной записи генерируют как минимум две строки для каждого бизнес-события (один дебет, один кредит). Это удваивает требования к хранению и пропускной способности записи по сравнению с простым обновлением баланса.1  
Сложность запросов:  
Расчет баланса пользователя требует суммирования всех исторических транзакций (или поддержания кешированного баланса). Это вычислительно дороже, чем чтение одного значения.13

### **7.3. Количественная оценка**

| Критерий оценки | Вес (%) | Оценка (0-10) | Взвешенная оценка |
| :---- | :---- | :---- | :---- |
| **Целостность данных** | 50% | 10 | 5.0 |
| **Отлаживаемость** | 30% | 10 | 3.0 |
| **Стоимость производительности** | 20% | 4 | 0.8 |
| **Итоговый балл важности** |  |  | **88** |

### **7.4. Вердикт и Рекомендации**

**Вердикт: КРИТИЧЕСКИ ВАЖНО (CRITICAL)**

Рекомендация: Модель Двойной записи не подлежит обсуждению.  
Sales Ledger должен быть построен на структуре таблицы, допускающей только добавление записей (append-only), где каждое событие создает сбалансированные записи дебета и кредита.

1. **Дизайн схемы:** Используйте таблицу ledger_entries, связанную с accounts. Не используйте колонку user.balance как источник правды.  
2. **Оптимизация производительности:** Используйте «снэпшоттинг» (периодическое кеширование балансов) для решения проблемы сложности запросов, но всегда сохраняйте полную историю реестра для сверки.12

---

## **8. Сводная таблица рекомендаций и Заключение**

В таблице ниже представлен итоговый рейтинг аспектов по степени их критичности для успеха проекта P⁎.

| Аспект | Оценка | Вердикт | Ключевое действие |
| :---- | :---- | :---- | :---- |
| **Обработка платежей** | **93** | **CRITICAL** | Немедленно начать процесс сертификации LegitScript; исходить из того, что ограничения «телемедицины» применимы. |
| **ACID против Saga** | **88** | **CRITICAL** | Использовать ACID для T-счетов ядра реестра; Saga только для периферийных рабочих процессов. |
| **Двойная запись** | **88** | **CRITICAL** | Внедрить неизменяемую схему двойной записи (append-only). |
| **Налог с продаж** | **87** | **HIGH** | Внедрить определение источника по геолокации и разделение SKU в инвойсах для пакетированных товаров/услуг. |
| **Безопасность цепочки поставок** | **85** | **HIGH** | Внедрить политику «Только лица США» для разработки ядра; реализовать журналирование аудита по NIST 800-171. |
| **Блокировка FDA** | **82** | **HIGH** | Отделить статус биллинга от клинической доступности; внедрить «экстренный доступ» (safety override). |

### **Заключение**

Проект P⁎ — это не просто задача программной инженерии; это навигация по минному полю регуляторных требований. Успех внедрения Sales Ledger зависит не столько от скорости базы данных, сколько от надежности архитектуры соответствия (compliance architecture). Наивысшие риски носят **экзистенциальный** характер (блокировка счетов платежным процессором из-за отсутствия сертификации LegitScript) и **юридический** характер (ответственность по Закону о ложных исках за ненадлежащее обращение с CUI).

Архитектура должна быть оборонительной, ставя во главу угла согласованность (ACID/Двойная запись) и прослеживаемость (журналирование NIST) выше чистой скорости разработки. Рекомендуется принять **стратегию «Compliance-First»**, рассматривая регуляторные требования как функциональные спецификации первого приоритета, а не как второстепенные задачи.

#### **Works cited**

1. How Double-Entry Bookkeeping Works in a General Ledger - Investopedia, accessed November 22, 2025, [https://www.investopedia.com/ask/answers/022615/what-double-entry-bookkeeping-and-how-does-it-work-general-ledger.asp](https://www.investopedia.com/ask/answers/022615/what-double-entry-bookkeeping-and-how-does-it-work-general-ledger.asp)  
2. The Seven Most Classic Patterns for Distributed Transactions | by dtm - Medium, accessed November 22, 2025, [https://medium.com/@dongfuye/the-seven-most-classic-solutions-for-distributed-transaction-management-3f915f331e15](https://medium.com/@dongfuye/the-seven-most-classic-solutions-for-distributed-transaction-management-3f915f331e15)  
3. Transactions - ACID vs SAGA – Jose Carvajal – Passionate Software Engineer, accessed November 22, 2025, [https://sgitario.github.io/transactions-acid-saga/](https://sgitario.github.io/transactions-acid-saga/)  
4. Mastering Distributed Transactions: Implementing the Saga Pattern in .NET with Azure Cloud Services | by RoshanGavandi, accessed November 22, 2025, [https://roshancloudarchitect.me/mastering-distributed-transactions-implementing-the-saga-pattern-in-net-with-azure-cloud-services-68f78f5b02c4](https://roshancloudarchitect.me/mastering-distributed-transactions-implementing-the-saga-pattern-in-net-with-azure-cloud-services-68f78f5b02c4)  
5. Enhancing Saga Pattern for Distributed Transactions within a Microservices Architecture, accessed November 22, 2025, [https://www.mdpi.com/2076-3417/12/12/6242](https://www.mdpi.com/2076-3417/12/12/6242)  
6. Saga pattern - AWS Prescriptive Guidance, accessed November 22, 2025, [https://docs.aws.amazon.com/prescriptive-guidance/latest/modernization-data-persistence/saga-pattern.html](https://docs.aws.amazon.com/prescriptive-guidance/latest/modernization-data-persistence/saga-pattern.html)  
7. Pattern: Saga - Microservices.io, accessed November 22, 2025, [https://microservices.io/patterns/data/saga.html](https://microservices.io/patterns/data/saga.html)  
8. Saga Design Pattern - Azure Architecture Center | Microsoft Learn, accessed November 22, 2025, [https://learn.microsoft.com/en-us/azure/architecture/patterns/saga](https://learn.microsoft.com/en-us/azure/architecture/patterns/saga)  
9. Sagas Are Great. What's the Problem? | database - Oracle Blogs, accessed November 22, 2025, [https://blogs.oracle.com/database/sagas-are-great-whats-the-problem](https://blogs.oracle.com/database/sagas-are-great-whats-the-problem)  
10. The pros and cons of the Saga architecture pattern - Red Hat, accessed November 22, 2025, [https://www.redhat.com/en/blog/pros-and-cons-saga-architecture-pattern](https://www.redhat.com/en/blog/pros-and-cons-saga-architecture-pattern)  
11. Double-Entry Bookkeeping in Ledger Systems | by Fatih Altuntaş | Medium, accessed November 22, 2025, [https://medium.com/@altuntasfatih42/how-to-build-a-double-entry-ledger-f69edcea825d](https://medium.com/@altuntasfatih42/how-to-build-a-double-entry-ledger-f69edcea825d)  
12. Aggregate Design for Ledger - Stack Overflow, accessed November 22, 2025, [https://stackoverflow.com/questions/70044958/aggregate-design-for-ledger](https://stackoverflow.com/questions/70044958/aggregate-design-for-ledger)  
13. How to Scale a Ledger, Part IV: Recording and Authorization - Modern Treasury, accessed November 22, 2025, [https://www.moderntreasury.com/journal/how-to-scale-a-ledger-part-iv](https://www.moderntreasury.com/journal/how-to-scale-a-ledger-part-iv)  
14. Multiple Function Device Products: Policy and Considerations - FDA, accessed November 22, 2025, [https://www.fda.gov/regulatory-information/search-fda-guidance-documents/multiple-function-device-products-policy-and-considerations](https://www.fda.gov/regulatory-information/search-fda-guidance-documents/multiple-function-device-products-policy-and-considerations)  
15. Multiple Function Device Products: Policy and Considerations; Guidance for Industry and Food and Drug Administration Staff; Availability - Federal Register, accessed November 22, 2025, [https://www.federalregister.gov/documents/2020/07/29/2020-16394/multiple-function-device-products-policy-and-considerations-guidance-for-industry-and-food-and-drug](https://www.federalregister.gov/documents/2020/07/29/2020-16394/multiple-function-device-products-policy-and-considerations-guidance-for-industry-and-food-and-drug)  
16. Multiple Function Device Products: Policy and Considerations - Guidance for Industry and Food and Drug Administration Staff, accessed November 22, 2025, [https://www.fda.gov/media/112671/download](https://www.fda.gov/media/112671/download)  
17. US FDA Removes Some Software Functions from Medical Device Classification Regulations, accessed November 22, 2025, [https://www.emergobyul.com/news/us-fda-removes-some-software-functions-medical-device-classification-regulations](https://www.emergobyul.com/news/us-fda-removes-some-software-functions-medical-device-classification-regulations)  
18. Center for Devices and Radiological Health continued 2001 - FDA, accessed November 22, 2025, [https://www.fda.gov/inspections-compliance-enforcement-and-criminal-investigations/enforcement-story-archive/center-devices-and-radiological-health-continued-2001](https://www.fda.gov/inspections-compliance-enforcement-and-criminal-investigations/enforcement-story-archive/center-devices-and-radiological-health-continued-2001)  
19. Cybersecurity - FDA, accessed November 22, 2025, [https://www.fda.gov/medical-devices/digital-health-center-excellence/cybersecurity](https://www.fda.gov/medical-devices/digital-health-center-excellence/cybersecurity)  
20. Factors to Consider Regarding Benefit- Risk in Medical Device Product Availability, Compliance, and Enforcement Decisions | FDA, accessed November 22, 2025, [https://www.fda.gov/files/medical%20devices/published/Factors-to-Consider-Regarding-Benefit-Risk-in-Medical-Device-Product-Availability--Compliance--and-Enforcement-Decisions---Guidance-for-Industry-and-Food-and-Drug-Administration-Staff.pdf](https://www.fda.gov/files/medical%20devices/published/Factors-to-Consider-Regarding-Benefit-Risk-in-Medical-Device-Product-Availability--Compliance--and-Enforcement-Decisions---Guidance-for-Industry-and-Food-and-Drug-Administration-Staff.pdf)  
21. Off-the-Shelf Software Use in Medical Devices - FDA, accessed November 22, 2025, [https://www.fda.gov/media/71794/download](https://www.fda.gov/media/71794/download)  
22. Artificial Intelligence-Enabled Device Software Functions: Lifecycle Management and Marketing Submission Recommendations - FDA, accessed November 22, 2025, [https://www.fda.gov/media/184856/download](https://www.fda.gov/media/184856/download)  
23. Step 2: Is the Software Function Intended For Administrative Support of a Health Care Facility? | FDA, accessed November 22, 2025, [https://www.fda.gov/medical-devices/digital-health-center-excellence/step-2-software-function-intended-administrative-support-health-care-facility](https://www.fda.gov/medical-devices/digital-health-center-excellence/step-2-software-function-intended-administrative-support-health-care-facility)  
24. Report on Risks and Benefits to Health of Non-Device Software Functions - FDA, accessed November 22, 2025, [https://www.fda.gov/media/163762/download](https://www.fda.gov/media/163762/download)  
25. Examples of Software Functions That Are NOT Medical Devices - FDA, accessed November 22, 2025, [https://www.fda.gov/medical-devices/device-software-functions-including-mobile-medical-applications/examples-software-functions-are-not-medical-devices](https://www.fda.gov/medical-devices/device-software-functions-including-mobile-medical-applications/examples-software-functions-are-not-medical-devices)  
26. FDA issues final rule removing certain software from medical device regulations - RAPS, accessed November 22, 2025, [https://www.raps.org/news-and-articles/news-articles/2021/4/fda-issues-final-rule-removing-certain-software-fr](https://www.raps.org/news-and-articles/news-articles/2021/4/fda-issues-final-rule-removing-certain-software-fr)  
27. Prohibited and Restricted Businesses - Stripe, accessed November 22, 2025, [https://stripe.com/en-mx/legal/restricted-businesses](https://stripe.com/en-mx/legal/restricted-businesses)  
28. Prohibited and Restricted Businesses List — FAQs : Stripe: Help & Support, accessed November 22, 2025, [https://support.stripe.com/questions/prohibited-and-restricted-businesses-list-faqs](https://support.stripe.com/questions/prohibited-and-restricted-businesses-list-faqs)  
29. LegitScript Certification - AWS, accessed November 22, 2025, [https://public-site-wp-uploads.s3.amazonaws.com/wp-content/uploads/2017/12/LegitScript-Certification-FactSheet_Telemedicine.pdf](https://public-site-wp-uploads.s3.amazonaws.com/wp-content/uploads/2017/12/LegitScript-Certification-FactSheet_Telemedicine.pdf)  
30. Healthcare Merchant Certification: Telemedicine - LegitScript, accessed November 22, 2025, [https://www.legitscript.com/wp-content/uploads/2022/03/Healthcare-Certification-FactSheet-Telemedicine.pdf](https://www.legitscript.com/wp-content/uploads/2022/03/Healthcare-Certification-FactSheet-Telemedicine.pdf)  
31. What is LegitScript and VIPPS Certification? - Vector Payments, accessed November 22, 2025, [https://www.vectorpayments.com/legiscript-and-vipps-certification/](https://www.vectorpayments.com/legiscript-and-vipps-certification/)  
32. What payment platform should you use for telemedicine? | by Felicity Johnson | Medium, accessed November 22, 2025, [https://medium.com/@felicity.johnson.mail/what-payment-platform-should-you-use-for-telemedicine-9a5a1d27dbc8](https://medium.com/@felicity.johnson.mail/what-payment-platform-should-you-use-for-telemedicine-9a5a1d27dbc8)  
33. Healthcare Certification: Operate Safely Online - LegitScript, accessed November 22, 2025, [https://www.legitscript.com/certification/healthcare-certification/](https://www.legitscript.com/certification/healthcare-certification/)  
34. Selling Pharmaceutical Products through Practice Better Payments, accessed November 22, 2025, [https://help.practicebetter.io/hc/en-us/articles/36049509583515](https://help.practicebetter.io/hc/en-us/articles/36049509583515)  
35. Stripe restrictions on telehealth services - The Practice Better Community, accessed November 22, 2025, [https://community.practicebetter.io/c/q-and-a/stripe-restrictions-on-telehealth-services](https://community.practicebetter.io/c/q-and-a/stripe-restrictions-on-telehealth-services)  
36. Why some businesses aren't allowed - Stripe, accessed November 22, 2025, [https://stripe.com/blog/why-some-businesses-arent-allowed](https://stripe.com/blog/why-some-businesses-arent-allowed)  
37. Telemedicine Prescribing of Controlled Substances When the Practitioner and the Patient Have Not Had a Prior In-Person Medical Evaluation - Federal Register, accessed November 22, 2025, [https://www.federalregister.gov/documents/2023/03/01/2023-04248/telemedicine-prescribing-of-controlled-substances-when-the-practitioner-and-the-patient-have-not-had](https://www.federalregister.gov/documents/2023/03/01/2023-04248/telemedicine-prescribing-of-controlled-substances-when-the-practitioner-and-the-patient-have-not-had)  
38. South Dakota v. Wayfair - TaxJar, accessed November 22, 2025, [https://www.taxjar.com/blog/south-dakota-vs-wayfair](https://www.taxjar.com/blog/south-dakota-vs-wayfair)  
39. South Dakota v. Wayfair: U.S. Supreme Court Remote Seller Sales Tax | Wolters Kluwer, accessed November 22, 2025, [https://www.wolterskluwer.com/en/expert-insights/south-dakota-vs-wayfair-supreme-court-remote-seller-sales-tax](https://www.wolterskluwer.com/en/expert-insights/south-dakota-vs-wayfair-supreme-court-remote-seller-sales-tax)  
40. ZIP Codes: The wrong tool for determining tax rates - Avalara, accessed November 22, 2025, [https://www.avalara.com/us/en/learn/whitepapers/zip-codes-the-wrong-tool-for-the-job.html](https://www.avalara.com/us/en/learn/whitepapers/zip-codes-the-wrong-tool-for-the-job.html)  
41. Why five digit zip codes don't always return correct sales tax rates - TaxJar, accessed November 22, 2025, [https://www.taxjar.com/blog/calculations/zip-codes-sales-tax](https://www.taxjar.com/blog/calculations/zip-codes-sales-tax)  
42. Information on transitioning to destination-based sales tax for online sellers using shopping carts | Washington Department of Revenue, accessed November 22, 2025, [https://dor.wa.gov/information-transitioning-destination-based-sales-tax-online-sellers-using-shopping-carts](https://dor.wa.gov/information-transitioning-destination-based-sales-tax-online-sellers-using-shopping-carts)  
43. Sales Tax Guide - Colorado Department of Revenue, accessed November 22, 2025, [https://tax.colorado.gov/sales-tax-guide](https://tax.colorado.gov/sales-tax-guide)  
44. Taxation of Digital Products Uniformity Project Draft White Paper Section on Bundling Presentation to the Work Group - Multistate Tax Commission, accessed November 22, 2025, [https://www.mtc.gov/wp-content/uploads/2024/09/Draft-Bundling-White-Paper-for-9-5-24-Work-Group-Meeting.pdf](https://www.mtc.gov/wp-content/uploads/2024/09/Draft-Bundling-White-Paper-for-9-5-24-Work-Group-Meeting.pdf)  
45. Application of Sales Tax to the Sale, Lease, or Use of Computer Hardware, Computer Software, and Digital Goods - IN.gov, accessed November 22, 2025, [https://www.in.gov/dor/files/sib08.pdf](https://www.in.gov/dor/files/sib08.pdf)  
46. 45 18-312 | IARP - Indiana Administrative Code, accessed November 22, 2025, [https://iar.iga.in.gov/register/20180725-IR-045180312NRA](https://iar.iga.in.gov/register/20180725-IR-045180312NRA)  
47. 139.215 Taxation of bundled transactions. (1) Unless otherwise provided by federal law, the following rules shall apply to a b, accessed November 22, 2025, [https://apps.legislature.ky.gov/law/statutes/statute.aspx?id=28863](https://apps.legislature.ky.gov/law/statutes/statute.aspx?id=28863)  
48. Managing sales tax for Software as a Service (SaaS) Companies ..., accessed November 22, 2025, [https://www.avalara.com/us/en/learn/whitepapers/sales-tax-on-software.html](https://www.avalara.com/us/en/learn/whitepapers/sales-tax-on-software.html)  
49. Calculating and Collecting Sales Tax for SaaS Transactions - Miles Consulting Group, accessed November 22, 2025, [https://milesconsultinggroup.com/blog/2023/08/31/calculating-and-collecting-sales-tax-for-saas-transactions/](https://milesconsultinggroup.com/blog/2023/08/31/calculating-and-collecting-sales-tax-for-saas-transactions/)  
50. Getting the Right Sales Tax Rate: ZIP Codes vs. Geolocation - Will's Whiteboard - Avalara, accessed November 22, 2025, [https://www.avalara.com/blog/en/north-america/2015/08/getting-the-right-sales-tax-rate-zip-codes-vs-geolocation-wills-whiteboard.html](https://www.avalara.com/blog/en/north-america/2015/08/getting-the-right-sales-tax-rate-zip-codes-vs-geolocation-wills-whiteboard.html)  
51. A Complete Guide to Sales Tax for SaaS Companies, accessed November 22, 2025, [https://sales.tax/expert-articles/sales-tax-for-saas-companies/](https://sales.tax/expert-articles/sales-tax-for-saas-companies/)  
52. A Question of Accuracy: ZIP Codes vs. Latitude and Longitude - Symmetry Software, accessed November 22, 2025, [https://www.symmetry.com/payroll-tax-insights/zip-codes-vs-latitude-longitude-accuracy](https://www.symmetry.com/payroll-tax-insights/zip-codes-vs-latitude-longitude-accuracy)  
53. State Online Sales Taxes in the Post-Wayfair Era - Tax Foundation, accessed November 22, 2025, [https://taxfoundation.org/research/all/state/state-remote-sales-tax-collection-wayfair/](https://taxfoundation.org/research/all/state/state-remote-sales-tax-collection-wayfair/)  
54. What Are FCI and CUI? NIST/CMMC Explained - Core Business Solutions, accessed November 22, 2025, [https://www.thecoresolution.com/what-are-fci-and-cui-nist-cmmc-explained](https://www.thecoresolution.com/what-are-fci-and-cui-nist-cmmc-explained)  
55. FCI vs. CUI: What's the Difference? - Axiom Tech, accessed November 22, 2025, [https://www.axiom.tech/fci-vs-cui-whats-the-difference/](https://www.axiom.tech/fci-vs-cui-whats-the-difference/)  
56. CUI Federal Regulations | Emory University | Atlanta GA, accessed November 22, 2025, [https://rcra.emory.edu/export-control/cui-federal-regulations.html](https://rcra.emory.edu/export-control/cui-federal-regulations.html)  
57. Protecting Student Information – Compliance with CUI and GLBA | Knowledge Center, accessed November 22, 2025, [https://fsapartners.ed.gov/knowledge-center/library/electronic-announcements/2020-12-18/protecting-student-information-compliance-cui-and-glba](https://fsapartners.ed.gov/knowledge-center/library/electronic-announcements/2020-12-18/protecting-student-information-compliance-cui-and-glba)  
58. Deemed exports - Learn&Support | Bureau of Industry and Security, accessed November 22, 2025, [https://www.bis.gov/learn-support/deemed-exports](https://www.bis.gov/learn-support/deemed-exports)  
59. Deemed Export - Office of Research Security & Trade Compliance, accessed November 22, 2025, [https://www.researchsecurity.pitt.edu/deemed-export](https://www.researchsecurity.pitt.edu/deemed-export)  
60. Deemed Export FAQs - Bureau of Industry and Security, accessed November 22, 2025, [https://www.bis.doc.gov/index.php/policy-guidance/deemed-exports/deemed-exports-faqs/cat/14-deemed-export-faqs](https://www.bis.doc.gov/index.php/policy-guidance/deemed-exports/deemed-exports-faqs/cat/14-deemed-export-faqs)  
61. 15 CFR 742.15 -- Encryption items. - eCFR, accessed November 22, 2025, [https://www.ecfr.gov/current/title-15/subtitle-B/chapter-VII/subchapter-C/part-742/section-742.15](https://www.ecfr.gov/current/title-15/subtitle-B/chapter-VII/subchapter-C/part-742/section-742.15)  
62. The Hidden Liabilities Contractors Face in the CMMC Era - CyberSheath, accessed November 22, 2025, [https://cybersheath.com/resources/blog/the-hidden-liabilities-contractors-face-in-the-cmmc-era/](https://cybersheath.com/resources/blog/the-hidden-liabilities-contractors-face-in-the-cmmc-era/)  
63. DOJ ramps up cyber-enforcement on defence contractors - International Security Journal, accessed November 22, 2025, [https://internationalsecurityjournal.com/doj-cyber-enforcement-defense/](https://internationalsecurityjournal.com/doj-cyber-enforcement-defense/)  
64. Compliance Risks in Freelance Models | Premier NX, accessed November 22, 2025, [https://premiernx.com/blog/freelancers-and-the-compliance-conundrum/](https://premiernx.com/blog/freelancers-and-the-compliance-conundrum/)  
65. The top 3 compliance traps when hiring freelancers | Staffing Industry Analysts, accessed November 22, 2025, [https://www.staffingindustry.com/editorial/staffing-stream/the-top-3-compliance-traps-when-hiring-freelancers](https://www.staffingindustry.com/editorial/staffing-stream/the-top-3-compliance-traps-when-hiring-freelancers)  
66. (FAQs) - Defense Counterintelligence and Security Agency, accessed November 22, 2025, [https://www.dcsa.mil/Portals/91/Documents/CTP/CUI/21-10-13%20CUI%20FAQ%20FINAL.pdf](https://www.dcsa.mil/Portals/91/Documents/CTP/CUI/21-10-13%20CUI%20FAQ%20FINAL.pdf)  
67. ​FCI and CUI, what is the difference? – CUI Program Blog - National Archives, accessed November 22, 2025, [https://isoo.blogs.archives.gov/2020/06/19/%E2%80%8Bfci-and-cui-what-is-the-difference/](https://isoo.blogs.archives.gov/2020/06/19/%E2%80%8Bfci-and-cui-what-is-the-difference/)  
68. Protecting Controlled Unclassified Information (CUI): NIST Special Publication 800-171, Revision 3, accessed November 22, 2025, [https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.1318.pdf](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.1318.pdf)
Ниже приводится инструкция, как сделать показатель «credit hold» из Microsoft Dynamics 365 Business Central доступным в Microsoft Dynamics 365 Sales, используя регулярный обмен данными через Power Automate.

1) Подготовить в Microsoft Dynamics 365 Business Central поле для хранения показателя «credit hold».

1.1) Убедиться, что в Microsoft Dynamics 365 Business Central есть таблица или страница, в которой хранится текущее состояние «credit hold» для клиентов (например, в карточке клиента или в отдельном поле).  
1.2) Проверить, доступно ли это поле «credit hold» в опубликованных API или в подключаемых источниках данных Business Central.  
1.3) Если стандартный объект не предоставляет поле «credit hold» напрямую, создать новое пользовательское поле или воспользоваться расширением (extension) для того, чтобы сделать значение «credit hold» видимым извне.

2) Подготовить таблицу (или поле) в Microsoft Dynamics 365 Sales для отображения «credit hold».

2.1) Открыть Microsoft Dynamics 365 Sales.  
2.2) Перейти в «Settings» → «Advanced Settings» → «Customizations» → «Customize the System».  
2.3) Выбрать сущность, к которой относится «credit hold» (например, «Account», если «credit hold» относится к компании-клиенту).  
2.4) Создать новое поле (если отсутствует) с названием, например, CreditHoldStatus.  
2.5) Указать тип поля (например, Two Options или Text) в зависимости от того, как планируется хранить статус.  
2.6) Сохранить изменения и опубликовать кастомизацию.

3) Настроить Flow в Power Automate для чтения «credit hold» из Business Central.

3.1) Открыть Power Automate.  
3.2) Создать новый «Flow» (тип, например, «Scheduled cloud flow» или «Automated cloud flow» в зависимости от потребностей).  
3.3) В качестве первого шага добавить коннектор «Business Central».  
3.4) Выбрать триггер или действие, которое получает список записей (например, «List records») из таблицы Business Central, содержащей поле «credit hold».  
3.5) Указать параметры, позволяющие фильтровать или извлекать только тех клиентов, для которых значение «credit hold» актуально.

4) В том же «Flow» добавить обновление записи в Microsoft Dynamics 365 Sales.

4.1) После шага чтения данных из Business Central добавить новый шаг с коннектором «Dynamics 365» или «Microsoft Dataverse» (в зависимости от используемой версии).  
4.2) Выбрать действие «Update a row» или «Update a record», указать сущность (например, «Account»).  
4.3) Сопоставить (map) идентификатор клиента (из Business Central) с соответствующим идентификатором в Microsoft Dynamics 365 Sales.  
4.4) Записать значение поля «credit hold» (полученное на предыдущем шаге) в поле CreditHoldStatus, созданное в пункте 2.4.  
4.5) Сохранить «Flow» и при необходимости установить расписание (Schedule) для регулярного запуска.

5) Проверить расписание и частоту обмена данными.

5.1) Определить, как часто необходимо обновлять данные «credit hold» в Sales (например, один раз в сутки или чаще).  
5.2) В разделе «My flows» в Power Automate при выборе нужного потока открыть «Edit» и настроить интервал в «Recurrence» (если используется «Scheduled cloud flow»).  
5.3) Сохранить настройки и запустить тестовый прогон потока.

6) Выполнить тестирование и валидацию.

6.1) Создать или обновить запись в Business Central, где поле «credit hold» установлено в истинное состояние (или любое другое).  
6.2) Убедиться, что при выполнении потока в Power Automate значение поля «credit hold» считывается.  
6.3) Проверить в Microsoft Dynamics 365 Sales (в разделе «Accounts» или другом соответствующем разделе), что поле CreditHoldStatus обновилось в соответствии с данными из Business Central.  
6.4) При необходимости дополнительно настроить отображение поля CreditHoldStatus в формах и представлениях Microsoft Dynamics 365 Sales (например, через «Settings» → «Customizations» → «Customize the System» и «Forms»/«Views»).

7) Настроить оповещение пользователей в Microsoft Dynamics 365 Sales (опционально).

7.1) Если требуется уведомлять сотрудников о новых или изменённых клиентах с «credit hold», можно использовать «Workflows» или «Power Automate» в среде Microsoft Dynamics 365 Sales, чтобы отправлять уведомления (например, электронной почтой) или назначать задачи.  
7.2) Перейти в «Settings» → «Processes», создать новый процесс по типу «Workflow», выбрать сущность «Account», настроить условие с проверкой поля CreditHoldStatus.  
7.3) Указать действия (например, отправить письмо, создать задачу) при изменении CreditHoldStatus.

8) Документирование и дальнейшая поддержка.

8.1) Составить список полей и описать логику маппинга между Business Central и Dynamics 365 Sales, включая «credit hold».  
8.2) Зафиксировать расписание выполнения потока Power Automate и критерии отбора записей.  
8.3) Периодически проверять журнал выполнения («Flow runs») в Power Automate, чтобы отслеживать возможные ошибки и задержки.

В итоге статус «credit hold» будет регулярно передаваться из Microsoft Dynamics 365 Business Central в Microsoft Dynamics 365 Sales, что позволит сотрудникам в Sales видеть актуальные показатели кредитных ограничений клиентов.
1) Определить, какие данные из NetSuite требуется передавать в 3PL  
   Для начала необходимо уточнить, какие поля заказов (Sales Order) и связанные с ними данные нужно включать в выгружаемый файл. Рекомендуется сформировать список необходимых полей и форматов.

2) Подготовить Saved Search для выборки заказов  
   В NetSuite:  
   1. Перейти в «Lists» → «Search» → «Saved Searches».  
   2. Создать Saved Search, отфильтровав заказы (Sales Order) по нужным критериям (например, по статусу, дате, флагу Ready to Ship и т. д.).  
   3. В разделе «Results» указать поля, которые необходимо включать в выгружаемый файл.

3) Настроить формат итогового файла  
   Если предполагается формат CSV или XML, то в Saved Search следует настроить соответствующие колонки и заголовки.  
   При необходимости в разделе «Export» Saved Search можно указать формат выгрузки (CSV, PDF, XLS). Однако, если требуется более гибкая структура (например, нестандартный CSV или XML), обычно удобнее использовать SuiteScript 2.x для генерации файла с нужным форматом.

4) Создать SuiteScript 2.x (Map/Reduce Script или Scheduled Script) для экспорта данных  
   1. В NetSuite: «Customization» → «Scripting» → «Scripts».  
   2. Создать новый скрипт типа «Map/Reduce Script» или «Scheduled Script» (в зависимости от объёмов и частоты выгрузок).  
   3. В файле скрипта (например, `ExportOrdersToSFTP.js`) использовать Saved Search для получения списка заказов. При необходимости дополнить логику подготовки и форматирования данных.  
   4. Подключить модуль SFTP (N/sftp) и методы для авторизации и записи файла на SFTP-сервер.  
   5. Создать итоговый файл (CSV, XML или требуемый формат) из полученных данных заказов.

5) Использовать N/sftp для установления соединения с удалённым SFTP-сервером  
   1. В коде скрипта получить доступ к модулю SFTP (N/sftp).  
   2. Инициализировать подключение с помощью объекта sftp.createConnection(), передав следующие параметры:  
      – хост SFTP-сервера (Host)  
      – порт (Port)  
      – учётные данные для аутентификации (Username, Key/Password)  
      – путь к удалённой папке (Remote Directory)  
   3. Проверить успешность соединения, используя методы модуля SFTP.

6) Сформировать и загрузить файл на SFTP-сервер  
   1. В скрипте подготовить содержимое файла (например, в формате CSV).  
   2. Создать объект File (N/file) и записать в него сгенерированные данные.  
   3. Использовать методы модуля SFTP для записи файла в нужный каталог на сервере. Для этого вызвать метод upload() или put() (зависит от используемой версии модуля).

7) Создать Script Deployment и назначить расписание  
   1. Вернуться в NetSuite: «Customization» → «Scripting» → «Script Deployments».  
   2. Создать новый Script Deployment для созданного выше «Map/Reduce Script» или «Scheduled Script».  
   3. Задать расписание (Schedule) с нужной периодичностью (например, раз в час или раз в сутки).  
   4. Указать дополнительные параметры, такие как Logging Level и Email для уведомлений об ошибках.

8) Проверить логику экспорта данных  
   1. Запустить скрипт вручную (Run Now) для проверки.  
   2. Убедиться, что файл корректно создаётся и загружается на SFTP-сервер.  
   3. Проверить формат и структуру файла, сравнить с требованиями 3PL.

9) Настроить уведомления и логи  
   1. Опционально включить автоматическую отправку уведомлений (Notifications) на электронную почту при ошибках.  
   2. Использовать системный лог NetSuite (Execution Log) для диагностики проблем и отладки.

10) Подготовить документацию по настройке  
   1. В отдельном документе описать все ключевые параметры и логику работы скрипта.  
   2. Зафиксировать конфигурацию SFTP (хост, порт, ключ, пароль и т. д.), расписание выполнения, а также список полей в файле.  
   3. Передать документацию заинтересованным сторонам, чтобы при необходимости поддерживать или модифицировать процесс экспорта заказов.